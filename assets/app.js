var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.token&&(o.headers.Authorization=e.localStorage.token),o}}}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("admin-booking",{url:"/admin-booking",templateUrl:"admin-booking"}),o.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,o,t){e.$state=o,e.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,o,t,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,i){if(e){var s={firstName:n,lastName:a,email:r,phoneNumber:i};t.changeUserDetails(s).then(function(e){o.reload()})}},e.cancelBooking=function(e,t){n.cancelBooking(e,t).then(function(e){o.reload()})};var a=function(){t.getUserBookings().then(function(o){console.log(o),e.userBookings=o})},r=function(){t.getUserInfo().then(function(o){console.log(o),e.firstName=o.firstName,e.lastName=o.lastName,e.email=o.email,e.phone=o.phone})};e.changePassword=function(o,n,a){o&&t.changePassword(n,a).then(function(o){e.successfulPasswordChange=!0},function(o){e.wrongPassword=!0})},e.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,o,t,n,a,r,i,s){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.submitError=!1,o.errorMessage="",i.isLoggedIn=function(){return s.isAuthenticated},i.isLoggedIn()&&s.getUserRole().then(function(e){i.role=e.role}),o.signin=function(){s.signin(o.user).then(function(e,o){i.isLogedIn=!0,s.getUserRole().then(function(e){i.role=e.role}),n.location.reload()})},o.signout=function(){s.signout(),i.isLogedIn=!1,t.go("home").then(function(){n.location.reload()})},o.getUserInfo=function(){s.getUserInfo().then(function(e){console.log(e),o.userinfo=e})},o.submitForm=function(e){e?s.signup(o.user).then(function(e){o.submitError=!1,s.signin(o.user).then(function(e,o){i.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:o.submitError=!0,o.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},o.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService","voucherService",function(e,o,t,n,a,r,i,s,c,u){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays,r.price=JSON.parse(a.get("price"));var l=function(){s.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:d(),extras:r.extras}).then(function(){i.discount&&u.useVoucher(i.discount.code).then(function(e){n.go("successfulBooking")},function(e){console.log(e)})},function(e){})},r.toPrevious=function(){n.go("offer")};var d=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(o){e+=o.price*r.numOfDays}),e};l()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,n){n.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,o,t,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$rootScope","$cookies","$state","$location","$window","offerSvc",function(e,o,t,n,a,r,i){e.offer={},e.extras=[],e.selectedExtras=[];var s={};e.dateFrom="",e.dateTo="",e.roomName="";var c=function(){e.offer=JSON.parse(t.get("room")),e.extras=l(),s=JSON.parse(t.get("dates")),e.dateFrom=u(new Date(s.dateFrom)),e.dateTo=u(new Date(s.dateTo)),e.roomName=e.offer.room.type,e.roomPrice=e.offer.room.price*d(),e.extrasTotalPrice=0,e.calculateTotalPrice()},u=function(e){var o=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+o+"-"+t+"-"+n};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*d()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*d()),e.calculateTotalPrice()},e.toConfirmation=function(){var o={extras:e.selectedExtras,numOfDays:d()};t.put("extras",JSON.stringify(o)),t.put("price",JSON.stringify(e.totalPrice)),n.go("confirmation")},e.toPrevious=function(){n.go("home")},e.calculateTotalPrice=function(){void 0!=o.discount&&"zl"==o.discount.type?e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice-o.discount.amount:void 0!=o.discount&&"%"==o.discount.type?(e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice,e.totalPrice=e.totalPrice-e.totalPrice*(o.discount.amount/100)):e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice};var l=function(){i.getExtras().then(function(o){e.extras=o;for(var t=0;t<e.extras.length;t++)e.extras[t].buttonText="Dodaj +",e.extras[t].buttonToggle=!1})};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,e.totalPrice=0,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*d()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*d()),e.calculateTotalPrice()};var d=function(){var e=864e5,o=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/e)};o.$watch("discount",function(){e.calculateTotalPrice()}),c()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$rootScope","$window","$location","roomService","voucherService","offerSvc","$filter","$state",function(e,o,t,n,a,r,i,s,c,u,l){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.totalPrice=0,t.extras=[],t.selectedExtras=[],t.extrasTotalPrice=0,t.selectOrAddUser=void 0,t.select=function(e){t.selectedRoom=e};var d=function(){var e=new Date;t.dateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.dateTo=o};t.init=function(){d(),t.findRooms()},t.findRooms=function(){if(t.dateFrom.getMonth()>=t.dateTo.getMonth()&&t.dateFrom.getDate()>=t.dateTo.getDate()){var e=new Date;e.setDate(t.dateFrom.getDate()+1),e.setMonth(t.dateFrom.getMonth()),t.dateTo=e}i.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(e){e.length>0?(t.rooms=e,t.noRoomsError=!1):t.noRoomsError=!0},function(e){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(e){o.put("room",JSON.stringify({room:{id:e._id,type:e.type,price:e.price}})),o.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),c.chooseRoom(e),l.go("offer")},t.getAllRooms=function(){i.getAllRooms().then(function(e){t.allRooms=e,console.log(e)},function(e){})},t.dateChanged=function(){if(t.dateFrom.getMonth()>=t.dateTo.getMonth()&&t.dateFrom.getDate()>=t.dateTo.getDate()){var e=new Date;e.setDate(t.dateFrom.getDate()+1),e.setMonth(t.dateFrom.getMonth()),t.dateTo=e}},t.getAvailability=function(e){for(var o=(new Date,new Date(t.dateFrom)),n=new Date(t.dateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),i=new Date(e[a].to);if(o<i&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){d(),t.getAllRooms()},t.toBookings=function(e){o.put("selectedRoom",JSON.stringify({_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price})),$("#regulamin").modal("hide"),setTimeout(function(){l.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(o.get("selectedRoom"))},t.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},t.cancelBooking=function(e,o){i.cancelBooking(e,o).then(function(e){l.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),i.getRoomBookings(t.selectedRoom._id).then(function(e){t.bookings=e.reservations})},t.selectUser=function(e){i.getUserInfo(e).then(function(e){t.selectedUser=e})},t.toBooking=function(e,t,n){o.put("booking",JSON.stringify({room:{_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price},dateFrom:t,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){l.go("admin-booking")},500)},t.initBooking=function(){t.booking=JSON.parse(o.get("booking")),t.calculateTotalPrice(),f(),i.getUsersEmails().then(function(e){t.users=JSON.parse(JSON.stringify(e))})},t.submitBookForm=function(){var e=null;if(t.selectOrAddUser){if(void 0==t.bookingUser.email)var e={email:""+t.bookingUser.firstName+t.bookingUser.lastName+t.bookingUser.phone,firstName:t.bookingUser.firstName,lastName:t.bookingUser.lastName,phone:t.bookingUser.phone};else var e={email:t.bookingUser.email,firstName:t.bookingUser.firstName,lastName:t.bookingUser.lastName,phone:t.bookingUser.phone};i.signupAndBook(e,t.booking.room._id,{dateFrom:t.booking.dateFrom,dateTo:t.booking.dateTo},t.totalPrice,t.selectedExtras).then(function(e){n.discount&&s.useVoucher(n.discount.code).then(function(e){},function(e){console.log(e)})})}else e=JSON.parse(t.selectedUserBooking),i.adminBook(t.booking.room._id,e.email,{dateFrom:t.booking.dateFrom,dateTo:t.booking.dateTo},t.totalPrice,t.selectedExtras).then(function(e){n.discount&&s.useVoucher(n.discount.code).then(function(e){},function(e){console.log(e)})})};var g=function(){var e=864e5,o=new Date(t.booking.dateFrom),n=new Date(t.booking.dateTo),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};t.calculateTotalPrice=function(){t.booking&&(void 0!=n.discount&&"zl"==n.discount.type?t.totalPrice=g()*t.booking.room.price+t.extrasTotalPrice-n.discount.amount:void 0!=n.discount&&"%"==n.discount.type?(t.totalPrice=g()*t.booking.room.price+t.extrasTotalPrice,t.totalPrice=t.totalPrice-t.totalPrice*(n.discount.amount/100)):t.totalPrice=g()*t.booking.room.price+t.extrasTotalPrice)};var f=function(){c.getExtras().then(function(e){t.extras=e;for(var o=0;o<t.extras.length;o++)t.extras[o].buttonText="Dodaj +",t.extras[o].buttonToggle=!1})};t.addOrRemoveExtra=function(e){var o=t.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t.totalPrice=0,o==-1?(t.selectedExtras.push(e),t.extrasTotalPrice+=e.price*g()):(t.selectedExtras.splice(o,1),t.extrasTotalPrice-=e.price*g()),t.calculateTotalPrice()},t.paidClass=function(e){return e?"btn-success":"btn-warning"},t.pay=function(e){i.pay(e._id,!e.paid).then(function(o){e.paid=!e.paid})},n.$watch("discount",function(){t.calculateTotalPrice()})}]),angular.module("app").controller("userCtrl",["$scope","$state","AuthService","roomService","userService",function(e,o,t,n,a){a.getAllUsers().then(function(o){e.users=o}),e.changeUserDetails=function(t){if(t){var n={firstName:e.selectedUser.firstName,lastName:e.selectedUser.lastName,email:e.selectedUser.email,phoneNumber:e.selectedUser.phoneNumber,role:e.selectedUser.role};a.changeUserDetails(n).then(function(e){o.reload()})}}}]),angular.module("app").controller("voucherCtrl",["$scope","$rootScope","voucherService",function(e,o,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var o="",t=0;t<e.length;t++){if(!n(e.charAt(t)))return o=Number(o);o+=e.charAt(t)}return o=Number(o)}e.generateVouchers=function(){e.vouchers={codes:[]};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.voucherExpiryDate;if(t<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var n="",r=0;r<4;r++){for(var i=0;i<5;i++)n+=o.charAt(Math.floor(Math.random()*o.length));3!=r&&(n+="-")}e.vouchers.codes.push(n)}var s=e.discount.charAt(e.discount.length-1);"%"===s?e.vouchers.discountType="%":"ł"===s&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=a(e.discount),e.vouchers.expiryDate=t,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){t.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){t.checkVoucher(e.voucher.toString()).then(function(t){e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+t.discount+t.discountType,o.discount={amount:t.discount,type:t.discountType,code:e.voucher}},function(t){o.discount=void 0,e.voucherNotFound=t,e.voucherFound=void 0})},e.codeChanged=function(){e.bookingFrm.$valid||(e.voucherFound=void 0,e.voucherNotFound=void 0,o.discount=void 0)}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,o){if(angular.isArray(e)){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a][o];angular.isUndefined(n[r])&&(n[r]=!0,t.push(e[a]))}return t}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,o,t){function n(){var e=window.localStorage.getItem(c);console.log("loading User info..."),e&&i(e)}function a(){s=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(e){window.localStorage.setItem(c,e),i(e)}function i(o){u=!0,s=o,e.defaults.headers.common.Authorization=s}var s,c="token",u=!1,l=function(t){return o(function(o,n){e.post("/api/authenticate",t).then(function(e){e.data.success?(r(e.data.token),o(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},g=function(t){return o(function(o,n){e.post("/api/signup",t).then(function(e){e.data.success?(console.log("jestem w resolve"),o(e.data.msg)):n(e.data.msg)})})};n();var f=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):t(e.data.msg)})})},m=function(){return o(function(o,t){e.get("/api/getUserBookings").then(function(e){o(e.data)})})},p=function(t){return o(function(o,a){e.post("/api/changeUserDetails",t).then(function(i){i.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:t.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),o({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return o(function(o,a){e.post("/api/change-password",{oldPass:t,newPass:n}).then(function(e){e.data.success?o({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({role:e.data.role}):t(e.data.msg)})})};return{signin:l,signout:d,signup:g,getUserInfo:f,getUserBookings:m,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,o){var t=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,t){o.get("/api/getExtras").then(function(o){o.data.success?e(o.data.extras):t(o.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,o){var t=function(t){return e(function(e,n){o.post("/api/findRooms",t).then(function(o){o.data.success?(console.log("Pobrano pokoje"),e(o.data.rooms)):n(o.data.error)})})},n=function(t){return e(function(e,n){o.post("/api/reserve",t).then(function(o){o.data.success?e(o.data.success):n(o.data.error)})})},a=function(t,n){return e(function(e,a){console.log("jetem przed post cancel"),o.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(o){o.data.success?(console.log("resolve cancel"),e(o.data.success)):(console.log("reject cancel"),a(o.data.error))})})},r=function(){return e(function(e,t){o.get("/api/getRooms").then(function(o){o.data.success?e(o.data.result):t(o.data.error)})})},i=function(t){return e(function(e,n){o.post("/api/getRoomBookings",{room_id:t}).then(function(o){console.log(o.data[0].reservations),e(o.data[0])},function(e){n(e.data)})})},s=function(t){return e(function(e,n){o.post("/api/getUserInfo",{email:t}).then(function(o){o.data.error?n(o.data):e(o.data)},function(e){n(e.data)})})},c=function(t,n,a,r,i){return console.log(i),e(function(e,s){o.post("/api/signupAndBook",{firstName:t.firstName,lastName:t.lastName,email:t.email,number:t.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:i}).then(function(o){e("OK")},function(e){s("Wystąpił błąd podczas rezerwacji")})})},u=function(t,n,a,r,i){return console.log("Serwis: roomSvc, funkcja: adminBook | id:"+t+", email: "+n),e(function(e,s){o.post("/api/adminBook",{id:t,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:i}).then(function(o){o.data.success?e("OK"):s("Wystąpił błąd podczas rezerwacji")},function(e){s("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,t){o.get("/api/getUsersEmails").then(function(o){(o.data.success=!1)?t("Nie znaleziono użytkowników"):e(o.data)},function(e){t("Nie znaleziono użytkowników")})})},d=function(t,n){return e(function(e,a){o.post("/api/paid",{id:t,pay:n}).then(function(o){o.data.success?e(!0):a(!1)})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:i,getUserInfo:s,signupAndBook:c,adminBook:u,getUsersEmails:l,pay:d}}]),angular.module("app").service("userService",["$q","$http",function(e,o){var t=function(){return e(function(e,t){o.get("/api/getAllUsers").then(function(o){e(o.data)},function(e){t(e.data)})})},n=function(t){return e(function(e,n){o.post("/api/adminChangeUserDetails",t).then(function(o){o.data.success?e({success:!0,msg:"Pomyślnie zmieniono dane"}):n({success:!1,msg:"coś poszło nie tak"})})})};return{getAllUsers:t,changeUserDetails:n}}]),angular.module("app").service("voucherService",["$q","$http",function(e,o){var t=function(t){return console.log(t),e(function(e,n){o.post("/api/saveVouchers",t).then(function(o){o.data.success?e(o.data.msg):n(o.data.msg)},function(e){n(e.data.msg)})})},n=function(t){return e(function(e,n){o.post("/api/checkVoucher",{voucherCode:t}).then(function(o){o.data.success&&new Date(o.data.voucher.expiryDate)<new Date?n("Termin miną"):o.data.success&&o.data.voucher.used?n("Kod został już wykożystany"):o.data.success&&!o.data.voucher.used?e(o.data.voucher):n(o.data.error)})})},a=function(t){return e(function(e,n){o.post("/api/useVoucher",{code:t}).then(function(o){o.data.success?e("Klucz wykorzystany."):n(o.data.error)})})};return{saveVouchers:t,checkVoucher:n,useVoucher:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy91c2VyQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3ZvdWNoZXJDb250cm9sbGVyLmpzIiwiZmlsbHRlcnMvcm9vbUZpbHRlci5qcyIsInNlcnZpY2VzL2F1dGhvcml6YXRpb24uc3ZjLmpzIiwic2VydmljZXMvb2ZmZXIuc3ZjLmpzIiwic2VydmljZXMvcm9vbS5zdmMuanMiLCJzZXJ2aWNlcy91c2VyLnN2Yy5qcyIsInNlcnZpY2VzL3ZvdWNoZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwibG9jYWxTdG9yYWdlIiwidG9rZW4iLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRzY29wZSIsIkF1dGhTZXJ2aWNlIiwicm9vbVNlcnZpY2UiLCJyZWdleCIsImlzQWN0aXZlIiwidmlld0xvY2F0aW9uIiwiJGxvY2F0aW9uIiwicGF0aCIsImNoYW5nZVVzZXJEZXRhaWxzIiwiaXNWYWxpZCIsImZOYW1lIiwibE5hbWUiLCJuRW1haWwiLCJuUGhvbmUiLCJuZXdEZXRhaWxzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lTnVtYmVyIiwidGhlbiIsImEiLCJyZWxvYWQiLCJjYW5jZWxCb29raW5nIiwicm9vbV9pZCIsImJvb2tpbmdfaWQiLCJnZXRVc2VyQm9va2luZ3MiLCJtc2ciLCJjb25zb2xlIiwibG9nIiwidXNlckJvb2tpbmdzIiwiZ2V0SW5mbyIsImdldFVzZXJJbmZvIiwidXNlciIsInBob25lIiwiY2hhbmdlUGFzc3dvcmQiLCJ2YWxpZCIsIm9sZFAiLCJuZXdQIiwicmVzIiwic3VjY2Vzc2Z1bFBhc3N3b3JkQ2hhbmdlIiwicmVqIiwid3JvbmdQYXNzd29yZCIsImNoZWNrRGF0ZSIsImRhdGUiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJkYXRlRnJvbSIsIiRxIiwiJHJvdXRlIiwic3VibWl0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpc0xvZ2dlZEluIiwiaXNBdXRoZW50aWNhdGVkIiwiZ2V0VXNlclJvbGUiLCJyZXN1bHQiLCJyb2xlIiwic2lnbmluIiwic3VjY2VzcyIsImlzTG9nZWRJbiIsImxvY2F0aW9uIiwic2lnbm91dCIsImdvIiwidXNlcmluZm8iLCJzdWJtaXRGb3JtIiwic2lnbnVwIiwiZGF0YSIsInRvU3RyaW5nIiwiY29kZSIsIiR3YXRjaCIsIiRjb29raWVzIiwidm91Y2hlclNlcnZpY2UiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsInByaWNlIiwiaW5pdCIsInJlc2VydmUiLCJ0ZXJtcyIsImFsZXJ0IiwiYm9va1Jvb20iLCJpZCIsIl9pZCIsImZyb20iLCJ0byIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJkaXNjb3VudCIsInVzZVZvdWNoZXIiLCJ2UmVzdWx0IiwiZXJyb3IiLCJ0b1ByZXZpb3VzIiwidG90YWwiLCJmb3JFYWNoIiwiZSIsImRpcmVjdGl2ZSIsInJlcXVpcmUiLCJzY29wZSIsIm90aGVyTW9kZWxWYWx1ZSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cmlidXRlcyIsIm5nTW9kZWwiLCIkdmFsaWRhdG9ycyIsImNvbXBhcmVUbyIsIm1vZGVsVmFsdWUiLCIkdmFsaWRhdGUiLCJhdHRyIiwibUN0cmwiLCJ2YWxpZGF0aW9uIiwidm91Y2hlciIsImxlbmd0aCIsImNoYXJBdCIsIiRzZXRWYWxpZGl0eSIsIiRwYXJzZXJzIiwicHVzaCIsIm9mZmVyU3ZjIiwib2ZmZXIiLCJzZWxlY3RlZEV4dHJhcyIsImRhdGVzIiwicm9vbU5hbWUiLCJzaG93T2ZmZXIiLCJnZXRFeHRyYXMiLCJkYXRlUHJlZXRpZnkiLCJ0eXBlIiwicm9vbVByaWNlIiwiY2FsY3VsYXRlRGlmZk9mRGF5cyIsImV4dHJhc1RvdGFsUHJpY2UiLCJkYXkiLCJnZXRVVENEYXRlIiwibW9udGgiLCJnZXRVVENNb250aCIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsImFkZE9yUmVtb3ZlRXh0cmEiLCJleHRyYSIsImluZGV4IiwiaW5kZXhPZiIsImJ1dHRvblRleHQiLCJidXR0b25Ub2dnbGUiLCJzcGxpY2UiLCJ0b0NvbmZpcm1hdGlvbiIsInB1dCIsInN0cmluZ2lmeSIsInRvdGFsUHJpY2UiLCJ1bmRlZmluZWQiLCJhbW91bnQiLCJleHRyYXNEYXRhIiwiaSIsIk1TX1BFUl9EQVkiLCJkYXRlRnJvbVVUQyIsIlVUQyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZGF0ZVRvVVRDIiwiTWF0aCIsImZsb29yIiwiJGZpbHRlciIsIm5vUm9vbXNFcnJvciIsImVycm9yTXNnIiwicm9vbXMiLCJudW1iZXJPZkJlZHMiLCJzdWNjZXNzZnVsQ2FuY2VsIiwic2VsZWN0T3JBZGRVc2VyIiwic2VsZWN0Iiwic2VsZWN0ZWRSb29tIiwic2V0RGF0ZSIsImRhdGVUZW1wIiwiZmluZFJvb21zIiwic2V0TW9udGgiLCJnZXRSb29tcyIsInRvSVNPU3RyaW5nIiwiYmVkcyIsInJvb21zRGF0YSIsImFkZFJvb20iLCJjaG9vc2VSb29tIiwiZ2V0QWxsUm9vbXMiLCJhbGxSb29tcyIsImRhdGVDaGFuZ2VkIiwiZ2V0QXZhaWxhYmlsaXR5IiwicmVzZXJ2YXRpb25zIiwicm9vbURhdGVGcm9tIiwicm9vbURhdGVUbyIsIm1hbmFnbWVudEluaXQiLCJ0b0Jvb2tpbmdzIiwibnVtYmVyIiwiJCIsIm1vZGFsIiwic2V0VGltZW91dCIsImdldFNlbGVjdGVkUm9vbSIsImdldFJvb21Cb29raW5ncyIsImIiLCJib29raW5ncyIsInNlbGVjdFVzZXIiLCJ1Iiwic2VsZWN0ZWRVc2VyIiwidG9Cb29raW5nIiwiaW5pdEJvb2tpbmciLCJib29raW5nIiwiZ2V0VXNlcnNFbWFpbHMiLCJ1c2VycyIsInN1Ym1pdEJvb2tGb3JtIiwiYm9va2luZ1VzZXIiLCJzaWdudXBBbmRCb29rIiwic2VsZWN0ZWRVc2VyQm9va2luZyIsImFkbWluQm9vayIsInBhaWRDbGFzcyIsInBhaWQiLCJwYXkiLCJ1c2VyU2VydmljZSIsImdldEFsbFVzZXJzIiwiaXNOdW1lcmljIiwibiIsImlzTmFOIiwicGFyc2VGbG9hdCIsImlzRmluaXRlIiwiY29udmVydFRvTnVtYmVyIiwiTnVtYmVyIiwiZ2VuZXJhdGVWb3VjaGVycyIsInZvdWNoZXJzIiwiY29kZXMiLCJwb3NzaWJsZSIsImV4cGlyeURhdGUiLCJ2b3VjaGVyRXhwaXJ5RGF0ZSIsInZvdWNoZXJFcnJvciIsInZvdWNoZXJzR2VuZXJhdGVkIiwiZ2VuZXJhdGVkVm91Y2hlcnMiLCJudW1iZXJPZlZvdWNoZXJzIiwiaiIsInJhbmRvbSIsImxhc3QiLCJkaXNjb3VudFR5cGUiLCJ2b3VjaGVyc1NhdmVkIiwic2F2ZVZvdWNoZXJzIiwiY2hlY2tWb3VjaGVyIiwidm91Y2hlck5vdEZvdW5kIiwidm91Y2hlckZvdW5kIiwiY29kZUNoYW5nZWQiLCJib29raW5nRnJtIiwiJHZhbGlkIiwiZmlsdGVyIiwicHJvcGVydHlOYW1lIiwiaXNBcnJheSIsImtleXMiLCJ2YWwiLCJpc1VuZGVmaW5lZCIsInNlcnZpY2UiLCIkaHR0cCIsImxvYWRVc2VySW5mbyIsIndpbmRvdyIsImdldEl0ZW0iLCJMT0NBTF9UT0tFTiIsInVzZXJJbmZvIiwiZGVzdHJveVVzZXJJbmZvIiwiYXV0aFRva2VuIiwiZGVmYXVsdHMiLCJjb21tb24iLCJyZW1vdmVJdGVtIiwic3RvcmVVc2VySW5mbyIsInNldEl0ZW0iLCJyZXNvbHZlIiwicmVqZWN0IiwicG9zdCIsInJlc3VsdDIiLCJvbGRQYXNzIiwibmV3UGFzcyIsImNob29zZW5Sb29tIiwiZ2V0Um9vbSIsInJlc2VydmF0aW9uX2lkIiwidm91Y2hlckNvZGUiLCJ1c2VkIl0sIm1hcHBpbmdzIjoiQUFHQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQUEsVUFBQSxZQUFBLGFDQUFELFNBQUFDLE9BQUEsT0FDQUMsUUFBQSxtQkFBQSxVQUFBLFNBQUFDLEdBQ0EsT0FDQUMsUUFBQSxTQUFBQyxHQUtBLE1BSkFBLEdBQUFDLFFBQUFELEVBQUFDLFlBQ0FILEVBQUFJLGFBQUFDLFFBQ0FILEVBQUFDLFFBQUEsY0FBQUgsRUFBQUksYUFBQUMsT0FFQUgsT0FJQUEsUUFBQSxpQkFBQSxxQkFBQSxTQUFBSSxFQUFBQyxHQUNBRCxFQUNBRSxNQUFBLFFBQ0FDLElBQUEsUUFDQUMsV0FBQSxXQUNBQyxZQUFBLFNBRUFILE1BQUEsU0FDQUMsSUFBQSxTQUNBRSxZQUFBLFVBRUFILE1BQUEsY0FDQUMsSUFBQSxjQUNBRSxZQUFBLGVBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxXQUFBLFlBQ0FDLFlBQUEsVUFFQUgsTUFBQSxnQkFDQUMsSUFBQSxnQkFDQUUsWUFBQSxpQkFFQUgsTUFBQSxxQkFDQUMsSUFBQSxxQkFDQUUsWUFBQSxzQkFFQUgsTUFBQSxvQkFDQUMsSUFBQSxvQkFDQUUsWUFBQSxxQkFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FFLFlBQUEsWUFFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FFLFlBQUEsV0FFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FFLFlBQUEsV0FFQUgsTUFBQSxvQkFDQUMsSUFBQSxZQUNB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QUFDLE9BQUEsT0FDQTZRLFFBQUEsa0JBQUEsS0FBQSxRQUFBLFNBQUEzTSxFQUFBNE0sR0FFQSxHQUFBZCxHQUFBLFNBQUFkLEdBRUEsTUFEQXBNLFNBQUFDLElBQUFtTSxHQUNBaEwsRUFBQSxTQUFBeU4sRUFBQUMsR0FDQWQsRUFBQWUsS0FBQSxvQkFBQTNDLEdBQUE1TSxLQUFBLFNBQUFtQyxHQUNBQSxFQUFBVyxLQUFBUixRQUNBK00sRUFBQWxOLEVBQUFXLEtBQUF2QyxLQUVBK08sRUFBQW5OLEVBQUFXLEtBQUF2QyxNQUNBLFNBQUE0QixHQUNBbU4sRUFBQW5OLEVBQUFXLEtBQUF2QyxVQUtBb04sRUFBQSxTQUFBN0gsR0FDQSxNQUFBbEUsR0FBQSxTQUFBeU4sRUFBQUMsR0FDQWQsRUFBQWUsS0FBQSxxQkFBQU8sWUFBQWhLLElBQUE5RixLQUFBLFNBQUFtQyxHQUNBQSxFQUFBVyxLQUFBUixTQUFBLEdBQUFaLE1BQUFTLEVBQUFXLEtBQUFnRCxRQUFBaUgsWUFBQSxHQUFBckwsTUFDQTROLEVBQUEsZUFFQW5OLEVBQUFXLEtBQUFSLFNBQUFILEVBQUFXLEtBQUFnRCxRQUFBaUssS0FDQVQsRUFBQSw4QkFFQW5OLEVBQUFXLEtBQUFSLFVBQUFILEVBQUFXLEtBQUFnRCxRQUFBaUssS0FDQVYsRUFBQWxOLEVBQUFXLEtBQUFnRCxTQUdBd0osRUFBQW5OLEVBQUFXLEtBQUE0QixZQU1BRixFQUFBLFNBQUFzQixHQUNBLE1BQUFsRSxHQUFBLFNBQUF5TixFQUFBQyxHQUNBZCxFQUFBZSxLQUFBLG1CQUFBdk0sS0FBQThDLElBQUE5RixLQUFBLFNBQUFtQyxHQUNBQSxFQUFBVyxLQUFBUixRQUNBK00sRUFBQSx1QkFFQUMsRUFBQW5OLEVBQUFXLEtBQUE0QixXQUtBLFFBQ0FnSixhQUFBQSxFQUNBQyxhQUFBQSxFQUNBbkosV0FBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDIyLjA5LjIwMTYuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdSb3V0ZScsICd1aS5yb3V0ZXInLCAnbmdDb29raWVzJ10pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBmdW5jdGlvbiAoJHdpbmRvdykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2hvbWUnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYWluJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyb29tQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21haW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncm9vbXMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9yb29tcycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Jvb21zJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Jlc3RhdXJhbnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9yZXN0YXVyYW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncmVzdGF1cmFudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250YWN0Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY29udGFjdCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRhY3QnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnb2ZmZXInLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9vZmZlcicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnb2ZmZXJDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnb2ZmZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29uZmlybWF0aW9uJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY29uZmlybWF0aW9uJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N1Y2Nlc3NmdWxCb29raW5nJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VjY2Vzc2Z1bEJvb2tpbmcnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsU2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VjY2Vzc2Z1bFNpZ251cCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3NmdWxTaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FjY291bnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhY2NvdW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ25pbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NpZ25pbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ25pbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5ib29raW5ncycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2Jvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYm9va2luZ3MnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5kZXRhaWxzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2RldGFpbHMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5jaGFuZ2VQYXNzd29yZCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NoYW5nZVBhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2hhbmdlUGFzc3dvcmQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC5yb29tcycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC1yb29tcycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC1yb29tcydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQudXNlcnMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtdXNlcnMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtdXNlcnMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnZvdWNoZXJzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXZvdWNoZXJzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXZvdWNoZXJzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC1ib29raW5ncycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtYm9va2luZ3MnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvbWFuYWdtZW50LWJvb2tpbmdzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FkbWluLWJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hZG1pbi1ib29raW5nJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYWRtaW4tYm9va2luZydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9tYWluJylcclxuICAgIH0pXHJcbiAgICAucnVuKFsnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlUGFyYW1zID0gJHN0YXRlUGFyYW1zO1xyXG4gICAgfV0pO1xyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignYWNjQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuICAgICAgICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAodmlld0xvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2aWV3TG9jYXRpb24gPT09ICRsb2NhdGlvbi5wYXRoKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbihpc1ZhbGlkLCBmTmFtZSwgbE5hbWUsIG5FbWFpbCwgblBob25lKXtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3RGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogbkVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuUGhvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VVc2VyRGV0YWlscyhuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuY2FuY2VsQm9va2luZyhyb29tX2lkLCBib29raW5nX2lkKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckJvb2tpbmdzKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJCb29raW5ncyA9IG1zZztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGhvbmUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICh2YWxpZCxvbGRQLCBuZXdQKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKG9sZFAsIG5ld1ApLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLndyb25nUGFzc3dvcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBnZXRJbmZvKCk7XHJcbiAgICAgICAgZ2V0VXNlckJvb2tpbmdzKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2F1dGhDdHJsJywgZnVuY3Rpb24gKCRxLCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgJGxvY2F0aW9uLCAkcm91dGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJyc7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmKCRyb290U2NvcGUuaXNMb2dnZWRJbigpKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbmluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbm91dCgpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmluZm8gPSBtc2c7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbnVwKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbmluKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChtc2csIHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkd2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKCkgPT0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS8jL2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxTaWdudXAnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZGF0YS5jb2RlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTAwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1d5YnJhbnkgZW1haWwgamVzdCBqdcW8IHphcmVqZXN0cm93YW55LiBQcm9zesSZIHd5YnJhxIcgaW5ueS4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnVXBzcyBjb8WbIHBvc3rFgm8gbmllIHRhay4gUHJvc3rEmSBzcHLDs2Jvd2HEhyBww7PFum5pZWouJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ3N1Ym1pdEVycm9yJywgZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvck1lc3NhZ2UpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdjb25maXJtYXRpb25DdHJsJywgZnVuY3Rpb24gKCRxLCAkd2luZG93LCAkbG9jYXRpb24sICRzdGF0ZSwgJGNvb2tpZXMsICRzY29wZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlLCB2b3VjaGVyU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUuaXNTaWduZWRJbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAkc2NvcGUucm9vbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKS5kYXRlRnJvbTtcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVUbztcclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5leHRyYXM7XHJcbiAgICAgICAgJHNjb3BlLm51bU9mRGF5cyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdleHRyYXMnKSkubnVtT2ZEYXlzO1xyXG4gICAgICAgICRzY29wZS5wcmljZSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdwcmljZScpKTtcclxuXHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCA/ICRzY29wZS5pc1NpZ25lZEluID0gdHJ1ZSA6ICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlc2VydmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS50ZXJtcyAhPSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1ByemVkIHBvdHdpZXJkemVuaWVtIHJlemVyd2FjamkgbmFsZcW8eSB6YWFrY2VwdG93YcSHcmVndWxhbWluLicpO1xyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2UuYm9va1Jvb20oe2lkOiAkc2NvcGUucm9vbS5faWQsIGZyb206ICRzY29wZS5kYXRlRnJvbSwgdG86ICRzY29wZS5kYXRlVG8sIHByaWNlOiBjYWxjdWxhdGVUb3RhbFByaWNlKCksIGV4dHJhczogJHNjb3BlLmV4dHJhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLnVzZVZvdWNoZXIoJHJvb3RTY29wZS5kaXNjb3VudC5jb2RlKS50aGVuKGZ1bmN0aW9uICh2UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdWNjZXNzZnVsQm9va2luZycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICB0b3RhbCA9ICgkc2NvcGUucm9vbS5wcmljZSAqICRzY29wZS5udW1PZkRheXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGUucHJpY2UgKiAkc2NvcGUubnVtT2ZEYXlzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8genJvYmllbmllIHJlamVzdHJhY2ppKG1vxbxlIHByemVuaWVzaWVuaWUgbmEgc2lnbnVwIHZpZXc/IGRvIHJvendhxbxlbmlhKSBpIG9ic8WCdWdhIGLFgsSZZMOzdyhtb8W8ZSBqYWtvxZsgcG/FgsSFY3p5xIcgb2J5ZHdhIGxvZ293YW5pYSBpIHJlamVzdHJhY2plIHcgamVkbm8/KVxyXG4gICAgICAgIC8vVE9ETyBPYnNsdWdhIGJsZWRvdyByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgY3plZ29zIGRvIHdpZG9rdSByZXplcndhamNpXHJcbiAgICAgICAgLy9UT0RPIHBvdXPDs3dhxIcgamFraWXFmyBpbml0eSh3eXN0YWN6eSB3eW/FgmHEhyBmdW5rY2rEmSB3IGtvbnRyb2xlcnplIGx1YiBzcnYpXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgY2HFgmVqIG9ic8WCdWdpIGtvbnRhKHptaWFuYSBoYXPFgmEsIG51bWVydSB0ZWxlZm9udVtkb2RhbmllIGx1YiB6bWlhbmFdLCBwb2RnbMSFZHUgcmV6ZXJ3YWNqaSwgaXRwKSBvcmF6IG9ic8WCdWdpIGhvdGVsdShDUlVEIGRvZGF0a8OzdywgcG9rb2ppIGl0cCkuXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgbW/FvGUgamFracWbIHd5a3Jlc8OzdyBuYSB0ZW1hdCBvYmNpxIXFvGVuaWEgcG9rb2ppIGx1YiBqYWtpxZsgcHJ6eWNob2TDs3cgY3p5IGNvxZsgYWxibyBqYWllxZsgY2/FmyBkbyBnZW5lcm93YW5pZSBwZGYgeiByYXBvcnRlbVxyXG4gICAgICAgIC8vVE9ETyBwb3ptaWVuaWHEhyBzxYJvd2EgcmVzZXJ2YXRpb24gaXRwIG5hIGJvb2tpbmdcclxuICAgICAgICAvL1RPRE8gcG93aWFkb21pZW5pZSBvIGNpYXN0ZWN6a2FjaFxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIHBvZGdsxIVkdSBvYsWCb8W8ZW5pYSBob3RlbHUgamFrIHcga2luaSgzIHN0YW55OiB3b2xueSwgemFyZXplcndvd2FueSwgemFqZXR5KVxyXG4gICAgICAgIC8vVE9ETyB6YmFkYW5pZSBjenkgLnJ1biBzdGF0ZVByb3ZpZGVyYSBwb2N6ZWJuZVxyXG4gICAgICAgIC8vVE9ETyBwb3puYW5pZSBzdGF0ZVByb3ZpZGVyYSBpIGRvZGFuaWUgbmVzdGVkIHZpZXdzXHJcbiAgICAgICAgLy9UT0RPIG5hIGfFgsOzd25laiBzdHJvbmllIHpyb2JpxIfFvGVieSBkYXRhIGJ5xYLEhSBjb25ham1uaWVqIGplZGVuIGR6aWVuIHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gem1pYW5hIHJlZ2V4IG5hIHJvb3RTY29wZSBqZXNsaSBtb3psaXdlXHJcbiAgICAgICAgLy9UT0RvIGRhdGEgcmV6ZXJ3YWNqaSB0eWxrbyBvZCBkYXR5IGR6aXNpZWpzemVqIChiZXogcmV6ZXJ3YWNqaSB3IHByemVzesWCb8WbY2kpXHJcbiAgICAgICAgLy9UT0RPIGtvbnRvXHJcbiAgICAgICAgLy96bWlhbmEgZGFueWNoXHJcbiAgICAgICAgLy96bWlhbmEgaGFzxYJhXHJcbiAgICAgICAgLy96b2JhY3plbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL2FudWxvd2FuaWUgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgnY29tcGFyZVRvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6IFwibmdNb2RlbFwiLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgb3RoZXJNb2RlbFZhbHVlOiBcIj1jb21wYXJlVG9cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgbmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRvcnMuY29tcGFyZVRvID0gZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbFZhbHVlID09IHNjb3BlLm90aGVyTW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFwib3RoZXJNb2RlbFZhbHVlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KVxyXG4gICAgLmRpcmVjdGl2ZSgndm91Y2hlcmNoZWNrJywgZnVuY3Rpb24gKHZvdWNoZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0aW9uKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih2b3VjaGVyLmxlbmd0aCA9PSAyMyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZvdWNoZXIuY2hhckF0KDUpID09ICctJyAmJiB2b3VjaGVyLmNoYXJBdCgxMSkgJiYgdm91Y2hlci5jaGFyQXQoMTcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b3VjaGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbUN0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdvZmZlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCAkY29va2llcywgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3csIG9mZmVyU3ZjKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5vZmZlciA9IHt9O1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMgPSBbXTtcclxuICAgICAgICB2YXIgZGF0ZXMgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21OYW1lID0gJyc7XHJcblxyXG4gICAgICAgIHZhciBzaG93T2ZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vZmZlciA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZ2V0RXh0cmFzKCk7XHJcblxyXG4gICAgICAgICAgICBkYXRlcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZVRvKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAkc2NvcGUub2ZmZXIucm9vbS50eXBlO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbVByaWNlID0gJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGF0ZVByZWV0aWZ5ID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnK2RheSsnLScrbW9udGgrJy0nK3llYXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGV4dHJhcyA9IHtleHRyYXM6ICRzY29wZS5zZWxlY3RlZEV4dHJhcywgbnVtT2ZEYXlzOiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCl9O1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2V4dHJhcycsIEpTT04uc3RyaW5naWZ5KGV4dHJhcykpO1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ3ByaWNlJywgSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnRvdGFsUHJpY2UpKTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb25maXJtYXRpb24nKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b1ByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICd6bCcpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUub2ZmZXIucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSkgLSAkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkcm9vdFNjb3BlLmRpc2NvdW50ICE9IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLmRpc2NvdW50LnR5cGUgPT0gJyUnKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUub2ZmZXIucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9ICRzY29wZS50b3RhbFByaWNlIC0gKCRzY29wZS50b3RhbFByaWNlICogKCRyb290U2NvcGUuZGlzY291bnQuYW1vdW50IC8gMTAwKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlRGlmZk9mRGF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIE1TX1BFUl9EQVkgPSAxMDAwICogNjAgKiA2MCAqIDI0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlcy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZShkYXRlcy5kYXRlVG8pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21VVEMgPSBEYXRlLlVUQyhkYXRlRnJvbS5nZXRGdWxsWWVhcigpLCBkYXRlRnJvbS5nZXRNb250aCgpLCBkYXRlRnJvbS5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvVVRDID0gRGF0ZS5VVEMoZGF0ZVRvLmdldEZ1bGxZZWFyKCksIGRhdGVUby5nZXRNb250aCgpLCBkYXRlVG8uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGRhdGVUb1VUQyAtIGRhdGVGcm9tVVRDKSAvIE1TX1BFUl9EQVkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJHdhdGNoKCdkaXNjb3VudCcsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzaG93T2ZmZXIoKTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigncm9vbUN0cmwnLCBmdW5jdGlvbiAoJHEsICRjb29raWVzLCAkc2NvcGUsICRyb290U2NvcGUsICR3aW5kb3csICRsb2NhdGlvbiwgcm9vbVNlcnZpY2UsIHZvdWNoZXJTZXJ2aWNlLCBvZmZlclN2YywkZmlsdGVyLCAkc3RhdGUpIHtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1zZyA9Jyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21zID0gW107XHJcbiAgICAgICAgJHNjb3BlLm51bWJlck9mQmVkcyA9IDE7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWNjZXNzZnVsQ2FuY2VsID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAwO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdE9yQWRkVXNlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlRnJvbSA9IGRhdGU7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5maW5kUm9vbXMgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIG9nYXJuYWMgc2llIHogdHltIGJlZHMsIHd5c3p1a2l3YWMgcG9rb2plIG8gcG9kYW5laiBpbG9zY2kgb3NvYiBpIG5hendhYyB0byBqYWtvcyB3IGJhemllIG9zdGF0ZWN6bmllXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpID49ICRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpID49ICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKCRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXRNb250aCgkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbXMoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogJHNjb3BlLmRhdGVGcm9tLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB0bzogJHNjb3BlLmRhdGVUby50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgYmVkczogJHNjb3BlLm51bWJlck9mQmVkc1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyb29tc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJvb21zRGF0YS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yb29tcyA9IHJvb21zRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSAnQ2/FmyBwb3N6xYJvIG5pZSB0YWsuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncm9vbScsIEpTT04uc3RyaW5naWZ5KHtyb29tOiB7aWQ6IHJvb20uX2lkLCB0eXBlOiByb29tLnR5cGUsIHByaWNlOiByb29tLnByaWNlfX0pKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdkYXRlcycsIEpTT04uc3RyaW5naWZ5KHtkYXRlRnJvbTogJHNjb3BlLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5kYXRlVG99KSk7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmNob29zZVJvb20ocm9vbSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldEFsbFJvb21zKCkudGhlbihmdW5jdGlvbiAocm9vbXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hbGxSb29tcyA9IHJvb21zO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocm9vbXMpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETyBvYnPFgnVnYSBlcnJvcmFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZGF0ZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpID49ICRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpID49ICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKCRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXRNb250aCgkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vVE9EbyBwbyB6bWlhbmllIGRhdHkgem1pZW5pYyBjbGFzc2Uoa29tcGxldG55IHJld29yaz8gOigpXHJcbiAgICAgICAgJHNjb3BlLmdldEF2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uIChyZXNlcnZhdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZXNlcnZhdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS50byk7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vdEF2YWlsYWJsZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJ2F2YWlsYWJsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubWFuYWdtZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmdzID0gZnVuY3Rpb24gKHJvb20pIHtcclxuXHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnc2VsZWN0ZWRSb29tJywgSlNPTi5zdHJpbmdpZnkoe19pZDogcm9vbS5faWQsIHR5cGU6IHJvb20udHlwZSwgbnVtYmVyOiByb29tLm51bWJlciwgYmVkczogcm9vbS5iZWRzLCBwcmljZTogcm9vbS5wcmljZX0pKTtcclxuICAgICAgICAgICAgJCgnI3JlZ3VsYW1pbicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWFuYWdtZW50LWJvb2tpbmdzJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldFNlbGVjdGVkUm9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUm9vbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdzZWxlY3RlZFJvb20nKSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21Cb29raW5ncygkc2NvcGUuc2VsZWN0ZWRSb29tLl9pZCkudGhlbihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmdzID0gYi5yZXNlcnZhdGlvbnM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2VySW5mbyh1c2VyKS50aGVuKGZ1bmN0aW9uICh1KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyID0gdTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmcgPSBmdW5jdGlvbiAocm9vbSwgZGF0ZUZyb20sIGRhdGVUbykge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2Jvb2tpbmcnLCBKU09OLnN0cmluZ2lmeSh7cm9vbToge19pZDogcm9vbS5faWQsIHR5cGU6IHJvb20udHlwZSwgbnVtYmVyOiByb29tLm51bWJlciwgYmVkczogcm9vbS5iZWRzLCBwcmljZTogcm9vbS5wcmljZX0sIGRhdGVGcm9tOiBkYXRlRnJvbSwgZGF0ZVRvOiBkYXRlVG99KSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FkbWluLWJvb2tpbmcnKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdEJvb2tpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ib29raW5nID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2Jvb2tpbmcnKSk7XHJcbiAgICAgICAgICAgIC8vJHNjb3BlLnRlc3QuZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUuYm9va2luZy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIC8vJHNjb3BlLnRlc3QuZGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZVRvKTtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICAgICAgZ2V0RXh0cmFzKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFVzZXJzRW1haWxzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlcnMpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8gcHJ6ZW5pZXNpZW5pZSBwZXdueWNoIGZ1bmtjam9uYWxub3NjaSBkbyB1c2VyQ3RybFxyXG5cclxuICAgICAgICAkc2NvcGUuc3VibWl0Qm9va0Zvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLnNlbGVjdE9yQWRkVXNlcil7XHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuYm9va2luZ1VzZXIuZW1haWwgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IFwiXCIrJHNjb3BlLmJvb2tpbmdVc2VyLmZpcnN0TmFtZSskc2NvcGUuYm9va2luZ1VzZXIubGFzdE5hbWUrJHNjb3BlLmJvb2tpbmdVc2VyLnBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS5ib29raW5nVXNlci5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUuYm9va2luZ1VzZXIubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiAkc2NvcGUuYm9va2luZ1VzZXIucGhvbmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6ICRzY29wZS5ib29raW5nVXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuYm9va2luZ1VzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLmJvb2tpbmdVc2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLmJvb2tpbmdVc2VyLnBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5zaWdudXBBbmRCb29rKHVzZXIsICRzY29wZS5ib29raW5nLnJvb20uX2lkLCB7ZGF0ZUZyb206ICRzY29wZS5ib29raW5nLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5ib29raW5nLmRhdGVUb30sICRzY29wZS50b3RhbFByaWNlLCAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLnVzZVZvdWNoZXIoJHJvb3RTY29wZS5kaXNjb3VudC5jb2RlKS50aGVuKGZ1bmN0aW9uICh2UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVzZXIgPSBKU09OLnBhcnNlKCRzY29wZS5zZWxlY3RlZFVzZXJCb29raW5nKTtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmFkbWluQm9vaygkc2NvcGUuYm9va2luZy5yb29tLl9pZCwgdXNlci5lbWFpbCAse2RhdGVGcm9tOiAkc2NvcGUuYm9va2luZy5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUuYm9va2luZy5kYXRlVG99LCAkc2NvcGUudG90YWxQcmljZSwgJHNjb3BlLnNlbGVjdGVkRXh0cmFzKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRyb290U2NvcGUuZGlzY291bnQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm91Y2hlclNlcnZpY2UudXNlVm91Y2hlcigkcm9vdFNjb3BlLmRpc2NvdW50LmNvZGUpLnRoZW4oZnVuY3Rpb24gKHZSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVEaWZmT2ZEYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgTVNfUEVSX0RBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVVUQyA9IERhdGUuVVRDKGRhdGVGcm9tLmdldEZ1bGxZZWFyKCksIGRhdGVGcm9tLmdldE1vbnRoKCksIGRhdGVGcm9tLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG9VVEMgPSBEYXRlLlVUQyhkYXRlVG8uZ2V0RnVsbFllYXIoKSwgZGF0ZVRvLmdldE1vbnRoKCksIGRhdGVUby5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZGF0ZVRvVVRDIC0gZGF0ZUZyb21VVEMpIC8gTVNfUEVSX0RBWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5ib29raW5nKXtcclxuICAgICAgICAgICAgICAgIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnemwnKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9ICgoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLmJvb2tpbmcucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSkgLSAkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkcm9vdFNjb3BlLmRpc2NvdW50ICE9IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLmRpc2NvdW50LnR5cGUgPT0gJyUnKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gJHNjb3BlLnRvdGFsUHJpY2UgLSAoJHNjb3BlLnRvdGFsUHJpY2UgKiAoJHJvb3RTY29wZS5kaXNjb3VudC5hbW91bnQgLyAxMDApKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmdldEV4dHJhcygpLnRoZW4oZnVuY3Rpb24gKGV4dHJhc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBleHRyYXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCAkc2NvcGUuZXh0cmFzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRleHQgPSAnRG9kYWogKyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25Ub2dnbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUucGFpZENsYXNzID0gZnVuY3Rpb24gKHBhaWQpIHtcclxuICAgICAgICAgICAgaWYocGFpZClcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYnRuLXN1Y2Nlc3MnO1xyXG4gICAgICAgICAgICByZXR1cm4gJ2J0bi13YXJuaW5nJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnBheSA9IGZ1bmN0aW9uIChib29raW5nKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLnBheShib29raW5nLl9pZCwgIWJvb2tpbmcucGFpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBib29raW5nLnBhaWQgPSAhYm9va2luZy5wYWlkO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHJvb3RTY29wZS4kd2F0Y2goJ2Rpc2NvdW50JyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMDEuMjAxNy5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3VzZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UsIHVzZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gdXNlcnM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24oaXNWYWxpZCl7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0RldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLnNlbGVjdGVkVXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogJHNjb3BlLnNlbGVjdGVkVXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogJHNjb3BlLnNlbGVjdGVkVXNlci5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLnJvbGVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB1c2VyU2VydmljZS5jaGFuZ2VVc2VyRGV0YWlscyhuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjEyLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuLmNvbnRyb2xsZXIoJ3ZvdWNoZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgdm91Y2hlclNlcnZpY2UpIHtcclxuXHJcbiAgICAvL0lsZSwgY3p5IHdpZWxva3JvdG5lZ28gdXp5dGt1LCBkYXRhIHd5Z2HFm25pxJljaWFcclxuICAgICRzY29wZS5nZW5lcmF0ZVZvdWNoZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS52b3VjaGVycyA9IHtcclxuICAgICAgICAgICAgY29kZXM6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XHJcbiAgICAgICAgdmFyIGV4cGlyeURhdGUgPSAkc2NvcGUudm91Y2hlckV4cGlyeURhdGU7XHJcbiAgICAgICAgaWYoZXhwaXJ5RGF0ZSA8IG5ldyBEYXRlKCkpe1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlckVycm9yID0gJ0RhdGEgd3lnYcWbbmnEmWNpYSBuaWUgbW/FvGUgYnnEhyB6IHByemVzesWCb8WbY2knOy8vVE9ETyBwb3ByYXdpxIcga29tdW5pa2F0XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc0dlbmVyYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2VuZXJhdGVkVm91Y2hlcnMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHdoaWxlKCRzY29wZS52b3VjaGVycy5jb2Rlcy5sZW5ndGggPCAkc2NvcGUubnVtYmVyT2ZWb3VjaGVycyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdm91Y2hlciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpICE9IDMgKXZvdWNoZXIgKz0gJy0nO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5jb2Rlcy5wdXNoKHZvdWNoZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1RPRE8gZGFsc3phIHByYWNhIG5hZCB2b3VjaGVyYW1pLCBwb215xZtsZcSHIGphayB0byBwcnplY2hvd3l3YcSHIHcgYmF6aWUgY3p5IGpha28gdGVrc3QgbnAuIDIwJSBjenkgb2RkemllbG5pZSBudW1iZXI6IDIwLCBkaXNjb3VudFR5cGU6ICclXCJcclxuICAgICAgICAgICAgdmFyIGxhc3QgPSAkc2NvcGUuZGlzY291bnQuY2hhckF0KCRzY29wZS5kaXNjb3VudC5sZW5ndGgtMSk7XHJcbiAgICAgICAgICAgIGlmKGxhc3QgPT09ICclJylcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudFR5cGUgPSAnJSc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYobGFzdCA9PT0gJ8WCJyAmJiAkc2NvcGUuZGlzY291bnQuY2hhckF0KCRzY29wZS5kaXNjb3VudC5sZW5ndGgtMikgPT09ICd6JylcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudFR5cGUgPSAnemwnO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50ID0gY29udmVydFRvTnVtYmVyKCRzY29wZS5kaXNjb3VudCk7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5leHBpcnlEYXRlID0gZXhwaXJ5RGF0ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmdlbmVyYXRlZFZvdWNoZXJzID0gJHNjb3BlLnZvdWNoZXJzLmNvZGVzO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNHZW5lcmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNTYXZlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5zYXZlVm91Y2hlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdm91Y2hlclNlcnZpY2Uuc2F2ZVZvdWNoZXJzKCRzY29wZS52b3VjaGVycykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS52b3VjaGVyc1NhdmVkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy9UT0RPIG9kamVjaWUga3dvdHkgaSBzcHJhd2R6ZW5pZSB2YXpub3NjaSh3eXN3aWV0bGVuaWUgb2Rwb3dpZWRuaWVnbyBlcnJvcmEpLCBuYSBrb25pZWMgcHJ6eSByZXplcndhY2ppIHV3emdsZWRuaWMgdm91Y2hlclxyXG4gICAgJHNjb3BlLmNoZWNrVm91Y2hlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdm91Y2hlclNlcnZpY2UuY2hlY2tWb3VjaGVyKCRzY29wZS52b3VjaGVyLnRvU3RyaW5nKCkpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSAnS29kIHBvcHJhd255IHpuacW8a2EgJytyZXN1bHQuZGlzY291bnQrcmVzdWx0LmRpc2NvdW50VHlwZTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZGlzY291bnQgPSB7YW1vdW50OiByZXN1bHQuZGlzY291bnQsIHR5cGU6IHJlc3VsdC5kaXNjb3VudFR5cGUsIGNvZGU6ICRzY29wZS52b3VjaGVyfTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmRpc2NvdW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuY29kZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoISRzY29wZS5ib29raW5nRnJtLiR2YWxpZCl7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyTm90Rm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuZGlzY291bnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpc051bWVyaWMobikge1xyXG4gICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydFRvTnVtYmVyKG4pIHtcclxuICAgICAgICB2YXIgZGlzY291bnQgPSAnJztcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKGlzTnVtZXJpYyhuLmNoYXJBdChpKSkpe1xyXG4gICAgICAgICAgICAgICAgZGlzY291bnQgKz0gbi5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudCA9IE51bWJlcihkaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlzY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzY291bnQgPSBOdW1iZXIoZGlzY291bnQpO1xyXG4gICAgICAgIHJldHVybiBkaXNjb3VudDtcclxuICAgIH1cclxufSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA3LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3VuaXF1ZUNhdGVnb3JpZXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb29tcywgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNBcnJheShyb29tcykpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb29tcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHJvb21zW2ldW3Byb3BlcnR5TmFtZV1cclxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGtleXNbdmFsXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzW3ZhbF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyb29tc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb29tcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnQXV0aFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciBMT0NBTF9UT0tFTiA9ICd0b2tlbic7XHJcbiAgICAgICAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgVXNlciBpbmZvLi4uJyk7Ly9EbyB1c3VuacSZY2lhXHJcbiAgICAgICAgICAgIGlmKHRva2VuKXtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvKHRva2VuKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0b3JlVXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1RPS0VOLCB0b2tlbik7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvKHRva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVzZXJJbmZvKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGF1dGhUb2tlbiA9IHRva2VuO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYXV0aFRva2VuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNpZ25pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2F1dGhlbnRpY2F0ZScsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdC5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2csIHJlc3VsdC5kYXRhLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2csIHJlc3VsdC5kYXRhLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHZhciBzaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZXN0cm95VXNlckluZm8oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2lnbnVwID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2lnbnVwJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXN0ZW0gdyByZXNvbHZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcmluZm8nKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7Zmlyc3ROYW1lOiByZXN1bHQuZGF0YS5maXJzdE5hbWUsIGxhc3ROYW1lOiByZXN1bHQuZGF0YS5sYXN0TmFtZSwgZW1haWw6IHJlc3VsdC5kYXRhLmVtYWlsLCBwaG9uZTogcmVzdWx0LmRhdGEucGhvbmUsIHJvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIHBvcHJhd2nEhyByYXplbSB6IGFwaSDFvGVieSBkYXdhxYJvIHN1Y2Nlc3NcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRVc2VyQm9va2luZ3MnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBjaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uIChuZXdEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NoYW5nZVVzZXJEZXRhaWxzJywgbmV3RGV0YWlscykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldE5ld1Rva2VuJywge2VtYWlsOiBuZXdEZXRhaWxzLmVtYWlsfSkudGhlbihmdW5jdGlvbiAocmVzdWx0Mikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Mi5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQyIHN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdDIuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBub3dlZ28gdG9rZW5hJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3N1Y2Nlc3M6IHRydWUsIG1zZzogXCJQb215xZtsbmllIHptaWVuaW9ubyBkYW5lXCJ9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7c3VjY2VzczogZmFsc2UsIG1zZzogXCJjb8WbIHBvc3rFgm8gbmllIHRha1wifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAob2xkUGFzcywgbmV3UGFzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGFuZ2UtcGFzc3dvcmQnLCB7b2xkUGFzczogb2xkUGFzcywgbmV3UGFzczogbmV3UGFzc30pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe21zZzogJ3BvbXnFm2xuaWUgem1pZW5pb25vIGhhc2xvJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7bXNnOiByZXN1bHQuZGF0YS5lcnJvcn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlclJvbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcmluZm8nKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7cm9sZTogcmVzdWx0LmRhdGEucm9sZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBzaWduaW46IHNpZ25pbixcclxuICAgICAgICAgICAgc2lnbm91dDogc2lnbm91dCxcclxuICAgICAgICAgICAgc2lnbnVwOiBzaWdudXAsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiBnZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgZ2V0VXNlckJvb2tpbmdzOiBnZXRVc2VyQm9va2luZ3MsXHJcbiAgICAgICAgICAgIGNoYW5nZVVzZXJEZXRhaWxzOiBjaGFuZ2VVc2VyRGV0YWlscyxcclxuICAgICAgICAgICAgY2hhbmdlUGFzc3dvcmQ6IGNoYW5nZVBhc3N3b3JkLFxyXG4gICAgICAgICAgICBnZXRVc2VyUm9sZTogZ2V0VXNlclJvbGUsXHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkXHJcbiAgICAgICAgfVxyXG4gICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwOC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnb2ZmZXJTdmMnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcbiAgICAgICAgdmFyIGNob3NlblJvb20gPSB7fTtcclxuICAgICAgICB2YXIgZXh0cmFzID0gW107XHJcblxyXG4gICAgICAgIHZhciBjaG9vc2VSb29tID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgY2hvb3NlblJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hvb3NlblJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRFeHRyYXMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5leHRyYXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgY2hvb3NlUm9vbTogY2hvb3NlUm9vbSxcclxuICAgICAgICAgICAgZ2V0Um9vbTogZ2V0Um9vbSxcclxuICAgICAgICAgICAgZ2V0RXh0cmFzOiBnZXRFeHRyYXMsXHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgncm9vbVNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxlY3RlZFJvb20gPSBudWxsO1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbXMgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9maW5kUm9vbXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvYnJhbm8gcG9rb2plJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEucm9vbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYm9va1Jvb20gPSBmdW5jdGlvbiAoZGF0YSkgey8vVE9ETyB6amHEhcSHIHNpxJlcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcmVzZXJ2ZScsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2pldGVtIHByemVkIHBvc3QgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NhbmNlbEJvb2tpbmcnLHtyb29tX2lkOiByb29tX2lkLCBib29raW5nX2lkOiBib29raW5nX2lkfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlIGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlamVjdCBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFJvb21zJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tQm9va2luZ3MgPSBmdW5jdGlvbiAocm9vbV9pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXRSb29tQm9va2luZ3MnLCB7cm9vbV9pZDogcm9vbV9pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YVswXS5yZXNlcnZhdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhWzBdKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXRVc2VySW5mbycsIHtlbWFpbDogdXNlcn0pLnRoZW4oZnVuY3Rpb24gKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXVzZXJJbmZvLmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodXNlckluZm8uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QodXNlckluZm8uZGF0YSlcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHVzZXJJbmZvLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2lnbnVwQW5kQm9vayA9IGZ1bmN0aW9uICh1c2VyLCBpZCwgZGF0ZXMsIHByaWNlLCBleHRyYXMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXh0cmFzKTtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2lnbnVwQW5kQm9vaycsIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlcjogdXNlci5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogZGF0ZXMuZGF0ZUZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGRhdGVzLmRhdGVUbyxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFzOiBleHRyYXNcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdPSycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWRtaW5Cb29rID0gZnVuY3Rpb24gKGlkLCBlbWFpbCwgZGF0ZXMsIHByaWNlLCBleHRyYXMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ3aXM6IHJvb21TdmMsIGZ1bmtjamE6IGFkbWluQm9vayB8IGlkOlwiK2lkK1wiLCBlbWFpbDogXCIrZW1haWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9hZG1pbkJvb2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBkYXRlcy5kYXRlRnJvbSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogZGF0ZXMuZGF0ZVRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYXM6IGV4dHJhc1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgnT0snKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1d5c3TEhXBpxYIgYsWCxIVkIHBvZGN6YXMgcmV6ZXJ3YWNqaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1d5c3TEhXBpxYIgYsWCxIVkIHBvZGN6YXMgcmV6ZXJ3YWNqaScpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlcnNFbWFpbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0VXNlcnNFbWFpbHMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzID0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ05pZSB6bmFsZXppb25vIHXFvHl0a293bmlrw7N3JylcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdOaWUgem5hbGV6aW9ubyB1xbx5dGtvd25pa8OzdycpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwYXkgPSBmdW5jdGlvbiAocmVzZXJ2YXRpb25faWQsIHBheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9wYWlkJywge2lkOiByZXNlcnZhdGlvbl9pZCwgcGF5OiBwYXl9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldFJvb21zOiBnZXRSb29tcyxcclxuICAgICAgICAgICAgZ2V0QWxsUm9vbXM6IGdldEFsbFJvb21zLFxyXG4gICAgICAgICAgICBib29rUm9vbTogYm9va1Jvb20sXHJcbiAgICAgICAgICAgIGNhbmNlbEJvb2tpbmc6IGNhbmNlbEJvb2tpbmcsXHJcbiAgICAgICAgICAgIGdldFJvb21Cb29raW5nczogZ2V0Um9vbUJvb2tpbmdzLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIHNpZ251cEFuZEJvb2s6IHNpZ251cEFuZEJvb2ssXHJcbiAgICAgICAgICAgIGFkbWluQm9vazogYWRtaW5Cb29rLFxyXG4gICAgICAgICAgICBnZXRVc2Vyc0VtYWlsczogZ2V0VXNlcnNFbWFpbHMsXHJcbiAgICAgICAgICAgIHBheTogcGF5XHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA2LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCd1c2VyU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuXHJcbiAgICAgICAgdmFyIGdldEFsbFVzZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldEFsbFVzZXJzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvci5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24gKG5ld0RldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYWRtaW5DaGFuZ2VVc2VyRGV0YWlscycsIG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtzdWNjZXNzOiB0cnVlLCBtc2c6IFwiUG9tecWbbG5pZSB6bWllbmlvbm8gZGFuZVwifSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe3N1Y2Nlc3M6IGZhbHNlLCBtc2c6IFwiY2/FmyBwb3N6xYJvIG5pZSB0YWtcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzLFxyXG4gICAgICAgICAgICBjaGFuZ2VVc2VyRGV0YWlsczogY2hhbmdlVXNlckRldGFpbHNcclxuICAgICAgICB9XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTIuMTIuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3ZvdWNoZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzYXZlVm91Y2hlcnMgPSBmdW5jdGlvbiAodm91Y2hlcnMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codm91Y2hlcnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zYXZlVm91Y2hlcnMnLCB2b3VjaGVycykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGVja1ZvdWNoZXIgPSBmdW5jdGlvbiAodm91Y2hlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGVja1ZvdWNoZXInLCB7dm91Y2hlckNvZGU6IHZvdWNoZXJ9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmIChuZXcgRGF0ZShyZXN1bHQuZGF0YS52b3VjaGVyLmV4cGlyeURhdGUpIDwgbmV3IERhdGUoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1Rlcm1pbiBtaW7EhScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgcmVzdWx0LmRhdGEudm91Y2hlci51c2VkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdLb2Qgem9zdGHFgiBqdcW8IHd5a2/FvHlzdGFueScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgIXJlc3VsdC5kYXRhLnZvdWNoZXIudXNlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEudm91Y2hlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdXNlVm91Y2hlciA9IGZ1bmN0aW9uICh2b3VjaGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZVZvdWNoZXInLCB7Y29kZTogdm91Y2hlcn0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ0tsdWN6IHd5a29yenlzdGFueS4nKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2F2ZVZvdWNoZXJzOiBzYXZlVm91Y2hlcnMsXHJcbiAgICAgICAgICAgIGNoZWNrVm91Y2hlcjogY2hlY2tWb3VjaGVyLFxyXG4gICAgICAgICAgICB1c2VWb3VjaGVyOiB1c2VWb3VjaGVyXHJcbiAgICAgICAgfVxyXG4gICAgfSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
