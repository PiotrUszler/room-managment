var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.token&&(o.headers.Authorization=e.localStorage.token),o}}}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("test",{url:"/test",templateUrl:"test"}),o.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,o,t){e.$state=o,e.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,o,t,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,s){if(e){var i={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(i).then(function(e){o.reload()})}},e.cancelBooking=function(e,t){console.log("room id to:"+e+", booking_id to:"+t),n.cancelBooking(e,t).then(function(e){console.log("udało się anulować"),o.reload()})};var a=function(){t.getUserBookings().then(function(o){console.log(o),e.userBookings=o})},r=function(){t.getUserInfo().then(function(o){console.log(o),e.firstName=o.firstName,e.lastName=o.lastName,e.email=o.email,e.phone=o.phone})};e.changePassword=function(o,n,a){o&&t.changePassword(n,a).then(function(o){console.log(o.msg),e.successfulPasswordChange=!0},function(o){e.wrongPassword=!0})},e.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,o,t,n,a,r,s,i){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.submitError=!1,o.errorMessage="",s.isLoggedIn=function(){return i.isAuthenticated},s.isLoggedIn()&&i.getUserRole().then(function(e){s.role=e.role}),o.signin=function(){console.log("login"),i.signin(o.user).then(function(e,o){s.isLogedIn=!0,i.getUserRole().then(function(e){s.role=e.role}),n.location.reload(),console.log(e)})},o.signout=function(){i.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},o.getUserInfo=function(){i.getUserInfo().then(function(e){console.log(e),o.userinfo=e})},o.submitForm=function(e){e?i.signup(o.user).then(function(e){console.log("Pomyślnie zarejestrowano"),o.submitError=!1,i.signin(o.user).then(function(e,o){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:o.submitError=!0,o.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},o.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService",function(e,o,t,n,a,r,s,i,c){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays;var u=function(){i.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:l(),extras:r.extras}).then(function(){n.go("successfulBooking")},function(e){})},r.toPrevious=function(){n.go("offer")};var l=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(o){e+=o.price*r.numOfDays}),e};u()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,n){n.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,o,t,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$cookies","$state","$location","$window","offerSvc",function(e,o,t,n,a,r){e.offer={},e.extras=[],e.selectedExtras=[];var s={};e.dateFrom="",e.dateTo="",e.roomName="";var i=function(){e.offer=JSON.parse(o.get("room")),e.extras=u(),s=JSON.parse(o.get("dates")),e.dateFrom=c(new Date(s.dateFrom)),e.dateTo=c(new Date(s.dateTo)),e.roomName=e.offer.type,e.roomPrice=e.offer.price*l(),e.extrasTotalPrice=0},c=function(e){var o=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+o+"-"+t+"-"+n};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*l()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*l())},e.toConfirmation=function(){console.log("asdasd");var n={extras:e.selectedExtras,numOfDays:l()};o.put("extras",JSON.stringify(n)),t.go("confirmation")},e.toPrevious=function(){t.go("home")};var u=function(){r.getExtras().then(function(o){e.extras=o;for(var t=0;t<e.extras.length;t++)e.extras[t].buttonText="Dodaj +",e.extras[t].buttonToggle=!1})},l=function(){var e=864e5,o=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/e)};i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$rootScope","$window","$location","roomService","offerSvc","$filter","$state",function(e,o,t,n,a,r,s,i,c,u){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.totalPrice=0,t.extras=[],t.selectedExtras=[],t.extrasTotalPrice=0,t.selectOrAddUser=void 0,t.select=function(e){t.selectedRoom=e};var l=function(){var e=new Date;console.log(e),t.dateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.dateTo=o};t.init=function(){l(),t.findRooms()},t.findRooms=function(){if(t.dateTo.getMonth()<=t.dateFrom.getMonth()&&t.dateTo.getDate()<=t.dateFrom.getDate()){var e=t.dateFrom;e.setDate(e.getDate()+1),t.dateTo=e}s.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(e){e.length>0?(t.rooms=e,t.noRoomsError=!1):t.noRoomsError=!0},function(e){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(e){o.put("room",JSON.stringify(e)),o.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),i.chooseRoom(e),u.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()},t.getAllRooms=function(){s.getAllRooms().then(function(e){t.allRooms=e,console.log(e)},function(e){})},t.getAvailability=function(e){for(var o=(new Date,new Date(t.roomDateFrom)),n=new Date(t.roomDateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),s=new Date(e[a].to);if(o<s&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){var e=new Date;t.roomDateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.roomDateTo=o,t.getAllRooms()},t.toBookings=function(e){o.put("selectedRoom",JSON.stringify(e)),$("#regulamin").modal("hide"),setTimeout(function(){u.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(o.get("selectedRoom"))},t.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},t.cancelBooking=function(e,o){console.log("room id to:"+e+", booking_id to:"+o),s.cancelBooking(e,o).then(function(e){console.log("udało się anulować"),u.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),s.getRoomBookings(t.selectedRoom._id).then(function(e){t.bookings=e.reservations})},t.selectUser=function(e){s.getUserInfo(e).then(function(e){t.selectedUser=e,console.log(t.selectedUser)})},t.toBooking=function(e,t,n){o.put("booking",JSON.stringify({room:e,dateFrom:t,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){u.go("test")},500)},t.initBooking=function(){t.booking=JSON.parse(o.get("booking")),t.test.dateFrom=new Date(t.booking.dateFrom),t.test.dateTo=new Date(t.booking.dateTo),t.calculateTotalPrice(),g(),s.getUsers().then(function(e){t.users=JSON.parse(JSON.stringify(e))})},t.submitBookForm=function(){var e=null;if(t.selectOrAddUser){if(void 0==t.test.email)var e={email:""+t.test.firstName+t.test.lastName+t.test.phone,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};else var e={email:t.test.email,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};s.signupAndBook(e,t.booking.room._id,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})}else e=JSON.parse(t.selectedUserBooking),console.log("RoomCtrl, funkcja submitBookForm, dataOd: "+t.test.dateFrom),s.adminBook(t.booking.room._id,e.email,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})};var d=function(){var e=864e5,o=new Date(t.test.dateFrom),n=new Date(t.test.dateTo),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};t.calculateTotalPrice=function(){void 0!=n.discount&&"zl"==n.discount.type?t.totalPrice=d()*t.booking.room.price+t.extrasTotalPrice-n.discount.amount:void 0!=n.discount&&"%"==n.discount.type?(t.totalPrice=d()*t.booking.room.price+t.extrasTotalPrice,t.totalPrice=t.totalPrice-t.totalPrice*(n.discount.amount/100)):t.totalPrice=d()*t.booking.room.price+t.extrasTotalPrice};var g=function(){i.getExtras().then(function(e){t.extras=e;for(var o=0;o<t.extras.length;o++)t.extras[o].buttonText="Dodaj +",t.extras[o].buttonToggle=!1})};t.addOrRemoveExtra=function(e){var o=t.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t.totalPrice=0,o==-1?(t.selectedExtras.push(e),t.extrasTotalPrice+=e.price*d()):(t.selectedExtras.splice(o,1),t.extrasTotalPrice-=e.price*d()),t.calculateTotalPrice()},t.paidClass=function(e){return e?"btn-success":"btn-warning"},t.pay=function(e){s.pay(e._id,!e.paid).then(function(o){console.log(o),e.paid=!e.paid})},n.$watch("discount",function(){t.calculateTotalPrice()})}]),angular.module("app").controller("voucherCtrl",["$scope","$rootScope","voucherService",function(e,o,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var o="",t=0;t<e.length;t++){if(!n(e.charAt(t)))return o=Number(o);o+=e.charAt(t)}return o=Number(o)}e.generateVouchers=function(){e.vouchers={codes:[]};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.voucherExpiryDate;if(t<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var n="",r=0;r<4;r++){for(var s=0;s<5;s++)n+=o.charAt(Math.floor(Math.random()*o.length));3!=r&&(n+="-")}e.vouchers.codes.push(n)}var i=e.discount.charAt(e.discount.length-1);"%"===i?e.vouchers.discountType="%":"ł"===i&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=a(e.discount),e.vouchers.type=e.voucherType,e.vouchers.expiryDate=t,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){console.log(e.vouchers),t.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){console.log(e.voucher),t.checkVoucher(e.voucher.toString()).then(function(t){console.log(t),e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+t.discount+t.discountType,o.discount={amount:t.discount,type:t.discountType},console.log(t.discount)},function(t){console.log(t),o.discount=void 0,e.voucherNotFound=t,e.voucherFound=void 0})},e.codeChanged=function(){e.bookingFrm.$valid||(e.voucherFound=void 0,e.voucherNotFound=void 0,o.discount=void 0)}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,o){if(angular.isArray(e)){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a][o];angular.isUndefined(n[r])&&(n[r]=!0,t.push(e[a]))}return t}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,o,t){function n(){var e=window.localStorage.getItem(c);console.log("loading User info..."),e&&s(e)}function a(){i=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(e){window.localStorage.setItem(c,e),s(e)}function s(o){u=!0,i=o,e.defaults.headers.common.Authorization=i}var i,c="token",u=!1,l=function(t){return o(function(o,n){e.post("/api/authenticate",t).then(function(e){e.data.success?(r(e.data.token),o(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},g=function(t){return o(function(o,n){e.post("/api/signup",t).then(function(e){e.data.success?(console.log("jestem w resolve"),o(e.data.msg)):n(e.data.msg)})})};n();var m=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):t(e.data.msg)})})},f=function(){return o(function(o,t){e.get("/api/getUserBookings").then(function(e){o(e.data)})})},p=function(t){return o(function(o,a){e.post("/api/test",t).then(function(s){s.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:t.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),o({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return o(function(o,a){e.post("/api/change-password",{oldPass:t,newPass:n}).then(function(e){e.data.success?o({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({role:e.data.role}):t(e.data.msg)})})};return{signin:l,signout:d,signup:g,getUserInfo:m,getUserBookings:f,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,o){var t=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,t){o.get("/api/getExtras").then(function(o){o.data.success?e(o.data.extras):t(o.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,o){var t=function(t){return e(function(e,n){o.post("/api/findRooms",t).then(function(o){o.data.success?(console.log("Pobrano pokoje"),e(o.data.rooms)):n(o.data.error)})})},n=function(t){return e(function(e,n){o.post("/api/reserve",t).then(function(o){o.data.success?e(o.data.success):n(o.data.error)})})},a=function(t,n){return e(function(e,a){console.log("jetem przed post cancel"),o.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(o){o.data.success?(console.log("resolve cancel"),e(o.data.success)):(console.log("reject cancel"),a(o.data.error))})})},r=function(){return e(function(e,t){o.get("/api/getRooms").then(function(o){o.data.success?e(o.data.result):t(o.data.error)})})},s=function(t){return e(function(e,n){o.post("/api/getRoomBookings",{room_id:t}).then(function(o){console.log(o.data[0].reservations),e(o.data[0])},function(e){n(e.data)})})},i=function(t){return e(function(e,n){o.post("/api/getUserInfo",{email:t}).then(function(o){o.data.error?n(o.data):e(o.data)},function(e){n(e.data)})})},c=function(t,n,a,r,s){return console.log(s),e(function(e,i){o.post("/api/signupAndBook",{firstName:t.firstName,lastName:t.lastName,email:t.email,number:t.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(e){console.log(e)},function(e){console.log("nie udało się")})})},u=function(t,n,a,r,s){return console.log("Serwis: roomSvc, funkcja: adminBook | id:"+t+", email: "+n),e(function(e,i){o.post("/api/adminBook",{id:t,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(o){o.data.success?e("OK"):i("Wystąpił błąd podczas rezerwacji")},function(e){i("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,t){o.get("/api/getUsers").then(function(o){(o.data.success=!1)?t("Nie znaleziono użytkowników"):e(o.data)},function(e){t("Nie znaleziono użytkowników")})})},d=function(t,n){return e(function(e,a){o.post("/api/paid",{id:t,pay:n}).then(function(o){o.data.success?e(!0):a(!1)})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s,getUserInfo:i,signupAndBook:c,adminBook:u,getUsers:l,pay:d}}]),angular.module("app").service("voucherService",["$q","$http",function(e,o){var t=function(t){return console.log(t),e(function(e,n){o.post("/api/saveVouchers",t).then(function(o){o.data.success?e(o.data.msg):n(o.data.msg)},function(e){n(e.data.msg)})})},n=function(t){return e(function(e,n){o.post("/api/checkVoucher",{voucherCode:t}).then(function(o){o.data.success&&new Date(o.data.voucher.expiryDate)<new Date?n("Termin miną"):o.data.success&&o.data.voucher.used?n("Kod został już wykożystany"):o.data.success&&!o.data.voucher.used?e(o.data.voucher):n(o.data.error)})})};return{saveVouchers:t,checkVoucher:n}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy92b3VjaGVyQ29udHJvbGxlci5qcyIsImZpbGx0ZXJzL3Jvb21GaWx0ZXIuanMiLCJzZXJ2aWNlcy9hdXRob3JpemF0aW9uLnN2Yy5qcyIsInNlcnZpY2VzL29mZmVyLnN2Yy5qcyIsInNlcnZpY2VzL3Jvb20uc3ZjLmpzIiwic2VydmljZXMvdm91Y2hlci5zdmMuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImhlYWRlcnMiLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJHNjb3BlIiwiQXV0aFNlcnZpY2UiLCJyb29tU2VydmljZSIsInJlZ2V4IiwiaXNBY3RpdmUiLCJ2aWV3TG9jYXRpb24iLCIkbG9jYXRpb24iLCJwYXRoIiwiY2hhbmdlVXNlckRldGFpbHMiLCJpc1ZhbGlkIiwiZk5hbWUiLCJsTmFtZSIsIm5FbWFpbCIsIm5QaG9uZSIsIm5ld0RldGFpbHMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJ0aGVuIiwiYSIsInJlbG9hZCIsImNhbmNlbEJvb2tpbmciLCJyb29tX2lkIiwiYm9va2luZ19pZCIsImNvbnNvbGUiLCJsb2ciLCJnZXRVc2VyQm9va2luZ3MiLCJtc2ciLCJ1c2VyQm9va2luZ3MiLCJnZXRJbmZvIiwiZ2V0VXNlckluZm8iLCJ1c2VyIiwicGhvbmUiLCJjaGFuZ2VQYXNzd29yZCIsInZhbGlkIiwib2xkUCIsIm5ld1AiLCJyZXMiLCJzdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UiLCJyZWoiLCJ3cm9uZ1Bhc3N3b3JkIiwiY2hlY2tEYXRlIiwiZGF0ZSIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRhdGVGcm9tIiwiJHEiLCIkcm91dGUiLCJzdWJtaXRFcnJvciIsImVycm9yTWVzc2FnZSIsImlzTG9nZ2VkSW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJnZXRVc2VyUm9sZSIsInJlc3VsdCIsInJvbGUiLCJzaWduaW4iLCJzdWNjZXNzIiwiaXNMb2dlZEluIiwibG9jYXRpb24iLCJzaWdub3V0IiwiZ28iLCJ1c2VyaW5mbyIsInN1Ym1pdEZvcm0iLCJzaWdudXAiLCJkYXRhIiwidG9TdHJpbmciLCJjb2RlIiwiJHdhdGNoIiwiJGNvb2tpZXMiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsImluaXQiLCJyZXNlcnZlIiwidGVybXMiLCJhbGVydCIsImJvb2tSb29tIiwiaWQiLCJfaWQiLCJmcm9tIiwidG8iLCJwcmljZSIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJlcnJvciIsInRvUHJldmlvdXMiLCJ0b3RhbCIsImZvckVhY2giLCJlIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibmdNb2RlbCIsIiR2YWxpZGF0b3JzIiwiY29tcGFyZVRvIiwibW9kZWxWYWx1ZSIsIiR2YWxpZGF0ZSIsInRlbXBsYXRlIiwidm91Y2hlclNlcnZpY2UiLCJhdHRyIiwibUN0cmwiLCJ2YWxpZGF0aW9uIiwidm91Y2hlciIsImxlbmd0aCIsImNoYXJBdCIsIiRzZXRWYWxpZGl0eSIsIiRwYXJzZXJzIiwicHVzaCIsIm9mZmVyU3ZjIiwib2ZmZXIiLCJzZWxlY3RlZEV4dHJhcyIsImRhdGVzIiwicm9vbU5hbWUiLCJzaG93T2ZmZXIiLCJnZXRFeHRyYXMiLCJkYXRlUHJlZXRpZnkiLCJ0eXBlIiwicm9vbVByaWNlIiwiY2FsY3VsYXRlRGlmZk9mRGF5cyIsImV4dHJhc1RvdGFsUHJpY2UiLCJkYXkiLCJnZXRVVENEYXRlIiwibW9udGgiLCJnZXRVVENNb250aCIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsImFkZE9yUmVtb3ZlRXh0cmEiLCJleHRyYSIsImluZGV4IiwiaW5kZXhPZiIsImJ1dHRvblRleHQiLCJidXR0b25Ub2dnbGUiLCJzcGxpY2UiLCJ0b0NvbmZpcm1hdGlvbiIsInB1dCIsInN0cmluZ2lmeSIsImV4dHJhc0RhdGEiLCJpIiwiTVNfUEVSX0RBWSIsImRhdGVGcm9tVVRDIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkYXRlVG9VVEMiLCJNYXRoIiwiZmxvb3IiLCIkZmlsdGVyIiwibm9Sb29tc0Vycm9yIiwiZXJyb3JNc2ciLCJyb29tcyIsIm51bWJlck9mQmVkcyIsInN1Y2Nlc3NmdWxDYW5jZWwiLCJ0b3RhbFByaWNlIiwic2VsZWN0T3JBZGRVc2VyIiwidW5kZWZpbmVkIiwic2VsZWN0Iiwic2VsZWN0ZWRSb29tIiwic2V0RGF0ZSIsImRhdGVUZW1wIiwiZmluZFJvb21zIiwiZ2V0Um9vbXMiLCJ0b0lTT1N0cmluZyIsImJlZHMiLCJyb29tc0RhdGEiLCJhZGRSb29tIiwiY2hvb3NlUm9vbSIsInRlc3QiLCJnZXRBbGxSb29tcyIsImFsbFJvb21zIiwiZ2V0QXZhaWxhYmlsaXR5IiwicmVzZXJ2YXRpb25zIiwicm9vbURhdGVGcm9tIiwicm9vbURhdGVUbyIsIm1hbmFnbWVudEluaXQiLCJ0b0Jvb2tpbmdzIiwiJCIsIm1vZGFsIiwic2V0VGltZW91dCIsImdldFNlbGVjdGVkUm9vbSIsImdldFJvb21Cb29raW5ncyIsImIiLCJib29raW5ncyIsInNlbGVjdFVzZXIiLCJ1Iiwic2VsZWN0ZWRVc2VyIiwidG9Cb29raW5nIiwiaW5pdEJvb2tpbmciLCJib29raW5nIiwiZ2V0VXNlcnMiLCJ1c2VycyIsInN1Ym1pdEJvb2tGb3JtIiwic2lnbnVwQW5kQm9vayIsInNlbGVjdGVkVXNlckJvb2tpbmciLCJhZG1pbkJvb2siLCJkaXNjb3VudCIsImFtb3VudCIsInBhaWRDbGFzcyIsInBhaWQiLCJwYXkiLCJpc051bWVyaWMiLCJuIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJjb252ZXJ0VG9OdW1iZXIiLCJOdW1iZXIiLCJnZW5lcmF0ZVZvdWNoZXJzIiwidm91Y2hlcnMiLCJjb2RlcyIsInBvc3NpYmxlIiwiZXhwaXJ5RGF0ZSIsInZvdWNoZXJFeHBpcnlEYXRlIiwidm91Y2hlckVycm9yIiwidm91Y2hlcnNHZW5lcmF0ZWQiLCJnZW5lcmF0ZWRWb3VjaGVycyIsIm51bWJlck9mVm91Y2hlcnMiLCJqIiwicmFuZG9tIiwibGFzdCIsImRpc2NvdW50VHlwZSIsInZvdWNoZXJUeXBlIiwidm91Y2hlcnNTYXZlZCIsInNhdmVWb3VjaGVycyIsImNoZWNrVm91Y2hlciIsInZvdWNoZXJOb3RGb3VuZCIsInZvdWNoZXJGb3VuZCIsImNvZGVDaGFuZ2VkIiwiYm9va2luZ0ZybSIsIiR2YWxpZCIsImZpbHRlciIsInByb3BlcnR5TmFtZSIsImlzQXJyYXkiLCJrZXlzIiwidmFsIiwiaXNVbmRlZmluZWQiLCJzZXJ2aWNlIiwiJGh0dHAiLCJsb2FkVXNlckluZm8iLCJ3aW5kb3ciLCJnZXRJdGVtIiwiTE9DQUxfVE9LRU4iLCJ1c2VySW5mbyIsImRlc3Ryb3lVc2VySW5mbyIsImF1dGhUb2tlbiIsImRlZmF1bHRzIiwiY29tbW9uIiwicmVtb3ZlSXRlbSIsInN0b3JlVXNlckluZm8iLCJzZXRJdGVtIiwicmVzb2x2ZSIsInJlamVjdCIsInBvc3QiLCJyZXN1bHQyIiwib2xkUGFzcyIsIm5ld1Bhc3MiLCJjaG9vc2VuUm9vbSIsImdldFJvb20iLCJudW1iZXIiLCJyZXNlcnZhdGlvbl9pZCIsInZvdWNoZXJDb2RlIiwidXNlZCJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxhQ0FBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsbUJBQUEsVUFBQSxTQUFBQyxHQUNBLE9BQ0FDLFFBQUEsU0FBQUMsR0FNQSxNQUxBQSxHQUFBQyxRQUFBRCxFQUFBQyxZQUNBSCxFQUFBSSxhQUFBQyxRQUNBSCxFQUFBQyxRQUFBLGNBQUFILEVBQUFJLGFBQUFDLE9BR0FILE9BS0FBLFFBQUEsaUJBQUEscUJBQUEsU0FBQUksRUFBQUMsR0FDQUQsRUFDQUUsTUFBQSxRQUNBQyxJQUFBLFFBQ0FDLFdBQUEsV0FDQUMsWUFBQSxTQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUUsWUFBQSxVQUVBSCxNQUFBLGNBQ0FDLElBQUEsY0FDQUUsWUFBQSxlQUVBSCxNQUFBLFdBQ0FDLElBQUEsV0FDQUUsWUFBQSxZQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUMsV0FBQSxZQUNBQyxZQUFBLFVBRUFILE1BQUEsZ0JBQ0FDLElBQUEsZ0JBQ0FFLFlBQUEsaUJBRUFILE1BQUEscUJBQ0FDLElBQUEscUJBQ0FFLFlBQUEsc0JBRUFILE1BQUEsb0JBQ0FDLElBQUEsb0JBQ0FFLFlBQUEscUJBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsb0JBQ0FDLElBQUEsWUFDQUUsWUFBQSxhQUVBSCxNQUFBLG1CQUNBQyxJQUFBLFdBQ0FFLFlBQUEsWUFFQUgsTUFBQSwwQkFDQUMsSUFBQSxrQkFDQUUsWUFBQSxtQkFFQUgsTUFBQSxhQUNBQyxJQUFBLGFBQ0FFLFlBQUEsY0FFQUgsTUFB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QUFBLEtBQUEsUUFBQSxTQUFBdE0sRUFBQXVNLEdBRUEsR0FBQWQsR0FBQSxTQUFBZixHQUVBLE1BREFoTSxTQUFBQyxJQUFBK0wsR0FDQTFLLEVBQUEsU0FBQW9OLEVBQUFDLEdBQ0FkLEVBQUFlLEtBQUEsb0JBQUE1QyxHQUFBdE0sS0FBQSxTQUFBbUMsR0FDQUEsRUFBQVcsS0FBQVIsUUFDQTBNLEVBQUE3TSxFQUFBVyxLQUFBckMsS0FFQXdPLEVBQUE5TSxFQUFBVyxLQUFBckMsTUFDQSxTQUFBMEIsR0FDQThNLEVBQUE5TSxFQUFBVyxLQUFBckMsVUFLQTZNLEVBQUEsU0FBQTFILEdBQ0EsTUFBQWhFLEdBQUEsU0FBQW9OLEVBQUFDLEdBQ0FkLEVBQUFlLEtBQUEscUJBQUFRLFlBQUE5SixJQUFBNUYsS0FBQSxTQUFBbUMsR0FDQUEsRUFBQVcsS0FBQVIsU0FBQSxHQUFBWixNQUFBUyxFQUFBVyxLQUFBOEMsUUFBQTZHLFlBQUEsR0FBQS9LLE1BQ0F1TixFQUFBLGVBRUE5TSxFQUFBVyxLQUFBUixTQUFBSCxFQUFBVyxLQUFBOEMsUUFBQStKLEtBQ0FWLEVBQUEsOEJBRUE5TSxFQUFBVyxLQUFBUixVQUFBSCxFQUFBVyxLQUFBOEMsUUFBQStKLEtBQ0FYLEVBQUE3TSxFQUFBVyxLQUFBOEMsU0FHQXFKLEVBQUE5TSxFQUFBVyxLQUFBd0IsV0FNQSxRQUNBK0ksYUFBQUEsRUFDQUMsYUFBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDIyLjA5LjIwMTYuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdSb3V0ZScsICd1aS5yb3V0ZXInLCAnbmdDb29raWVzJ10pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBmdW5jdGlvbiAoJHdpbmRvdykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21haW4nLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Jvb21DdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFpbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdyb29tcycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Jvb21zJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncm9vbXMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncmVzdGF1cmFudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Jlc3RhdXJhbnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdyZXN0YXVyYW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRhY3QnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb250YWN0JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGFjdCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdvZmZlcicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL29mZmVyJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdvZmZlckN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdvZmZlcidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb25maXJtYXRpb24nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb25maXJtYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bEJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdWNjZXNzZnVsQm9va2luZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N1Y2Nlc3NmdWxTaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdWNjZXNzZnVsU2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bFNpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYWNjb3VudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FjY291bnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbmluJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbmluJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbmluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NpZ251cCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmJvb2tpbmdzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYm9va2luZ3MnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdib29raW5ncydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmRldGFpbHMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZGV0YWlscydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmNoYW5nZVBhc3N3b3JkJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY2hhbmdlUGFzc3dvcmQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjaGFuZ2VQYXNzd29yZCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnJvb21zJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXJvb21zJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXJvb21zJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC51c2Vycycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC11c2VycycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC11c2VycydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQudm91Y2hlcnMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtdm91Y2hlcnMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtdm91Y2hlcnMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LWJvb2tpbmdzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC1ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9tYW5hZ21lbnQtYm9va2luZ3MnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgndGVzdCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Rlc3QnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZXN0J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL21haW4nKVxyXG4gICAgfSlcclxuICAgIC5ydW4oWyckcm9vdFNjb3BlJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLFxyXG4gICAgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kc3RhdGUgPSAkc3RhdGU7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kc3RhdGVQYXJhbXMgPSAkc3RhdGVQYXJhbXM7XHJcblxyXG4gICAgfV0pO1xyXG4gICAgLypcclxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnYXV0aEludGVyY2VwdG9yJyk7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9tYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3NpZ251cCcsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3NpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zaWduaW4nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3NpZ25pbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy91c2VyaW5mbycsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3VzZXJpbmZvJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3N1Y2Nlc3NmdWxTaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvb2ZmZXInLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3N1Y2Nlc3NmdWxCb29raW5nJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm90aGVyd2lzZSgnLycpO1xyXG4gICAgfSk7XHJcbiovXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2FjY0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsIEF1dGhTZXJ2aWNlLCByb29tU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUucmVnZXggPSAnKFxcXFwrWzAtOV1cXFxcZHsxfSkqKFxcXFxzKSooWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pJztcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh2aWV3TG9jYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZpZXdMb2NhdGlvbiA9PT0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uKGlzVmFsaWQsIGZOYW1lLCBsTmFtZSwgbkVtYWlsLCBuUGhvbmUpe1xyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdEZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogZk5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IGxOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBuRW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG5QaG9uZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVVzZXJEZXRhaWxzKG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHByenljaXNrIGFudWxvd2FuaWEgdHlsa28gZGxhIHBva29pLCBrdMOzcnljaCBkYXRhIG5hIHRvIHBvendhbGFcclxuICAgICAgICAkc2NvcGUuY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicm9vbSBpZCB0bzpcIityb29tX2lkK1wiLCBib29raW5nX2lkIHRvOlwiK2Jvb2tpbmdfaWQpO1xyXG5cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuY2FuY2VsQm9va2luZyhyb29tX2lkLCBib29raW5nX2lkKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndWRhxYJvIHNpxJkgYW51bG93YcSHJyk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckJvb2tpbmdzKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJCb29raW5ncyA9IG1zZztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGhvbmUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB1c3Rhd2ljIHBhc3N5IG5hIHplcm8gcG8gxbzEhWRhbml1IGhodHBcclxuICAgICAgICAkc2NvcGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAodmFsaWQsb2xkUCwgbmV3UCkge1xyXG4gICAgICAgICAgICBpZih2YWxpZCl7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VQYXNzd29yZChvbGRQLCBuZXdQKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMubXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Y2Nlc3NmdWxQYXNzd29yZENoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChyZWopIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUud3JvbmdQYXNzd29yZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNoZWNrRGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUZyb20gPiBjdXJyZW50RGF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgZ2V0SW5mbygpO1xyXG4gICAgICAgIGdldFVzZXJCb29raW5ncygpO1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdhdXRoQ3RybCcsIGZ1bmN0aW9uICgkcSwgJHNjb3BlLCAkc3RhdGUsICR3aW5kb3csICRsb2NhdGlvbiwgJHJvdXRlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSkge1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJyhcXFxcK1swLTldXFxcXGR7MX0pKihcXFxccykqKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KSc7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnJztcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGlmKCRyb290U2NvcGUuaXNMb2dnZWRJbigpKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIFxyXG4gICAgICAgICRzY29wZS5zaWduaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbicpO1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvJztcclxuICAgICAgICAgICAgICAgIC8vJHN0YXRlLmdvKCdob21lJyk7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbm91dCgpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIC8vc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgLy8kc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dvdXQnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJpbmZvID0gbXNnO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvL1RPRE8gc3RhdGUucmVsb2FkXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ251cCgkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb215xZtsbmllIHphcmVqZXN0cm93YW5vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbmluKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChtc2csIHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkd2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKCkgPT0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS8jL2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxTaWdudXAnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy9zdWNjZXNzZnVsU2lnbnVwJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmNvZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExMDAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnV3licmFueSBlbWFpbCBqZXN0IGp1xbwgemFyZWplc3Ryb3dhbnkuIFByb3N6xJkgd3licmHEhyBpbm55Lic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3VibWl0RXJyb3InLCBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdjb25maXJtYXRpb25DdHJsJywgZnVuY3Rpb24gKCRxLCAkd2luZG93LCAkbG9jYXRpb24sICRzdGF0ZSwgJGNvb2tpZXMsICRzY29wZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICRzY29wZS5yb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVGcm9tO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZVRvO1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLmV4dHJhcztcclxuICAgICAgICAkc2NvcGUubnVtT2ZEYXlzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5udW1PZkRheXM7XHJcblxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQgPyAkc2NvcGUuaXNTaWduZWRJbiA9IHRydWUgOiAkc2NvcGUuaXNTaWduZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICRzY29wZS5yZXNlcnZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkc2NvcGUudGVybXMgIT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdQcnplZCBwb3R3aWVyZHplbmllbSByZXplcndhY2ppIG5hbGXFvHkgemFha2NlcHRvd2HEh3JlZ3VsYW1pbi4nKTtcclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmJvb2tSb29tKHtpZDogJHNjb3BlLnJvb20uX2lkLCBmcm9tOiAkc2NvcGUuZGF0ZUZyb20sIHRvOiAkc2NvcGUuZGF0ZVRvLCBwcmljZTogY2FsY3VsYXRlVG90YWxQcmljZSgpLCBleHRyYXM6ICRzY29wZS5leHRyYXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxCb29raW5nJylcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHd5xZt3aWV0bGVuaWUgZXJycm9yYVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9vZmZlcidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdvZmZlcicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHRvdGFsID0gKCRzY29wZS5yb29tLnByaWNlICogJHNjb3BlLm51bU9mRGF5cyk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gZS5wcmljZSAqICRzY29wZS5udW1PZkRheXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB6cm9iaWVuaWUgcmVqZXN0cmFjamkobW/FvGUgcHJ6ZW5pZXNpZW5pZSBuYSBzaWdudXAgdmlldz8gZG8gcm96d2HFvGVuaWEpIGkgb2JzxYJ1Z2EgYsWCxJlkw7N3KG1vxbxlIGpha2/FmyBwb8WCxIVjennEhyBvYnlkd2EgbG9nb3dhbmlhIGkgcmVqZXN0cmFjamUgdyBqZWRubz8pXHJcbiAgICAgICAgLy9UT0RPIE9ic2x1Z2EgYmxlZG93IHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjemVnb3MgZG8gd2lkb2t1IHJlemVyd2FqY2lcclxuICAgICAgICAvL1RPRE8gcG91c8Ozd2HEhyBqYWtpZcWbIGluaXR5KHd5c3RhY3p5IHd5b8WCYcSHIGZ1bmtjasSZIHcga29udHJvbGVyemUgbHViIHNydilcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjYcWCZWogb2JzxYJ1Z2kga29udGEoem1pYW5hIGhhc8WCYSwgbnVtZXJ1IHRlbGVmb251W2RvZGFuaWUgbHViIHptaWFuYV0sIHBvZGdsxIVkdSByZXplcndhY2ppLCBpdHApIG9yYXogb2JzxYJ1Z2kgaG90ZWx1KENSVUQgZG9kYXRrw7N3LCBwb2tvamkgaXRwKS5cclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBtb8W8ZSBqYWtpxZsgd3lrcmVzw7N3IG5hIHRlbWF0IG9iY2nEhcW8ZW5pYSBwb2tvamkgbHViIGpha2nFmyBwcnp5Y2hvZMOzdyBjenkgY2/FmyBhbGJvIGphaWXFmyBjb8WbIGRvIGdlbmVyb3dhbmllIHBkZiB6IHJhcG9ydGVtXHJcbiAgICAgICAgLy9UT0RPIHBvem1pZW5pYcSHIHPFgm93YSByZXNlcnZhdGlvbiBpdHAgbmEgYm9va2luZ1xyXG4gICAgICAgIC8vVE9ETyBrb2R5IHJhYmF0b3dlXHJcbiAgICAgICAgLy9UT0RPIHBvd2lhZG9taWVuaWUgbyBjaWFzdGVjemthY2hcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBwb2RnbMSFZHUgb2LFgm/FvGVuaWEgaG90ZWx1IGphayB3IGtpbmkoMyBzdGFueTogd29sbnksIHphcmV6ZXJ3b3dhbnksIHphamV0eSlcclxuICAgICAgICAvL1RPRE8gemJhZGFuaWUgY3p5IC5ydW4gc3RhdGVQcm92aWRlcmEgcG9jemVibmVcclxuICAgICAgICAvL1RPRE8gcG96bmFuaWUgc3RhdGVQcm92aWRlcmEgaSBkb2RhbmllIG5lc3RlZCB2aWV3c1xyXG4gICAgICAgIC8vVE9ETyBuYSBnxYLDs3duZWogc3Ryb25pZSB6cm9iacSHxbxlYnkgZGF0YSBiecWCxIUgY29uYWptbmllaiBqZWRlbiBkemllbiByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIHptaWFuYSByZWdleCBuYSByb290U2NvcGUgamVzbGkgbW96bGl3ZVxyXG4gICAgICAgIC8vVE9EbyBkYXRhIHJlemVyd2FjamkgdHlsa28gb2QgZGF0eSBkemlzaWVqc3plaiAoYmV6IHJlemVyd2FjamkgdyBwcnplc3rFgm/Fm2NpKVxyXG4gICAgICAgIC8vVE9ETyBrb250b1xyXG4gICAgICAgIC8vem1pYW5hIGRhbnljaFxyXG4gICAgICAgIC8vem1pYW5hIGhhc8WCYVxyXG4gICAgICAgIC8vem9iYWN6ZW5pZSByZXplcndhY2ppXHJcbiAgICAgICAgLy9hbnVsb3dhbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL1xyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ2NvbXBhcmVUbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiBcIm5nTW9kZWxcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG90aGVyTW9kZWxWYWx1ZTogXCI9Y29tcGFyZVRvXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMsIG5nTW9kZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmNvbXBhcmVUbyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZSA9PSBzY29wZS5vdGhlck1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcIm90aGVyTW9kZWxWYWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoJ3VzZXJJbmZvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8cD5zaWFsYWxhPC9wPidcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLypcclxuICAgIC5kaXJlY3RpdmUoJ215RGlyZWN0aXZlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbUN0cmwpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG15VmFsaWRhdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKFwiZVwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgnY2hhckUnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ2NoYXJFJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtQ3RybC4kcGFyc2Vycy5wdXNoKG15VmFsaWRhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiAgICAqL1xyXG4gICAgLmRpcmVjdGl2ZSgndm91Y2hlcmNoZWNrJywgZnVuY3Rpb24gKHZvdWNoZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0aW9uKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih2b3VjaGVyLmxlbmd0aCA9PSAyMyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZvdWNoZXIuY2hhckF0KDUpID09ICctJyAmJiB2b3VjaGVyLmNoYXJBdCgxMSkgJiYgdm91Y2hlci5jaGFyQXQoMTcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b3VjaGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbUN0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdvZmZlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkY29va2llcywgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3csIG9mZmVyU3ZjKSB7XHJcbiAgICAgICAgJHNjb3BlLm9mZmVyID0ge307XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgIHZhciBkYXRlcyA9IHt9O1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAnJztcclxuXHJcblxyXG4gICAgICAgIHZhciBzaG93T2ZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vZmZlciA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZ2V0RXh0cmFzKCk7XHJcblxyXG4gICAgICAgICAgICBkYXRlcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZVRvKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAkc2NvcGUub2ZmZXIudHlwZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21QcmljZSA9ICRzY29wZS5vZmZlci5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGF0ZVByZWV0aWZ5ID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnK2RheSsnLScrbW9udGgrJy0nK3llYXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FzZGFzZCcpO1xyXG4gICAgICAgICAgICB2YXIgZXh0cmFzID0ge2V4dHJhczogJHNjb3BlLnNlbGVjdGVkRXh0cmFzLCBudW1PZkRheXM6IGNhbGN1bGF0ZURpZmZPZkRheXMoKX07XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnZXh0cmFzJywgSlNPTi5zdHJpbmdpZnkoZXh0cmFzKSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvbWFpbidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5nZXRFeHRyYXMoKS50aGVuKGZ1bmN0aW9uIChleHRyYXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZXh0cmFzRGF0YTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAgOyBpIDwgJHNjb3BlLmV4dHJhcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25UZXh0ID0gJ0RvZGFqICsnO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVG9nZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVEaWZmT2ZEYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgTVNfUEVSX0RBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKGRhdGVzLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVVUQyA9IERhdGUuVVRDKGRhdGVGcm9tLmdldEZ1bGxZZWFyKCksIGRhdGVGcm9tLmdldE1vbnRoKCksIGRhdGVGcm9tLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG9VVEMgPSBEYXRlLlVUQyhkYXRlVG8uZ2V0RnVsbFllYXIoKSwgZGF0ZVRvLmdldE1vbnRoKCksIGRhdGVUby5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZGF0ZVRvVVRDIC0gZGF0ZUZyb21VVEMpIC8gTVNfUEVSX0RBWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2hvd09mZmVyKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3Jvb21DdHJsJywgZnVuY3Rpb24gKCRxLCAkY29va2llcywgJHNjb3BlLCAkcm9vdFNjb3BlLCAkd2luZG93LCAkbG9jYXRpb24sIHJvb21TZXJ2aWNlLCBvZmZlclN2YywkZmlsdGVyLCAkc3RhdGUpIHtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1zZyA9Jyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21zID0gW107XHJcbiAgICAgICAgJHNjb3BlLm51bWJlck9mQmVkcyA9IDE7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWNjZXNzZnVsQ2FuY2VsID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAwO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdE9yQWRkVXNlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGUpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBkYXRlO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRlbXAgPSBuZXcgRGF0ZTtcclxuICAgICAgICAgICAgZGF0ZVRlbXAuc2V0RGF0ZShkYXRlVGVtcC5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlVGVtcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZpbmRSb29tcyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gb2dhcm5hYyBzaWUgeiB0eW0gYmVkcywgd3lzenVraXdhYyBwb2tvamUgbyBwb2RhbmVqIGlsb3NjaSBvc29iIGkgbmF6d2FjIHRvIGpha29zIHcgYmF6aWUgb3N0YXRlY3puaWVcclxuICAgICAgICAgICAgaWYoJHNjb3BlLmRhdGVUby5nZXRNb250aCgpIDw9ICRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpICYmICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpIDw9ICRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSAkc2NvcGUuZGF0ZUZyb207XHJcbiAgICAgICAgICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRSb29tcyh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiAkc2NvcGUuZGF0ZUZyb20udG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHRvOiAkc2NvcGUuZGF0ZVRvLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBiZWRzOiAkc2NvcGUubnVtYmVyT2ZCZWRzXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJvb21zRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYocm9vbXNEYXRhLmxlbmd0aCA+MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJvb21zID0gcm9vbXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1zZyA9ICdDb8WbIHBvc3rFgm8gbmllIHRhay4nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRSb29tID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdyb29tJywgSlNPTi5zdHJpbmdpZnkocm9vbSkpO1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2RhdGVzJywgSlNPTi5zdHJpbmdpZnkoe2RhdGVGcm9tOiAkc2NvcGUuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLmRhdGVUb30pKTtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuY2hvb3NlUm9vbShyb29tKTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdvZmZlcicpO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy9vZmZlcic7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5yb29tcyk7XHJcbiAgICAgICAgICAgICRzY29wZS5maW5kUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldEFsbFJvb21zKCkudGhlbihmdW5jdGlvbiAocm9vbXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hbGxSb29tcyA9IHJvb21zO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocm9vbXMpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETyBvYnPFgnVnYSBlcnJvcmFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmdldEF2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uIChyZXNlcnZhdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5yb29tRGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgcm9vbURhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5yb29tRGF0ZVRvKTtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHJlc2VydmF0aW9ucy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShyZXNlcnZhdGlvbnNbaV0uZnJvbSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLnRvKTtcclxuICAgICAgICAgICAgICAgIGlmKHJvb21EYXRlRnJvbSA8IGRhdGVUbyAmJiByb29tRGF0ZVRvID4gZGF0ZUZyb20pe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm90QXZhaWxhYmxlJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAnYXZhaWxhYmxlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5tYW5hZ21lbnRJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5yb29tRGF0ZUZyb20gPSBkYXRlO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRlbXAgPSBuZXcgRGF0ZTtcclxuICAgICAgICAgICAgZGF0ZVRlbXAuc2V0RGF0ZShkYXRlVGVtcC5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5yb29tRGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRBbGxSb29tcygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnRvQm9va2luZ3MgPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ3NlbGVjdGVkUm9vbScsIEpTT04uc3RyaW5naWZ5KHJvb20pKTtcclxuICAgICAgICAgICAgJCgnI3JlZ3VsYW1pbicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWFuYWdtZW50LWJvb2tpbmdzJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldFNlbGVjdGVkUm9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUm9vbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdzZWxlY3RlZFJvb20nKSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJvb20gaWQgdG86XCIrcm9vbV9pZCtcIiwgYm9va2luZ19pZCB0bzpcIitib29raW5nX2lkKTtcclxuXHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmNhbmNlbEJvb2tpbmcocm9vbV9pZCwgYm9va2luZ19pZCkudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VkYcWCbyBzacSZIGFudWxvd2HEhycpO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRSb29tQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20oKTtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbUJvb2tpbmdzKCRzY29wZS5zZWxlY3RlZFJvb20uX2lkKS50aGVuKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm9va2luZ3MgPSBiLnJlc2VydmF0aW9ucztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0VXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFVzZXJJbmZvKHVzZXIpLnRoZW4oZnVuY3Rpb24gKHUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXIgPSB1O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNlbGVjdGVkVXNlcik7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvQm9va2luZyA9IGZ1bmN0aW9uIChyb29tLCBkYXRlRnJvbSwgZGF0ZVRvKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnYm9va2luZycsIEpTT04uc3RyaW5naWZ5KHtyb29tOiByb29tLCBkYXRlRnJvbTogZGF0ZUZyb20sIGRhdGVUbzogZGF0ZVRvfSkpO1xyXG4gICAgICAgICAgICAkKCcjcmVndWxhbWluJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCd0ZXN0Jyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXRCb29raW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYm9va2luZyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdib29raW5nJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUudGVzdC5kYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRlc3QuZGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZVRvKTtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICAgICAgZ2V0RXh0cmFzKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlcnMpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgZG9kYXRrw7N3IGkgb2JsaWN6ZW5pZSBjZW55XHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEJvb2tGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXNlciA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RPckFkZFVzZXIpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLnRlc3QuZW1haWwgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IFwiXCIrJHNjb3BlLnRlc3QuZmlyc3ROYW1lKyRzY29wZS50ZXN0Lmxhc3ROYW1lKyRzY29wZS50ZXN0LnBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS50ZXN0LmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS50ZXN0Lmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnRlc3QucGhvbmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6ICRzY29wZS50ZXN0LmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS50ZXN0LmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS50ZXN0Lmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnRlc3QucGhvbmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2Uuc2lnbnVwQW5kQm9vayh1c2VyLCAkc2NvcGUuYm9va2luZy5yb29tLl9pZCwge2RhdGVGcm9tOiAkc2NvcGUudGVzdC5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUudGVzdC5kYXRlVG99LCAkc2NvcGUudG90YWxQcmljZSwgJHNjb3BlLnNlbGVjdGVkRXh0cmFzKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyID0gSlNPTi5wYXJzZSgkc2NvcGUuc2VsZWN0ZWRVc2VyQm9va2luZyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJvb21DdHJsLCBmdW5rY2phIHN1Ym1pdEJvb2tGb3JtLCBkYXRhT2Q6IFwiKyRzY29wZS50ZXN0LmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmFkbWluQm9vaygkc2NvcGUuYm9va2luZy5yb29tLl9pZCwgdXNlci5lbWFpbCAse2RhdGVGcm9tOiAkc2NvcGUudGVzdC5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUudGVzdC5kYXRlVG99LCAkc2NvcGUudG90YWxQcmljZSwgJHNjb3BlLnNlbGVjdGVkRXh0cmFzKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlRGlmZk9mRGF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIE1TX1BFUl9EQVkgPSAxMDAwICogNjAgKiA2MCAqIDI0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUudGVzdC5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUudGVzdC5kYXRlVG8pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21VVEMgPSBEYXRlLlVUQyhkYXRlRnJvbS5nZXRGdWxsWWVhcigpLCBkYXRlRnJvbS5nZXRNb250aCgpLCBkYXRlRnJvbS5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvVVRDID0gRGF0ZS5VVEMoZGF0ZVRvLmdldEZ1bGxZZWFyKCksIGRhdGVUby5nZXRNb250aCgpLCBkYXRlVG8uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGRhdGVUb1VUQyAtIGRhdGVGcm9tVVRDKSAvIE1TX1BFUl9EQVkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50ICE9IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLmRpc2NvdW50LnR5cGUgPT0gJ3psJyl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9ICgoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLmJvb2tpbmcucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSkgLSAkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnJScpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLmJvb2tpbmcucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gJHNjb3BlLnRvdGFsUHJpY2UgLSAoJHNjb3BlLnRvdGFsUHJpY2UgKiAoJHJvb3RTY29wZS5kaXNjb3VudC5hbW91bnQgLyAxMDApKTtcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmdldEV4dHJhcygpLnRoZW4oZnVuY3Rpb24gKGV4dHJhc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBleHRyYXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCAkc2NvcGUuZXh0cmFzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRleHQgPSAnRG9kYWogKyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25Ub2dnbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUucGFpZENsYXNzID0gZnVuY3Rpb24gKHBhaWQpIHtcclxuICAgICAgICAgICAgaWYocGFpZClcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYnRuLXN1Y2Nlc3MnO1xyXG4gICAgICAgICAgICByZXR1cm4gJ2J0bi13YXJuaW5nJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnBheSA9IGZ1bmN0aW9uIChib29raW5nKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLnBheShib29raW5nLl9pZCwgIWJvb2tpbmcucGFpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgYm9va2luZy5wYWlkID0gIWJvb2tpbmcucGFpZDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCgnZGlzY291bnQnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxMS4xMi4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5jb250cm9sbGVyKCd2b3VjaGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsIHZvdWNoZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgLy9JbGUsIGN6eSB3aWVsb2tyb3RuZWdvIHV6eXRrdSwgZGF0YSB3eWdhxZtuacSZY2lhXHJcbiAgICAkc2NvcGUuZ2VuZXJhdGVWb3VjaGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUudm91Y2hlcnMgPSB7XHJcbiAgICAgICAgICAgIGNvZGVzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHBvc3NpYmxlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xyXG4gICAgICAgIHZhciBleHBpcnlEYXRlID0gJHNjb3BlLnZvdWNoZXJFeHBpcnlEYXRlO1xyXG4gICAgICAgIGlmKGV4cGlyeURhdGUgPCBuZXcgRGF0ZSgpKXtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJFcnJvciA9ICdEYXRhIHd5Z2HFm25pxJljaWEgbmllIG1vxbxlIGJ5xIcgeiBwcnplc3rFgm/Fm2NpJzsvL1RPRE8gcG9wcmF3acSHIGtvbXVuaWthdFxyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNHZW5lcmF0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmdlbmVyYXRlZFZvdWNoZXJzID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlckVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB3aGlsZSgkc2NvcGUudm91Y2hlcnMuY29kZXMubGVuZ3RoIDwgJHNjb3BlLm51bWJlck9mVm91Y2hlcnMpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHZvdWNoZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IDU7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm91Y2hlciArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaSAhPSAzICl2b3VjaGVyICs9ICctJztcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuY29kZXMucHVzaCh2b3VjaGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9UT0RPIGRhbHN6YSBwcmFjYSBuYWQgdm91Y2hlcmFtaSwgcG9tecWbbGXEhyBqYWsgdG8gcHJ6ZWNob3d5d2HEhyB3IGJhemllIGN6eSBqYWtvIHRla3N0IG5wLiAyMCUgY3p5IG9kZHppZWxuaWUgbnVtYmVyOiAyMCwgZGlzY291bnRUeXBlOiAnJVwiXHJcbiAgICAgICAgICAgIHZhciBsYXN0ID0gJHNjb3BlLmRpc2NvdW50LmNoYXJBdCgkc2NvcGUuZGlzY291bnQubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICBpZihsYXN0ID09PSAnJScpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZGlzY291bnRUeXBlID0gJyUnO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGxhc3QgPT09ICfFgicgJiYgJHNjb3BlLmRpc2NvdW50LmNoYXJBdCgkc2NvcGUuZGlzY291bnQubGVuZ3RoLTIpID09PSAneicpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZGlzY291bnRUeXBlID0gJ3psJztcclxuXHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudCA9IGNvbnZlcnRUb051bWJlcigkc2NvcGUuZGlzY291bnQpO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMudHlwZSA9ICRzY29wZS52b3VjaGVyVHlwZTsvLzAgamVkbm9rdHJvbmVnbywgMSB3aWVsb1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZXhwaXJ5RGF0ZSA9IGV4cGlyeURhdGU7XHJcbiAgICAgICAgICAgICRzY29wZS5nZW5lcmF0ZWRWb3VjaGVycyA9ICRzY29wZS52b3VjaGVycy5jb2RlcztcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzR2VuZXJhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzU2F2ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuc2F2ZVZvdWNoZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52b3VjaGVycyk7XHJcbiAgICAgICAgdm91Y2hlclNlcnZpY2Uuc2F2ZVZvdWNoZXJzKCRzY29wZS52b3VjaGVycykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS52b3VjaGVyc1NhdmVkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy9UT0RPIG9kamVjaWUga3dvdHkgaSBzcHJhd2R6ZW5pZSB2YXpub3NjaSh3eXN3aWV0bGVuaWUgb2Rwb3dpZWRuaWVnbyBlcnJvcmEpLCBuYSBrb25pZWMgcHJ6eSByZXplcndhY2ppIHV3emdsZWRuaWMgdm91Y2hlclxyXG4gICAgJHNjb3BlLmNoZWNrVm91Y2hlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudm91Y2hlcik7XHJcbiAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLmNoZWNrVm91Y2hlcigkc2NvcGUudm91Y2hlci50b1N0cmluZygpKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlck5vdEZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9ICdLb2QgcG9wcmF3bnkgem5pxbxrYSAnK3Jlc3VsdC5kaXNjb3VudCtyZXN1bHQuZGlzY291bnRUeXBlO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHthbW91bnQ6IHJlc3VsdC5kaXNjb3VudCwgdHlwZTogcmVzdWx0LmRpc2NvdW50VHlwZX07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGlzY291bnQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZGlzY291bnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlck5vdEZvdW5kID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlckZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5jb2RlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighJHNjb3BlLmJvb2tpbmdGcm0uJHZhbGlkKXtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGlzTnVtZXJpYyhuKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb252ZXJ0VG9OdW1iZXIobikge1xyXG4gICAgICAgIHZhciBkaXNjb3VudCA9ICcnO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoaXNOdW1lcmljKG4uY2hhckF0KGkpKSl7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudCArPSBuLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpc2NvdW50ID0gTnVtYmVyKGRpc2NvdW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaXNjb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkaXNjb3VudCA9IE51bWJlcihkaXNjb3VudCk7XHJcbiAgICAgICAgcmV0dXJuIGRpc2NvdW50O1xyXG4gICAgfVxyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDcuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigndW5pcXVlQ2F0ZWdvcmllcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJvb21zLCBwcm9wZXJ0eU5hbWUpIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KHJvb21zKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gcm9vbXNbaV1bcHJvcGVydHlOYW1lXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoa2V5c1t2YWxdKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNbdmFsXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJvb21zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdBdXRoU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdmFyIExPQ0FMX1RPS0VOID0gJ3Rva2VuJztcclxuICAgICAgICB2YXIgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBVc2VyIGluZm8uLi4nKTsvL0RvIHVzdW5pxJljaWFcclxuICAgICAgICAgICAgaWYodG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RvcmVVc2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfVE9LRU4sIHRva2VuKTtcclxuICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdG9rZW47XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBhdXRoVG9rZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2lnbmluID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYXV0aGVudGljYXRlJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ocmVzdWx0LmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdmFyIHNpZ25vdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lVc2VySW5mbygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzaWdudXAgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zaWdudXAnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2plc3RlbSB3IHJlc29sdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtmaXJzdE5hbWU6IHJlc3VsdC5kYXRhLmZpcnN0TmFtZSwgbGFzdE5hbWU6IHJlc3VsdC5kYXRhLmxhc3ROYW1lLCBlbWFpbDogcmVzdWx0LmRhdGEuZW1haWwsIHBob25lOiByZXN1bHQuZGF0YS5waG9uZSwgcm9sZTogcmVzdWx0LmRhdGEucm9sZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gcG9wcmF3acSHIHJhemVtIHogYXBpIMW8ZWJ5IGRhd2HFgm8gc3VjY2Vzc1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJCb29raW5ncycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24gKG5ld0RldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvdGVzdCcsIG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXROZXdUb2tlbicsIHtlbWFpbDogbmV3RGV0YWlscy5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdDIuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0MiBzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQyLmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igbm93ZWdvIHRva2VuYScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtzdWNjZXNzOiB0cnVlLCBtc2c6IFwiUG9tecWbbG5pZSB6bWllbmlvbm8gZGFuZVwifSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe3N1Y2Nlc3M6IGZhbHNlLCBtc2c6IFwiY2/FmyBwb3N6xYJvIG5pZSB0YWtcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKG9sZFBhc3MsIG5ld1Bhc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hhbmdlLXBhc3N3b3JkJywge29sZFBhc3M6IG9sZFBhc3MsIG5ld1Bhc3M6IG5ld1Bhc3N9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHttc2c6ICdwb215xZtsbmllIHptaWVuaW9ubyBoYXNsbyd9KTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe21zZzogcmVzdWx0LmRhdGEuZXJyb3J9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJSb2xlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3JvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgc2lnbmluOiBzaWduaW4sXHJcbiAgICAgICAgICAgIHNpZ25vdXQ6IHNpZ25vdXQsXHJcbiAgICAgICAgICAgIHNpZ251cDogc2lnbnVwLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIGdldFVzZXJCb29raW5nczogZ2V0VXNlckJvb2tpbmdzLFxyXG4gICAgICAgICAgICBjaGFuZ2VVc2VyRGV0YWlsczogY2hhbmdlVXNlckRldGFpbHMsXHJcbiAgICAgICAgICAgIGNoYW5nZVBhc3N3b3JkOiBjaGFuZ2VQYXNzd29yZCxcclxuICAgICAgICAgICAgZ2V0VXNlclJvbGU6IGdldFVzZXJSb2xlLFxyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZFxyXG4gICAgICAgIH1cclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDguMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ29mZmVyU3ZjJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIHZhciBjaG9zZW5Sb29tID0ge307XHJcbiAgICAgICAgdmFyIGV4dHJhcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgY2hvb3NlUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgIGNob29zZW5Sb29tID0gcm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNob29zZW5Sb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0RXh0cmFzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuZXh0cmFzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGNob29zZVJvb206IGNob29zZVJvb20sXHJcbiAgICAgICAgICAgIGdldFJvb206IGdldFJvb20sXHJcbiAgICAgICAgICAgIGdldEV4dHJhczogZ2V0RXh0cmFzLFxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3Jvb21TZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWRSb29tID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb21zID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZmluZFJvb21zJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb2JyYW5vIHBva29qZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJvb21zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJvb2tSb29tID0gZnVuY3Rpb24gKGRhdGEpIHsvL1RPRE8gemphxIXEhyBzacSZXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3Jlc2VydmUnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXRlbSBwcnplZCBwb3N0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jYW5jZWxCb29raW5nJyx7cm9vbV9pZDogcm9vbV9pZCwgYm9va2luZ19pZDogYm9va2luZ19pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzb2x2ZSBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWplY3QgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxSb29tcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRSb29tcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKHJvb21faWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0Um9vbUJvb2tpbmdzJywge3Jvb21faWQ6IHJvb21faWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGFbMF0ucmVzZXJ2YXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YVswXSlcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0VXNlckluZm8nLCB7ZW1haWw6IHVzZXJ9KS50aGVuKGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF1c2VySW5mby5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVzZXJJbmZvLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHVzZXJJbmZvLmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh1c2VySW5mby5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cEFuZEJvb2sgPSBmdW5jdGlvbiAodXNlciwgaWQsIGRhdGVzLCBwcmljZSwgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4dHJhcyk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cEFuZEJvb2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHVzZXIucGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGRhdGVzLmRhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBkYXRlcy5kYXRlVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhczogZXh0cmFzXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25pZSB1ZGHFgm8gc2nEmScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBhZG1pbkJvb2sgPSBmdW5jdGlvbiAoaWQsIGVtYWlsLCBkYXRlcywgcHJpY2UsIGV4dHJhcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNlcndpczogcm9vbVN2YywgZnVua2NqYTogYWRtaW5Cb29rIHwgaWQ6XCIraWQrXCIsIGVtYWlsOiBcIitlbWFpbCk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2FkbWluQm9vaycsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGRhdGVzLmRhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBkYXRlcy5kYXRlVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhczogZXh0cmFzXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdPSycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyByZXplcndhY2ppJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyByZXplcndhY2ppJyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRVc2VycycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgPSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnTmllIHpuYWxlemlvbm8gdcW8eXRrb3duaWvDs3cnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoJ05pZSB6bmFsZXppb25vIHXFvHl0a293bmlrw7N3JylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHBheSA9IGZ1bmN0aW9uIChyZXNlcnZhdGlvbl9pZCwgcGF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3BhaWQnLCB7aWQ6IHJlc2VydmF0aW9uX2lkLCBwYXk6IHBheX0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0Um9vbXM6IGdldFJvb21zLFxyXG4gICAgICAgICAgICBnZXRBbGxSb29tczogZ2V0QWxsUm9vbXMsXHJcbiAgICAgICAgICAgIGJvb2tSb29tOiBib29rUm9vbSxcclxuICAgICAgICAgICAgY2FuY2VsQm9va2luZzogY2FuY2VsQm9va2luZyxcclxuICAgICAgICAgICAgZ2V0Um9vbUJvb2tpbmdzOiBnZXRSb29tQm9va2luZ3MsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiBnZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgc2lnbnVwQW5kQm9vazogc2lnbnVwQW5kQm9vayxcclxuICAgICAgICAgICAgYWRtaW5Cb29rOiBhZG1pbkJvb2ssXHJcbiAgICAgICAgICAgIGdldFVzZXJzOiBnZXRVc2VycyxcclxuICAgICAgICAgICAgcGF5OiBwYXlcclxuICAgICAgICB9XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTIuMTIuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3ZvdWNoZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzYXZlVm91Y2hlcnMgPSBmdW5jdGlvbiAodm91Y2hlcnMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codm91Y2hlcnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zYXZlVm91Y2hlcnMnLCB2b3VjaGVycykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGVja1ZvdWNoZXIgPSBmdW5jdGlvbiAodm91Y2hlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGVja1ZvdWNoZXInLCB7dm91Y2hlckNvZGU6IHZvdWNoZXJ9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmIChuZXcgRGF0ZShyZXN1bHQuZGF0YS52b3VjaGVyLmV4cGlyeURhdGUpIDwgbmV3IERhdGUoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1Rlcm1pbiBtaW7EhScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgcmVzdWx0LmRhdGEudm91Y2hlci51c2VkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdLb2Qgem9zdGHFgiBqdcW8IHd5a2/FvHlzdGFueScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgIXJlc3VsdC5kYXRhLnZvdWNoZXIudXNlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEudm91Y2hlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzYXZlVm91Y2hlcnM6IHNhdmVWb3VjaGVycyxcclxuICAgICAgICAgICAgY2hlY2tWb3VjaGVyOiBjaGVja1ZvdWNoZXJcclxuICAgICAgICB9XHJcbiAgICB9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
