var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.token&&(o.headers.Authorization=e.localStorage.token),o}}}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("test",{url:"/test",templateUrl:"test"}),o.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,o,t){e.$state=o,e.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,o,t,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,s){if(e){var c={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(c).then(function(e){o.reload()})}},e.cancelBooking=function(e,t){console.log("room id to:"+e+", booking_id to:"+t),n.cancelBooking(e,t).then(function(e){console.log("udało się anulować"),o.reload()})};var a=function(){t.getUserBookings().then(function(o){console.log(o),e.userBookings=o})},r=function(){t.getUserInfo().then(function(o){console.log(o),e.firstName=o.firstName,e.lastName=o.lastName,e.email=o.email,e.phone=o.phone})};e.changePassword=function(o,n,a){o&&t.changePassword(n,a).then(function(o){console.log(o.msg),e.successfulPasswordChange=!0},function(o){e.wrongPassword=!0})},e.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,o,t,n,a,r,s,c){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.submitError=!1,o.errorMessage="",s.isLoggedIn=function(){return c.isAuthenticated},s.isLoggedIn()&&c.getUserRole().then(function(e){s.role=e.role}),o.signin=function(){console.log("login"),c.signin(o.user).then(function(e,o){s.isLogedIn=!0,c.getUserRole().then(function(e){s.role=e.role}),n.location.reload(),console.log(e)})},o.signout=function(){c.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},o.getUserInfo=function(){c.getUserInfo().then(function(e){console.log(e),o.userinfo=e})},o.submitForm=function(e){e?c.signup(o.user).then(function(e){console.log("Pomyślnie zarejestrowano"),o.submitError=!1,c.signin(o.user).then(function(e,o){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:o.submitError=!0,o.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},o.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService","voucherService",function(e,o,t,n,a,r,s,c,i,u){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays,r.price=JSON.parse(a.get("price"));var l=function(){c.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):i.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:d(),extras:r.extras}).then(function(){s.discount&&u.useVoucher(s.discount.code).then(function(e){n.go("successfulBooking")},function(e){console.log(e)})},function(e){})},r.toPrevious=function(){n.go("offer")};var d=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(o){e+=o.price*r.numOfDays}),e};l()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,n){n.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,o,t,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$rootScope","$cookies","$state","$location","$window","offerSvc",function(e,o,t,n,a,r,s){e.offer={},e.extras=[],e.selectedExtras=[];var c={};e.dateFrom="",e.dateTo="",e.roomName="";var i=function(){e.offer=JSON.parse(t.get("room")),e.extras=l(),c=JSON.parse(t.get("dates")),e.dateFrom=u(new Date(c.dateFrom)),e.dateTo=u(new Date(c.dateTo)),e.roomName=e.offer.room.type,e.roomPrice=e.offer.room.price*d(),e.extrasTotalPrice=0,e.calculateTotalPrice()},u=function(e){var o=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+o+"-"+t+"-"+n};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*d()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*d()),e.calculateTotalPrice()},e.toConfirmation=function(){console.log("asdasd");var o={extras:e.selectedExtras,numOfDays:d()};t.put("extras",JSON.stringify(o)),t.put("price",JSON.stringify(e.totalPrice)),n.go("confirmation")},e.toPrevious=function(){n.go("home")},e.calculateTotalPrice=function(){void 0!=o.discount&&"zl"==o.discount.type?e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice-o.discount.amount:void 0!=o.discount&&"%"==o.discount.type?(e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice,e.totalPrice=e.totalPrice-e.totalPrice*(o.discount.amount/100)):(e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice,console.log(e.extrasTotalPrice))};var l=function(){s.getExtras().then(function(o){e.extras=o;for(var t=0;t<e.extras.length;t++)e.extras[t].buttonText="Dodaj +",e.extras[t].buttonToggle=!1})};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,e.totalPrice=0,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*d()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*d()),e.calculateTotalPrice()};var d=function(){var e=864e5,o=new Date(c.dateFrom),t=new Date(c.dateTo),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/e)};o.$watch("discount",function(){e.calculateTotalPrice()}),i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$rootScope","$window","$location","roomService","voucherService","offerSvc","$filter","$state",function(e,o,t,n,a,r,s,c,i,u,l){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.totalPrice=0,t.extras=[],t.selectedExtras=[],t.extrasTotalPrice=0,t.selectOrAddUser=void 0,t.select=function(e){t.selectedRoom=e};var d=function(){var e=new Date;t.dateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.dateTo=o};t.init=function(){d(),t.findRooms()},t.findRooms=function(){if(t.dateFrom.getMonth()>=t.dateTo.getMonth()&&t.dateFrom.getDate()>=t.dateTo.getDate()){var e=new Date;e.setDate(t.dateFrom.getDate()+1),e.setMonth(t.dateFrom.getMonth()),t.dateTo=e}s.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(e){e.length>0?(t.rooms=e,t.noRoomsError=!1):t.noRoomsError=!0},function(e){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(e){o.put("room",JSON.stringify({room:{id:e._id,type:e.type,price:e.price}})),o.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),i.chooseRoom(e),l.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()},t.getAllRooms=function(){s.getAllRooms().then(function(e){t.allRooms=e,console.log(e)},function(e){})},t.dateChanged=function(){if(t.dateFrom.getMonth()>=t.dateTo.getMonth()&&t.dateFrom.getDate()>=t.dateTo.getDate()){var e=new Date;e.setDate(t.dateFrom.getDate()+1),e.setMonth(t.dateFrom.getMonth()),t.dateTo=e}},t.getAvailability=function(e){for(var o=(new Date,new Date(t.dateFrom)),n=new Date(t.dateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),s=new Date(e[a].to);if(o<s&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){d(),t.getAllRooms()},t.toBookings=function(e){o.put("selectedRoom",JSON.stringify({_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price})),$("#regulamin").modal("hide"),setTimeout(function(){l.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(o.get("selectedRoom"))},t.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},t.cancelBooking=function(e,o){console.log("room id to:"+e+", booking_id to:"+o),s.cancelBooking(e,o).then(function(e){console.log("udało się anulować"),l.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),s.getRoomBookings(t.selectedRoom._id).then(function(e){t.bookings=e.reservations})},t.selectUser=function(e){s.getUserInfo(e).then(function(e){t.selectedUser=e,console.log(t.selectedUser)})},t.toBooking=function(e,t,n){o.put("booking",JSON.stringify({room:{_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price},dateFrom:t,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){l.go("test")},500)},t.initBooking=function(){t.booking=JSON.parse(o.get("booking")),t.test.dateFrom=new Date(t.booking.dateFrom),t.test.dateTo=new Date(t.booking.dateTo),t.calculateTotalPrice(),f(),s.getUsersEmails().then(function(e){t.users=JSON.parse(JSON.stringify(e))})},t.submitBookForm=function(){var e=null;if(t.selectOrAddUser){if(void 0==t.test.email)var e={email:""+t.test.firstName+t.test.lastName+t.test.phone,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};else var e={email:t.test.email,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};s.signupAndBook(e,t.booking.room._id,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){n.discount&&c.useVoucher(n.discount.code).then(function(e){},function(e){console.log(e)})})}else e=JSON.parse(t.selectedUserBooking),s.adminBook(t.booking.room._id,e.email,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){n.discount&&c.useVoucher(n.discount.code).then(function(e){},function(e){console.log(e)})})};var g=function(){var e=864e5,o=new Date(t.test.dateFrom),n=new Date(t.test.dateTo),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};t.calculateTotalPrice=function(){t.booking&&(void 0!=n.discount&&"zl"==n.discount.type?t.totalPrice=g()*t.booking.room.price+t.extrasTotalPrice-n.discount.amount:void 0!=n.discount&&"%"==n.discount.type?(t.totalPrice=g()*t.booking.room.price+t.extrasTotalPrice,t.totalPrice=t.totalPrice-t.totalPrice*(n.discount.amount/100)):(t.totalPrice=g()*t.booking.room.price+t.extrasTotalPrice,console.log(t.extrasTotalPrice)))};var f=function(){i.getExtras().then(function(e){t.extras=e;for(var o=0;o<t.extras.length;o++)t.extras[o].buttonText="Dodaj +",t.extras[o].buttonToggle=!1})};t.addOrRemoveExtra=function(e){var o=t.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t.totalPrice=0,o==-1?(t.selectedExtras.push(e),t.extrasTotalPrice+=e.price*g()):(t.selectedExtras.splice(o,1),t.extrasTotalPrice-=e.price*g()),t.calculateTotalPrice()},t.paidClass=function(e){return e?"btn-success":"btn-warning"},t.pay=function(e){s.pay(e._id,!e.paid).then(function(o){console.log(o),e.paid=!e.paid})},n.$watch("discount",function(){t.calculateTotalPrice()})}]),angular.module("app").controller("userCtrl",["$scope","$state","AuthService","roomService","userService",function(e,o,t,n,a){a.getAllUsers().then(function(o){e.users=o,console.log(e.users)})}]),angular.module("app").controller("voucherCtrl",["$scope","$rootScope","voucherService",function(e,o,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var o="",t=0;t<e.length;t++){if(!n(e.charAt(t)))return o=Number(o);o+=e.charAt(t)}return o=Number(o)}e.generateVouchers=function(){e.vouchers={codes:[]};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.voucherExpiryDate;if(t<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var n="",r=0;r<4;r++){for(var s=0;s<5;s++)n+=o.charAt(Math.floor(Math.random()*o.length));3!=r&&(n+="-")}e.vouchers.codes.push(n)}var c=e.discount.charAt(e.discount.length-1);"%"===c?e.vouchers.discountType="%":"ł"===c&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=a(e.discount),e.vouchers.expiryDate=t,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){console.log(e.vouchers),t.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){console.log(e.voucher),t.checkVoucher(e.voucher.toString()).then(function(t){console.log(t),e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+t.discount+t.discountType,o.discount={amount:t.discount,type:t.discountType,code:e.voucher},console.log(t.discount)},function(t){console.log(t),o.discount=void 0,e.voucherNotFound=t,e.voucherFound=void 0})},e.codeChanged=function(){e.bookingFrm.$valid||(e.voucherFound=void 0,e.voucherNotFound=void 0,o.discount=void 0)}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,o){if(angular.isArray(e)){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a][o];angular.isUndefined(n[r])&&(n[r]=!0,t.push(e[a]))}return t}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,o,t){function n(){var e=window.localStorage.getItem(i);console.log("loading User info..."),e&&s(e)}function a(){c=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(i)}function r(e){window.localStorage.setItem(i,e),s(e)}function s(o){u=!0,c=o,e.defaults.headers.common.Authorization=c}var c,i="token",u=!1,l=function(t){return o(function(o,n){e.post("/api/authenticate",t).then(function(e){e.data.success?(r(e.data.token),o(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},g=function(t){return o(function(o,n){e.post("/api/signup",t).then(function(e){e.data.success?(console.log("jestem w resolve"),o(e.data.msg)):n(e.data.msg)})})};n();var f=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):t(e.data.msg)})})},m=function(){return o(function(o,t){e.get("/api/getUserBookings").then(function(e){o(e.data)})})},p=function(t){return o(function(o,a){e.post("/api/test",t).then(function(s){s.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:t.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),o({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return o(function(o,a){e.post("/api/change-password",{oldPass:t,newPass:n}).then(function(e){e.data.success?o({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({role:e.data.role}):t(e.data.msg)})})};return{signin:l,signout:d,signup:g,getUserInfo:f,getUserBookings:m,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,o){var t=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,t){o.get("/api/getExtras").then(function(o){o.data.success?e(o.data.extras):t(o.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,o){var t=function(t){return e(function(e,n){o.post("/api/findRooms",t).then(function(o){o.data.success?(console.log("Pobrano pokoje"),e(o.data.rooms)):n(o.data.error)})})},n=function(t){return e(function(e,n){o.post("/api/reserve",t).then(function(o){o.data.success?e(o.data.success):n(o.data.error)})})},a=function(t,n){return e(function(e,a){console.log("jetem przed post cancel"),o.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(o){o.data.success?(console.log("resolve cancel"),e(o.data.success)):(console.log("reject cancel"),a(o.data.error))})})},r=function(){return e(function(e,t){o.get("/api/getRooms").then(function(o){o.data.success?e(o.data.result):t(o.data.error)})})},s=function(t){return e(function(e,n){o.post("/api/getRoomBookings",{room_id:t}).then(function(o){console.log(o.data[0].reservations),e(o.data[0])},function(e){n(e.data)})})},c=function(t){return e(function(e,n){o.post("/api/getUserInfo",{email:t}).then(function(o){o.data.error?n(o.data):e(o.data)},function(e){n(e.data)})})},i=function(t,n,a,r,s){return console.log(s),e(function(e,c){o.post("/api/signupAndBook",{firstName:t.firstName,lastName:t.lastName,email:t.email,number:t.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(o){e("OK")},function(e){c("Wystąpił błąd podczas rezerwacji")})})},u=function(t,n,a,r,s){return console.log("Serwis: roomSvc, funkcja: adminBook | id:"+t+", email: "+n),e(function(e,c){o.post("/api/adminBook",{id:t,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(o){o.data.success?e("OK"):c("Wystąpił błąd podczas rezerwacji")},function(e){c("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,t){o.get("/api/getUsersEmails").then(function(o){(o.data.success=!1)?t("Nie znaleziono użytkowników"):e(o.data)},function(e){t("Nie znaleziono użytkowników")})})},d=function(t,n){return e(function(e,a){o.post("/api/paid",{id:t,pay:n}).then(function(o){o.data.success?e(!0):a(!1)})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s,getUserInfo:c,signupAndBook:i,adminBook:u,getUsersEmails:l,pay:d}}]),angular.module("app").service("userService",["$q","$http",function(e,o){var t=function(){return e(function(e,t){o.get("/api/getAllUsers").then(function(o){e(o.data)},function(e){t(e.data)})})};return{getAllUsers:t}}]),angular.module("app").service("voucherService",["$q","$http",function(e,o){var t=function(t){return console.log(t),e(function(e,n){o.post("/api/saveVouchers",t).then(function(o){o.data.success?e(o.data.msg):n(o.data.msg)},function(e){n(e.data.msg)})})},n=function(t){return e(function(e,n){o.post("/api/checkVoucher",{voucherCode:t}).then(function(o){o.data.success&&new Date(o.data.voucher.expiryDate)<new Date?n("Termin miną"):o.data.success&&o.data.voucher.used?n("Kod został już wykożystany"):o.data.success&&!o.data.voucher.used?e(o.data.voucher):n(o.data.error)})})},a=function(t){return e(function(e,n){o.post("/api/useVoucher",{code:t}).then(function(o){o.data.success?e("Klucz wykorzystany."):n(o.data.error)})})};return{saveVouchers:t,checkVoucher:n,useVoucher:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy91c2VyQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3ZvdWNoZXJDb250cm9sbGVyLmpzIiwiZmlsbHRlcnMvcm9vbUZpbHRlci5qcyIsInNlcnZpY2VzL2F1dGhvcml6YXRpb24uc3ZjLmpzIiwic2VydmljZXMvb2ZmZXIuc3ZjLmpzIiwic2VydmljZXMvcm9vbS5zdmMuanMiLCJzZXJ2aWNlcy91c2VyLnN2Yy5qcyIsInNlcnZpY2VzL3ZvdWNoZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwibG9jYWxTdG9yYWdlIiwidG9rZW4iLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRzY29wZSIsIkF1dGhTZXJ2aWNlIiwicm9vbVNlcnZpY2UiLCJyZWdleCIsImlzQWN0aXZlIiwidmlld0xvY2F0aW9uIiwiJGxvY2F0aW9uIiwicGF0aCIsImNoYW5nZVVzZXJEZXRhaWxzIiwiaXNWYWxpZCIsImZOYW1lIiwibE5hbWUiLCJuRW1haWwiLCJuUGhvbmUiLCJuZXdEZXRhaWxzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lTnVtYmVyIiwidGhlbiIsImEiLCJyZWxvYWQiLCJjYW5jZWxCb29raW5nIiwicm9vbV9pZCIsImJvb2tpbmdfaWQiLCJjb25zb2xlIiwibG9nIiwiZ2V0VXNlckJvb2tpbmdzIiwibXNnIiwidXNlckJvb2tpbmdzIiwiZ2V0SW5mbyIsImdldFVzZXJJbmZvIiwidXNlciIsInBob25lIiwiY2hhbmdlUGFzc3dvcmQiLCJ2YWxpZCIsIm9sZFAiLCJuZXdQIiwicmVzIiwic3VjY2Vzc2Z1bFBhc3N3b3JkQ2hhbmdlIiwicmVqIiwid3JvbmdQYXNzd29yZCIsImNoZWNrRGF0ZSIsImRhdGUiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJkYXRlRnJvbSIsIiRxIiwiJHJvdXRlIiwic3VibWl0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpc0xvZ2dlZEluIiwiaXNBdXRoZW50aWNhdGVkIiwiZ2V0VXNlclJvbGUiLCJyZXN1bHQiLCJyb2xlIiwic2lnbmluIiwic3VjY2VzcyIsImlzTG9nZWRJbiIsImxvY2F0aW9uIiwic2lnbm91dCIsImdvIiwidXNlcmluZm8iLCJzdWJtaXRGb3JtIiwic2lnbnVwIiwiZGF0YSIsInRvU3RyaW5nIiwiY29kZSIsIiR3YXRjaCIsIiRjb29raWVzIiwidm91Y2hlclNlcnZpY2UiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsInByaWNlIiwiaW5pdCIsInJlc2VydmUiLCJ0ZXJtcyIsImFsZXJ0IiwiYm9va1Jvb20iLCJpZCIsIl9pZCIsImZyb20iLCJ0byIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJkaXNjb3VudCIsInVzZVZvdWNoZXIiLCJ2UmVzdWx0IiwiZXJyb3IiLCJ0b1ByZXZpb3VzIiwidG90YWwiLCJmb3JFYWNoIiwiZSIsImRpcmVjdGl2ZSIsInJlcXVpcmUiLCJzY29wZSIsIm90aGVyTW9kZWxWYWx1ZSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cmlidXRlcyIsIm5nTW9kZWwiLCIkdmFsaWRhdG9ycyIsImNvbXBhcmVUbyIsIm1vZGVsVmFsdWUiLCIkdmFsaWRhdGUiLCJ0ZW1wbGF0ZSIsImF0dHIiLCJtQ3RybCIsInZhbGlkYXRpb24iLCJ2b3VjaGVyIiwibGVuZ3RoIiwiY2hhckF0IiwiJHNldFZhbGlkaXR5IiwiJHBhcnNlcnMiLCJwdXNoIiwib2ZmZXJTdmMiLCJvZmZlciIsInNlbGVjdGVkRXh0cmFzIiwiZGF0ZXMiLCJyb29tTmFtZSIsInNob3dPZmZlciIsImdldEV4dHJhcyIsImRhdGVQcmVldGlmeSIsInR5cGUiLCJyb29tUHJpY2UiLCJjYWxjdWxhdGVEaWZmT2ZEYXlzIiwiZXh0cmFzVG90YWxQcmljZSIsImRheSIsImdldFVUQ0RhdGUiLCJtb250aCIsImdldFVUQ01vbnRoIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiYWRkT3JSZW1vdmVFeHRyYSIsImV4dHJhIiwiaW5kZXgiLCJpbmRleE9mIiwiYnV0dG9uVGV4dCIsImJ1dHRvblRvZ2dsZSIsInNwbGljZSIsInRvQ29uZmlybWF0aW9uIiwicHV0Iiwic3RyaW5naWZ5IiwidG90YWxQcmljZSIsInVuZGVmaW5lZCIsImFtb3VudCIsImV4dHJhc0RhdGEiLCJpIiwiTVNfUEVSX0RBWSIsImRhdGVGcm9tVVRDIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkYXRlVG9VVEMiLCJNYXRoIiwiZmxvb3IiLCIkZmlsdGVyIiwibm9Sb29tc0Vycm9yIiwiZXJyb3JNc2ciLCJyb29tcyIsIm51bWJlck9mQmVkcyIsInN1Y2Nlc3NmdWxDYW5jZWwiLCJzZWxlY3RPckFkZFVzZXIiLCJzZWxlY3QiLCJzZWxlY3RlZFJvb20iLCJzZXREYXRlIiwiZGF0ZVRlbXAiLCJmaW5kUm9vbXMiLCJzZXRNb250aCIsImdldFJvb21zIiwidG9JU09TdHJpbmciLCJiZWRzIiwicm9vbXNEYXRhIiwiYWRkUm9vbSIsImNob29zZVJvb20iLCJ0ZXN0IiwiZ2V0QWxsUm9vbXMiLCJhbGxSb29tcyIsImRhdGVDaGFuZ2VkIiwiZ2V0QXZhaWxhYmlsaXR5IiwicmVzZXJ2YXRpb25zIiwicm9vbURhdGVGcm9tIiwicm9vbURhdGVUbyIsIm1hbmFnbWVudEluaXQiLCJ0b0Jvb2tpbmdzIiwibnVtYmVyIiwiJCIsIm1vZGFsIiwic2V0VGltZW91dCIsImdldFNlbGVjdGVkUm9vbSIsImdldFJvb21Cb29raW5ncyIsImIiLCJib29raW5ncyIsInNlbGVjdFVzZXIiLCJ1Iiwic2VsZWN0ZWRVc2VyIiwidG9Cb29raW5nIiwiaW5pdEJvb2tpbmciLCJib29raW5nIiwiZ2V0VXNlcnNFbWFpbHMiLCJ1c2VycyIsInN1Ym1pdEJvb2tGb3JtIiwic2lnbnVwQW5kQm9vayIsInNlbGVjdGVkVXNlckJvb2tpbmciLCJhZG1pbkJvb2siLCJwYWlkQ2xhc3MiLCJwYWlkIiwicGF5IiwidXNlclNlcnZpY2UiLCJnZXRBbGxVc2VycyIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImNvbnZlcnRUb051bWJlciIsIk51bWJlciIsImdlbmVyYXRlVm91Y2hlcnMiLCJ2b3VjaGVycyIsImNvZGVzIiwicG9zc2libGUiLCJleHBpcnlEYXRlIiwidm91Y2hlckV4cGlyeURhdGUiLCJ2b3VjaGVyRXJyb3IiLCJ2b3VjaGVyc0dlbmVyYXRlZCIsImdlbmVyYXRlZFZvdWNoZXJzIiwibnVtYmVyT2ZWb3VjaGVycyIsImoiLCJyYW5kb20iLCJsYXN0IiwiZGlzY291bnRUeXBlIiwidm91Y2hlcnNTYXZlZCIsInNhdmVWb3VjaGVycyIsImNoZWNrVm91Y2hlciIsInZvdWNoZXJOb3RGb3VuZCIsInZvdWNoZXJGb3VuZCIsImNvZGVDaGFuZ2VkIiwiYm9va2luZ0ZybSIsIiR2YWxpZCIsImZpbHRlciIsInByb3BlcnR5TmFtZSIsImlzQXJyYXkiLCJrZXlzIiwidmFsIiwiaXNVbmRlZmluZWQiLCJzZXJ2aWNlIiwiJGh0dHAiLCJsb2FkVXNlckluZm8iLCJ3aW5kb3ciLCJnZXRJdGVtIiwiTE9DQUxfVE9LRU4iLCJ1c2VySW5mbyIsImRlc3Ryb3lVc2VySW5mbyIsImF1dGhUb2tlbiIsImRlZmF1bHRzIiwiY29tbW9uIiwicmVtb3ZlSXRlbSIsInN0b3JlVXNlckluZm8iLCJzZXRJdGVtIiwicmVzb2x2ZSIsInJlamVjdCIsInBvc3QiLCJyZXN1bHQyIiwib2xkUGFzcyIsIm5ld1Bhc3MiLCJjaG9vc2VuUm9vbSIsImdldFJvb20iLCJyZXNlcnZhdGlvbl9pZCIsInZvdWNoZXJDb2RlIiwidXNlZCJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxhQ0FBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsbUJBQUEsVUFBQSxTQUFBQyxHQUNBLE9BQ0FDLFFBQUEsU0FBQUMsR0FNQSxNQUxBQSxHQUFBQyxRQUFBRCxFQUFBQyxZQUNBSCxFQUFBSSxhQUFBQyxRQUNBSCxFQUFBQyxRQUFBLGNBQUFILEVBQUFJLGFBQUFDLE9BR0FILE9BS0FBLFFBQUEsaUJBQUEscUJBQUEsU0FBQUksRUFBQUMsR0FDQUQsRUFDQUUsTUFBQSxRQUNBQyxJQUFBLFFBQ0FDLFdBQUEsV0FDQUMsWUFBQSxTQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUUsWUFBQSxVQUVBSCxNQUFBLGNBQ0FDLElBQUEsY0FDQUUsWUFBQSxlQUVBSCxNQUFBLFdBQ0FDLElBQUEsV0FDQUUsWUFBQSxZQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUMsV0FBQSxZQUNBQyxZQUFBLFVBRUFILE1BQUEsZ0JBQ0FDLElBQUEsZ0JBQ0FFLFlBQUEsaUJBRUFILE1BQUEscUJBQ0FDLElBQUEscUJBQ0FFLFlBQUEsc0JBRUFILE1BQUEsb0JBQ0FDLElBQUEsb0JBQ0FFLFlBQUEscUJBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsb0JBQ0FDLElBQUEs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QyxHQUNBZCxFQUFBZSxLQUFBLG1CQUFBeE0sS0FBQStDLElBQUEvRixLQUFBLFNBQUFtQyxHQUNBQSxFQUFBVyxLQUFBUixRQUNBZ04sRUFBQSx1QkFFQUMsRUFBQXBOLEVBQUFXLEtBQUE0QixXQUtBLFFBQ0FpSixhQUFBQSxFQUNBQyxhQUFBQSxFQUNBcEosV0FBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDIyLjA5LjIwMTYuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdSb3V0ZScsICd1aS5yb3V0ZXInLCAnbmdDb29raWVzJ10pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBmdW5jdGlvbiAoJHdpbmRvdykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21haW4nLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Jvb21DdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFpbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdyb29tcycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Jvb21zJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncm9vbXMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncmVzdGF1cmFudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Jlc3RhdXJhbnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdyZXN0YXVyYW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRhY3QnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb250YWN0JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGFjdCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdvZmZlcicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL29mZmVyJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdvZmZlckN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdvZmZlcidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb25maXJtYXRpb24nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb25maXJtYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bEJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdWNjZXNzZnVsQm9va2luZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N1Y2Nlc3NmdWxTaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdWNjZXNzZnVsU2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bFNpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYWNjb3VudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FjY291bnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbmluJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbmluJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbmluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NpZ251cCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmJvb2tpbmdzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYm9va2luZ3MnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdib29raW5ncydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmRldGFpbHMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZGV0YWlscydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmNoYW5nZVBhc3N3b3JkJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY2hhbmdlUGFzc3dvcmQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjaGFuZ2VQYXNzd29yZCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnJvb21zJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXJvb21zJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXJvb21zJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC51c2Vycycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC11c2VycycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC11c2VycydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQudm91Y2hlcnMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtdm91Y2hlcnMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtdm91Y2hlcnMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LWJvb2tpbmdzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC1ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9tYW5hZ21lbnQtYm9va2luZ3MnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgndGVzdCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Rlc3QnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZXN0J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL21haW4nKVxyXG4gICAgfSlcclxuICAgIC5ydW4oWyckcm9vdFNjb3BlJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLFxyXG4gICAgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kc3RhdGUgPSAkc3RhdGU7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kc3RhdGVQYXJhbXMgPSAkc3RhdGVQYXJhbXM7XHJcblxyXG4gICAgfV0pO1xyXG4gICAgLypcclxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnYXV0aEludGVyY2VwdG9yJyk7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9tYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3NpZ251cCcsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3NpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zaWduaW4nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3NpZ25pbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy91c2VyaW5mbycsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3VzZXJpbmZvJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3N1Y2Nlc3NmdWxTaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvb2ZmZXInLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3N1Y2Nlc3NmdWxCb29raW5nJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm90aGVyd2lzZSgnLycpO1xyXG4gICAgfSk7XHJcbiovXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2FjY0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsIEF1dGhTZXJ2aWNlLCByb29tU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUucmVnZXggPSAnKFxcXFwrWzAtOV1cXFxcZHsxfSkqKFxcXFxzKSooWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pJztcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh2aWV3TG9jYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZpZXdMb2NhdGlvbiA9PT0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uKGlzVmFsaWQsIGZOYW1lLCBsTmFtZSwgbkVtYWlsLCBuUGhvbmUpe1xyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdEZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogZk5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IGxOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBuRW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG5QaG9uZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVVzZXJEZXRhaWxzKG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHByenljaXNrIGFudWxvd2FuaWEgdHlsa28gZGxhIHBva29pLCBrdMOzcnljaCBkYXRhIG5hIHRvIHBvendhbGFcclxuICAgICAgICAkc2NvcGUuY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicm9vbSBpZCB0bzpcIityb29tX2lkK1wiLCBib29raW5nX2lkIHRvOlwiK2Jvb2tpbmdfaWQpO1xyXG5cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuY2FuY2VsQm9va2luZyhyb29tX2lkLCBib29raW5nX2lkKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndWRhxYJvIHNpxJkgYW51bG93YcSHJyk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckJvb2tpbmdzKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJCb29raW5ncyA9IG1zZztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGhvbmUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB1c3Rhd2ljIHBhc3N5IG5hIHplcm8gcG8gxbzEhWRhbml1IGhodHBcclxuICAgICAgICAkc2NvcGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAodmFsaWQsb2xkUCwgbmV3UCkge1xyXG4gICAgICAgICAgICBpZih2YWxpZCl7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VQYXNzd29yZChvbGRQLCBuZXdQKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMubXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Y2Nlc3NmdWxQYXNzd29yZENoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChyZWopIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUud3JvbmdQYXNzd29yZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNoZWNrRGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUZyb20gPiBjdXJyZW50RGF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgZ2V0SW5mbygpO1xyXG4gICAgICAgIGdldFVzZXJCb29raW5ncygpO1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdhdXRoQ3RybCcsIGZ1bmN0aW9uICgkcSwgJHNjb3BlLCAkc3RhdGUsICR3aW5kb3csICRsb2NhdGlvbiwgJHJvdXRlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSkge1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJyhcXFxcK1swLTldXFxcXGR7MX0pKihcXFxccykqKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KSc7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnJztcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGlmKCRyb290U2NvcGUuaXNMb2dnZWRJbigpKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIFxyXG4gICAgICAgICRzY29wZS5zaWduaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbicpO1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvJztcclxuICAgICAgICAgICAgICAgIC8vJHN0YXRlLmdvKCdob21lJyk7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbm91dCgpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIC8vc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgLy8kc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dvdXQnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJpbmZvID0gbXNnO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvL1RPRE8gc3RhdGUucmVsb2FkXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ251cCgkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb215xZtsbmllIHphcmVqZXN0cm93YW5vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbmluKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChtc2csIHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkd2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKCkgPT0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS8jL2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxTaWdudXAnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy9zdWNjZXNzZnVsU2lnbnVwJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmNvZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExMDAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnV3licmFueSBlbWFpbCBqZXN0IGp1xbwgemFyZWplc3Ryb3dhbnkuIFByb3N6xJkgd3licmHEhyBpbm55Lic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3VibWl0RXJyb3InLCBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdjb25maXJtYXRpb25DdHJsJywgZnVuY3Rpb24gKCRxLCAkd2luZG93LCAkbG9jYXRpb24sICRzdGF0ZSwgJGNvb2tpZXMsICRzY29wZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlLCB2b3VjaGVyU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUuaXNTaWduZWRJbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAkc2NvcGUucm9vbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKS5kYXRlRnJvbTtcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVUbztcclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5leHRyYXM7XHJcbiAgICAgICAgJHNjb3BlLm51bU9mRGF5cyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdleHRyYXMnKSkubnVtT2ZEYXlzO1xyXG4gICAgICAgICRzY29wZS5wcmljZSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdwcmljZScpKTtcclxuXHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCA/ICRzY29wZS5pc1NpZ25lZEluID0gdHJ1ZSA6ICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5yZXNlcnZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkc2NvcGUudGVybXMgIT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdQcnplZCBwb3R3aWVyZHplbmllbSByZXplcndhY2ppIG5hbGXFvHkgemFha2NlcHRvd2HEh3JlZ3VsYW1pbi4nKTtcclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmJvb2tSb29tKHtpZDogJHNjb3BlLnJvb20uX2lkLCBmcm9tOiAkc2NvcGUuZGF0ZUZyb20sIHRvOiAkc2NvcGUuZGF0ZVRvLCBwcmljZTogY2FsY3VsYXRlVG90YWxQcmljZSgpLCBleHRyYXM6ICRzY29wZS5leHRyYXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyU2VydmljZS51c2VWb3VjaGVyKCRyb290U2NvcGUuZGlzY291bnQuY29kZSkudGhlbihmdW5jdGlvbiAodlJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bEJvb2tpbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHd5xZt3aWV0bGVuaWUgZXJycm9yYVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9vZmZlcidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdvZmZlcicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHRvdGFsID0gKCRzY29wZS5yb29tLnByaWNlICogJHNjb3BlLm51bU9mRGF5cyk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gZS5wcmljZSAqICRzY29wZS5udW1PZkRheXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB6cm9iaWVuaWUgcmVqZXN0cmFjamkobW/FvGUgcHJ6ZW5pZXNpZW5pZSBuYSBzaWdudXAgdmlldz8gZG8gcm96d2HFvGVuaWEpIGkgb2JzxYJ1Z2EgYsWCxJlkw7N3KG1vxbxlIGpha2/FmyBwb8WCxIVjennEhyBvYnlkd2EgbG9nb3dhbmlhIGkgcmVqZXN0cmFjamUgdyBqZWRubz8pXHJcbiAgICAgICAgLy9UT0RPIE9ic2x1Z2EgYmxlZG93IHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjemVnb3MgZG8gd2lkb2t1IHJlemVyd2FqY2lcclxuICAgICAgICAvL1RPRE8gcG91c8Ozd2HEhyBqYWtpZcWbIGluaXR5KHd5c3RhY3p5IHd5b8WCYcSHIGZ1bmtjasSZIHcga29udHJvbGVyemUgbHViIHNydilcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjYcWCZWogb2JzxYJ1Z2kga29udGEoem1pYW5hIGhhc8WCYSwgbnVtZXJ1IHRlbGVmb251W2RvZGFuaWUgbHViIHptaWFuYV0sIHBvZGdsxIVkdSByZXplcndhY2ppLCBpdHApIG9yYXogb2JzxYJ1Z2kgaG90ZWx1KENSVUQgZG9kYXRrw7N3LCBwb2tvamkgaXRwKS5cclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBtb8W8ZSBqYWtpxZsgd3lrcmVzw7N3IG5hIHRlbWF0IG9iY2nEhcW8ZW5pYSBwb2tvamkgbHViIGpha2nFmyBwcnp5Y2hvZMOzdyBjenkgY2/FmyBhbGJvIGphaWXFmyBjb8WbIGRvIGdlbmVyb3dhbmllIHBkZiB6IHJhcG9ydGVtXHJcbiAgICAgICAgLy9UT0RPIHBvem1pZW5pYcSHIHPFgm93YSByZXNlcnZhdGlvbiBpdHAgbmEgYm9va2luZ1xyXG4gICAgICAgIC8vVE9ETyBwb3dpYWRvbWllbmllIG8gY2lhc3RlY3prYWNoXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgcG9kZ2zEhWR1IG9ixYJvxbxlbmlhIGhvdGVsdSBqYWsgdyBraW5pKDMgc3Rhbnk6IHdvbG55LCB6YXJlemVyd293YW55LCB6YWpldHkpXHJcbiAgICAgICAgLy9UT0RPIHpiYWRhbmllIGN6eSAucnVuIHN0YXRlUHJvdmlkZXJhIHBvY3plYm5lXHJcbiAgICAgICAgLy9UT0RPIHBvem5hbmllIHN0YXRlUHJvdmlkZXJhIGkgZG9kYW5pZSBuZXN0ZWQgdmlld3NcclxuICAgICAgICAvL1RPRE8gbmEgZ8WCw7N3bmVqIHN0cm9uaWUgenJvYmnEh8W8ZWJ5IGRhdGEgYnnFgsSFIGNvbmFqbW5pZWogamVkZW4gZHppZW4gcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vVE9ETyB6bWlhbmEgcmVnZXggbmEgcm9vdFNjb3BlIGplc2xpIG1vemxpd2VcclxuICAgICAgICAvL1RPRG8gZGF0YSByZXplcndhY2ppIHR5bGtvIG9kIGRhdHkgZHppc2llanN6ZWogKGJleiByZXplcndhY2ppIHcgcHJ6ZXN6xYJvxZtjaSlcclxuICAgICAgICAvL1RPRE8ga29udG9cclxuICAgICAgICAvL3ptaWFuYSBkYW55Y2hcclxuICAgICAgICAvL3ptaWFuYSBoYXPFgmFcclxuICAgICAgICAvL3pvYmFjemVuaWUgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vYW51bG93YW5pZSByZXplcndhY2ppXHJcbiAgICAgICAgLy9cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdjb21wYXJlVG8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogXCJuZ01vZGVsXCIsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBvdGhlck1vZGVsVmFsdWU6IFwiPWNvbXBhcmVUb1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzLCBuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdG9ycy5jb21wYXJlVG8gPSBmdW5jdGlvbihtb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUgPT0gc2NvcGUub3RoZXJNb2RlbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goXCJvdGhlck1vZGVsVmFsdWVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKCd1c2VySW5mbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHA+c2lhbGFsYTwvcD4nXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIC8qXHJcbiAgICAuZGlyZWN0aXZlKCdteURpcmVjdGl2ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBteVZhbGlkYXRpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihcImVcIikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ2NoYXJFJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCdjaGFyRScsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbUN0cmwuJHBhcnNlcnMucHVzaChteVZhbGlkYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgKi9cclxuICAgIC5kaXJlY3RpdmUoJ3ZvdWNoZXJjaGVjaycsIGZ1bmN0aW9uICh2b3VjaGVyU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBtQ3RybCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGlvbih2b3VjaGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodm91Y2hlci5sZW5ndGggPT0gMjMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2b3VjaGVyLmNoYXJBdCg1KSA9PSAnLScgJiYgdm91Y2hlci5jaGFyQXQoMTEpICYmIHZvdWNoZXIuY2hhckF0KDE3KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm91Y2hlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1DdHJsLiRwYXJzZXJzLnB1c2godmFsaWRhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwOC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignb2ZmZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgJGNvb2tpZXMsICRzdGF0ZSwgJGxvY2F0aW9uLCAkd2luZG93LCBvZmZlclN2Yykge1xyXG4gICAgICAgICRzY29wZS5vZmZlciA9IHt9O1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMgPSBbXTtcclxuICAgICAgICB2YXIgZGF0ZXMgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21OYW1lID0gJyc7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2hvd09mZmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUub2ZmZXIgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgncm9vbScpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGdldEV4dHJhcygpO1xyXG5cclxuICAgICAgICAgICAgZGF0ZXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlRnJvbSA9IGRhdGVQcmVldGlmeShuZXcgRGF0ZShkYXRlcy5kYXRlRnJvbSkpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVUbykpO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnJvb21OYW1lID0gJHNjb3BlLm9mZmVyLnJvb20udHlwZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21QcmljZSA9ICRzY29wZS5vZmZlci5yb29tLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGVQcmVldGlmeSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMTtcclxuICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAnJytkYXkrJy0nK21vbnRoKyctJyt5ZWFyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcblxyXG4gICAgICAgICAgICBpZihpbmRleCA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMucHVzaChleHRyYSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSArPSAoZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9Db25maXJtYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhc2Rhc2QnKTtcclxuICAgICAgICAgICAgdmFyIGV4dHJhcyA9IHtleHRyYXM6ICRzY29wZS5zZWxlY3RlZEV4dHJhcywgbnVtT2ZEYXlzOiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCl9O1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2V4dHJhcycsIEpTT04uc3RyaW5naWZ5KGV4dHJhcykpO1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ3ByaWNlJywgSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnRvdGFsUHJpY2UpKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9jb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29uZmlybWF0aW9uJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9tYWluJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICd6bCcpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUub2ZmZXIucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSkgLSAkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkcm9vdFNjb3BlLmRpc2NvdW50ICE9IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLmRpc2NvdW50LnR5cGUgPT0gJyUnKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUub2ZmZXIucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9ICRzY29wZS50b3RhbFByaWNlIC0gKCRzY29wZS50b3RhbFByaWNlICogKCRyb290U2NvcGUuZGlzY291bnQuYW1vdW50IC8gMTAwKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZXMuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoZGF0ZXMuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCgnZGlzY291bnQnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBzaG93T2ZmZXIoKTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigncm9vbUN0cmwnLCBmdW5jdGlvbiAoJHEsICRjb29raWVzLCAkc2NvcGUsICRyb290U2NvcGUsICR3aW5kb3csICRsb2NhdGlvbiwgcm9vbVNlcnZpY2UsIHZvdWNoZXJTZXJ2aWNlLCBvZmZlclN2YywkZmlsdGVyLCAkc3RhdGUpIHtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1zZyA9Jyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21zID0gW107XHJcbiAgICAgICAgJHNjb3BlLm51bWJlck9mQmVkcyA9IDE7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWNjZXNzZnVsQ2FuY2VsID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAwO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdE9yQWRkVXNlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlRnJvbSA9IGRhdGU7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5maW5kUm9vbXMgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIG9nYXJuYWMgc2llIHogdHltIGJlZHMsIHd5c3p1a2l3YWMgcG9rb2plIG8gcG9kYW5laiBpbG9zY2kgb3NvYiBpIG5hendhYyB0byBqYWtvcyB3IGJhemllIG9zdGF0ZWN6bmllXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpID49ICRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpID49ICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKCRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXRNb250aCgkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbXMoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogJHNjb3BlLmRhdGVGcm9tLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB0bzogJHNjb3BlLmRhdGVUby50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgYmVkczogJHNjb3BlLm51bWJlck9mQmVkc1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyb29tc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJvb21zRGF0YS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yb29tcyA9IHJvb21zRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSAnQ2/FmyBwb3N6xYJvIG5pZSB0YWsuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncm9vbScsIEpTT04uc3RyaW5naWZ5KHtyb29tOiB7aWQ6IHJvb20uX2lkLCB0eXBlOiByb29tLnR5cGUsIHByaWNlOiByb29tLnByaWNlfX0pKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdkYXRlcycsIEpTT04uc3RyaW5naWZ5KHtkYXRlRnJvbTogJHNjb3BlLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5kYXRlVG99KSk7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmNob29zZVJvb20ocm9vbSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvb2ZmZXInO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50ZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucm9vbXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRBbGxSb29tcygpLnRoZW4oZnVuY3Rpb24gKHJvb21zKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUm9vbXMgPSByb29tcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE8gb2JzxYJ1Z2EgZXJyb3JhXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAkc2NvcGUuY2hlY2tBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5yb29tRGF0ZUZyb20pO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFsbFJvb21zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm9vbURhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLnJvb21EYXRlRnJvbSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm9vbURhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5yb29tRGF0ZVRvKTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCAkc2NvcGUuYWxsUm9vbXNbaV0ucmVzZXJ2YXRpb25zLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUuYWxsUm9vbXNbaV0ucmVzZXJ2YXRpb25zW2pdLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUuYWxsUm9vbXNbaV0ucmVzZXJ2YXRpb25zW2pdLnRvKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGxSb29tc1tpXS5hdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLmFsbFJvb21zW2ldLmF2YWlsYWJsZSA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsbFJvb21zW2ldLmF2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5hbGxSb29tcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgJHNjb3BlLmRhdGVDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSA+PSAkc2NvcGUuZGF0ZVRvLmdldE1vbnRoKCkgJiYgJHNjb3BlLmRhdGVGcm9tLmdldERhdGUoKSA+PSAkc2NvcGUuZGF0ZVRvLmdldERhdGUoKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZVRlbXAgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZVRlbXAuc2V0RGF0ZSgkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZVRlbXAuc2V0TW9udGgoJHNjb3BlLmRhdGVGcm9tLmdldE1vbnRoKCkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGVUbyA9IGRhdGVUZW1wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL1RPRG8gcG8gem1pYW5pZSBkYXR5IHptaWVuaWMgY2xhc3NlKGtvbXBsZXRueSByZXdvcms/IDooKVxyXG4gICAgICAgICRzY29wZS5nZXRBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAocmVzZXJ2YXRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgcm9vbURhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5kYXRlVG8pO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcmVzZXJ2YXRpb25zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS5mcm9tKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZShyZXNlcnZhdGlvbnNbaV0udG8pO1xyXG4gICAgICAgICAgICAgICAgaWYocm9vbURhdGVGcm9tIDwgZGF0ZVRvICYmIHJvb21EYXRlVG8gPiBkYXRlRnJvbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub3RBdmFpbGFibGUnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICdhdmFpbGFibGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hbmFnbWVudEluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmdldEFsbFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUudG9Cb29raW5ncyA9IGZ1bmN0aW9uIChyb29tKSB7XHJcblxyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ3NlbGVjdGVkUm9vbScsIEpTT04uc3RyaW5naWZ5KHtfaWQ6IHJvb20uX2lkLCB0eXBlOiByb29tLnR5cGUsIG51bWJlcjogcm9vbS5udW1iZXIsIGJlZHM6IHJvb20uYmVkcywgcHJpY2U6IHJvb20ucHJpY2V9KSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ21hbmFnbWVudC1ib29raW5ncycpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnc2VsZWN0ZWRSb29tJykpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21Cb29raW5ncygkc2NvcGUuc2VsZWN0ZWRSb29tLl9pZCkudGhlbihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmdzID0gYi5yZXNlcnZhdGlvbnM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2VySW5mbyh1c2VyKS50aGVuKGZ1bmN0aW9uICh1KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyID0gdTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5zZWxlY3RlZFVzZXIpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmcgPSBmdW5jdGlvbiAocm9vbSwgZGF0ZUZyb20sIGRhdGVUbykge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2Jvb2tpbmcnLCBKU09OLnN0cmluZ2lmeSh7cm9vbToge19pZDogcm9vbS5faWQsIHR5cGU6IHJvb20udHlwZSwgbnVtYmVyOiByb29tLm51bWJlciwgYmVkczogcm9vbS5iZWRzLCBwcmljZTogcm9vbS5wcmljZX0sIGRhdGVGcm9tOiBkYXRlRnJvbSwgZGF0ZVRvOiBkYXRlVG99KSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Rlc3QnKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdEJvb2tpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ib29raW5nID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2Jvb2tpbmcnKSk7XHJcbiAgICAgICAgICAgICRzY29wZS50ZXN0LmRhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICAkc2NvcGUudGVzdC5kYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUuYm9va2luZy5kYXRlVG8pO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgICAgICBnZXRFeHRyYXMoKTtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0VXNlcnNFbWFpbHMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VycykpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyBwcnplbmllc2llbmllIHBld255Y2ggZnVua2Nqb25hbG5vc2NpIGRvIHVzZXJDdHJsXHJcblxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGRvZGF0a8OzdyBpIG9ibGljemVuaWUgY2VueVxyXG4gICAgICAgICRzY29wZS5zdWJtaXRCb29rRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpZigkc2NvcGUuc2VsZWN0T3JBZGRVc2VyKXtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS50ZXN0LmVtYWlsID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBcIlwiKyRzY29wZS50ZXN0LmZpcnN0TmFtZSskc2NvcGUudGVzdC5sYXN0TmFtZSskc2NvcGUudGVzdC5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUudGVzdC5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUudGVzdC5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICRzY29wZS50ZXN0LnBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudGVzdC5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUudGVzdC5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUudGVzdC5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICRzY29wZS50ZXN0LnBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLnNpZ251cEFuZEJvb2sodXNlciwgJHNjb3BlLmJvb2tpbmcucm9vbS5faWQsIHtkYXRlRnJvbTogJHNjb3BlLnRlc3QuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLnRlc3QuZGF0ZVRvfSwgJHNjb3BlLnRvdGFsUHJpY2UsICRzY29wZS5zZWxlY3RlZEV4dHJhcylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRyb290U2NvcGUuZGlzY291bnQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm91Y2hlclNlcnZpY2UudXNlVm91Y2hlcigkcm9vdFNjb3BlLmRpc2NvdW50LmNvZGUpLnRoZW4oZnVuY3Rpb24gKHZSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXNlciA9IEpTT04ucGFyc2UoJHNjb3BlLnNlbGVjdGVkVXNlckJvb2tpbmcpO1xyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2UuYWRtaW5Cb29rKCRzY29wZS5ib29raW5nLnJvb20uX2lkLCB1c2VyLmVtYWlsICx7ZGF0ZUZyb206ICRzY29wZS50ZXN0LmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS50ZXN0LmRhdGVUb30sICRzY29wZS50b3RhbFByaWNlLCAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyU2VydmljZS51c2VWb3VjaGVyKCRyb290U2NvcGUuZGlzY291bnQuY29kZSkudGhlbihmdW5jdGlvbiAodlJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLnRlc3QuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLnRlc3QuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLmJvb2tpbmcpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICd6bCcpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlKSAtICRyb290U2NvcGUuZGlzY291bnQuYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnJScpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUudG90YWxQcmljZSAtICgkc2NvcGUudG90YWxQcmljZSAqICgkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudCAvIDEwMCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wYWlkQ2xhc3MgPSBmdW5jdGlvbiAocGFpZCkge1xyXG4gICAgICAgICAgICBpZihwYWlkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdidG4tc3VjY2Vzcyc7XHJcbiAgICAgICAgICAgIHJldHVybiAnYnRuLXdhcm5pbmcnXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUucGF5ID0gZnVuY3Rpb24gKGJvb2tpbmcpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UucGF5KGJvb2tpbmcuX2lkLCAhYm9va2luZy5wYWlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBib29raW5nLnBhaWQgPSAhYm9va2luZy5wYWlkO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHJvb3RTY29wZS4kd2F0Y2goJ2Rpc2NvdW50JyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMDEuMjAxNy5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3VzZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UsIHVzZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gdXNlcnM7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS51c2VycylcclxuICAgICAgICB9KVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjEyLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuLmNvbnRyb2xsZXIoJ3ZvdWNoZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgdm91Y2hlclNlcnZpY2UpIHtcclxuXHJcbiAgICAvL0lsZSwgY3p5IHdpZWxva3JvdG5lZ28gdXp5dGt1LCBkYXRhIHd5Z2HFm25pxJljaWFcclxuICAgICRzY29wZS5nZW5lcmF0ZVZvdWNoZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS52b3VjaGVycyA9IHtcclxuICAgICAgICAgICAgY29kZXM6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XHJcbiAgICAgICAgdmFyIGV4cGlyeURhdGUgPSAkc2NvcGUudm91Y2hlckV4cGlyeURhdGU7XHJcbiAgICAgICAgaWYoZXhwaXJ5RGF0ZSA8IG5ldyBEYXRlKCkpe1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlckVycm9yID0gJ0RhdGEgd3lnYcWbbmnEmWNpYSBuaWUgbW/FvGUgYnnEhyB6IHByemVzesWCb8WbY2knOy8vVE9ETyBwb3ByYXdpxIcga29tdW5pa2F0XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc0dlbmVyYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2VuZXJhdGVkVm91Y2hlcnMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHdoaWxlKCRzY29wZS52b3VjaGVycy5jb2Rlcy5sZW5ndGggPCAkc2NvcGUubnVtYmVyT2ZWb3VjaGVycyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdm91Y2hlciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpICE9IDMgKXZvdWNoZXIgKz0gJy0nO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5jb2Rlcy5wdXNoKHZvdWNoZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1RPRE8gZGFsc3phIHByYWNhIG5hZCB2b3VjaGVyYW1pLCBwb215xZtsZcSHIGphayB0byBwcnplY2hvd3l3YcSHIHcgYmF6aWUgY3p5IGpha28gdGVrc3QgbnAuIDIwJSBjenkgb2RkemllbG5pZSBudW1iZXI6IDIwLCBkaXNjb3VudFR5cGU6ICclXCJcclxuICAgICAgICAgICAgdmFyIGxhc3QgPSAkc2NvcGUuZGlzY291bnQuY2hhckF0KCRzY29wZS5kaXNjb3VudC5sZW5ndGgtMSk7XHJcbiAgICAgICAgICAgIGlmKGxhc3QgPT09ICclJylcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudFR5cGUgPSAnJSc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYobGFzdCA9PT0gJ8WCJyAmJiAkc2NvcGUuZGlzY291bnQuY2hhckF0KCRzY29wZS5kaXNjb3VudC5sZW5ndGgtMikgPT09ICd6JylcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudFR5cGUgPSAnemwnO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50ID0gY29udmVydFRvTnVtYmVyKCRzY29wZS5kaXNjb3VudCk7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5leHBpcnlEYXRlID0gZXhwaXJ5RGF0ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmdlbmVyYXRlZFZvdWNoZXJzID0gJHNjb3BlLnZvdWNoZXJzLmNvZGVzO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNHZW5lcmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNTYXZlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5zYXZlVm91Y2hlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnZvdWNoZXJzKTtcclxuICAgICAgICB2b3VjaGVyU2VydmljZS5zYXZlVm91Y2hlcnMoJHNjb3BlLnZvdWNoZXJzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLnZvdWNoZXJzU2F2ZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL1RPRE8gb2RqZWNpZSBrd290eSBpIHNwcmF3ZHplbmllIHZhem5vc2NpKHd5c3dpZXRsZW5pZSBvZHBvd2llZG5pZWdvIGVycm9yYSksIG5hIGtvbmllYyBwcnp5IHJlemVyd2FjamkgdXd6Z2xlZG5pYyB2b3VjaGVyXHJcbiAgICAkc2NvcGUuY2hlY2tWb3VjaGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52b3VjaGVyKTtcclxuICAgICAgICAgICAgdm91Y2hlclNlcnZpY2UuY2hlY2tWb3VjaGVyKCRzY29wZS52b3VjaGVyLnRvU3RyaW5nKCkpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyTm90Rm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlckZvdW5kID0gJ0tvZCBwb3ByYXdueSB6bmnFvGthICcrcmVzdWx0LmRpc2NvdW50K3Jlc3VsdC5kaXNjb3VudFR5cGU7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmRpc2NvdW50ID0ge2Ftb3VudDogcmVzdWx0LmRpc2NvdW50LCB0eXBlOiByZXN1bHQuZGlzY291bnRUeXBlLCBjb2RlOiAkc2NvcGUudm91Y2hlcn07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGlzY291bnQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZGlzY291bnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlck5vdEZvdW5kID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlckZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5jb2RlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighJHNjb3BlLmJvb2tpbmdGcm0uJHZhbGlkKXtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGlzTnVtZXJpYyhuKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb252ZXJ0VG9OdW1iZXIobikge1xyXG4gICAgICAgIHZhciBkaXNjb3VudCA9ICcnO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoaXNOdW1lcmljKG4uY2hhckF0KGkpKSl7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudCArPSBuLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpc2NvdW50ID0gTnVtYmVyKGRpc2NvdW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaXNjb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkaXNjb3VudCA9IE51bWJlcihkaXNjb3VudCk7XHJcbiAgICAgICAgcmV0dXJuIGRpc2NvdW50O1xyXG4gICAgfVxyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDcuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigndW5pcXVlQ2F0ZWdvcmllcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJvb21zLCBwcm9wZXJ0eU5hbWUpIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KHJvb21zKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gcm9vbXNbaV1bcHJvcGVydHlOYW1lXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoa2V5c1t2YWxdKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNbdmFsXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJvb21zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdBdXRoU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdmFyIExPQ0FMX1RPS0VOID0gJ3Rva2VuJztcclxuICAgICAgICB2YXIgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBVc2VyIGluZm8uLi4nKTsvL0RvIHVzdW5pxJljaWFcclxuICAgICAgICAgICAgaWYodG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RvcmVVc2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfVE9LRU4sIHRva2VuKTtcclxuICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdG9rZW47XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBhdXRoVG9rZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2lnbmluID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYXV0aGVudGljYXRlJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ocmVzdWx0LmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdmFyIHNpZ25vdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lVc2VySW5mbygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzaWdudXAgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zaWdudXAnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2plc3RlbSB3IHJlc29sdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtmaXJzdE5hbWU6IHJlc3VsdC5kYXRhLmZpcnN0TmFtZSwgbGFzdE5hbWU6IHJlc3VsdC5kYXRhLmxhc3ROYW1lLCBlbWFpbDogcmVzdWx0LmRhdGEuZW1haWwsIHBob25lOiByZXN1bHQuZGF0YS5waG9uZSwgcm9sZTogcmVzdWx0LmRhdGEucm9sZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gcG9wcmF3acSHIHJhemVtIHogYXBpIMW8ZWJ5IGRhd2HFgm8gc3VjY2Vzc1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJCb29raW5ncycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24gKG5ld0RldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvdGVzdCcsIG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXROZXdUb2tlbicsIHtlbWFpbDogbmV3RGV0YWlscy5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdDIuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0MiBzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQyLmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igbm93ZWdvIHRva2VuYScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtzdWNjZXNzOiB0cnVlLCBtc2c6IFwiUG9tecWbbG5pZSB6bWllbmlvbm8gZGFuZVwifSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe3N1Y2Nlc3M6IGZhbHNlLCBtc2c6IFwiY2/FmyBwb3N6xYJvIG5pZSB0YWtcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKG9sZFBhc3MsIG5ld1Bhc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hhbmdlLXBhc3N3b3JkJywge29sZFBhc3M6IG9sZFBhc3MsIG5ld1Bhc3M6IG5ld1Bhc3N9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHttc2c6ICdwb215xZtsbmllIHptaWVuaW9ubyBoYXNsbyd9KTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe21zZzogcmVzdWx0LmRhdGEuZXJyb3J9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJSb2xlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3JvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgc2lnbmluOiBzaWduaW4sXHJcbiAgICAgICAgICAgIHNpZ25vdXQ6IHNpZ25vdXQsXHJcbiAgICAgICAgICAgIHNpZ251cDogc2lnbnVwLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIGdldFVzZXJCb29raW5nczogZ2V0VXNlckJvb2tpbmdzLFxyXG4gICAgICAgICAgICBjaGFuZ2VVc2VyRGV0YWlsczogY2hhbmdlVXNlckRldGFpbHMsXHJcbiAgICAgICAgICAgIGNoYW5nZVBhc3N3b3JkOiBjaGFuZ2VQYXNzd29yZCxcclxuICAgICAgICAgICAgZ2V0VXNlclJvbGU6IGdldFVzZXJSb2xlLFxyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZFxyXG4gICAgICAgIH1cclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDguMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ29mZmVyU3ZjJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIHZhciBjaG9zZW5Sb29tID0ge307XHJcbiAgICAgICAgdmFyIGV4dHJhcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgY2hvb3NlUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgIGNob29zZW5Sb29tID0gcm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNob29zZW5Sb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0RXh0cmFzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuZXh0cmFzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGNob29zZVJvb206IGNob29zZVJvb20sXHJcbiAgICAgICAgICAgIGdldFJvb206IGdldFJvb20sXHJcbiAgICAgICAgICAgIGdldEV4dHJhczogZ2V0RXh0cmFzLFxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3Jvb21TZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWRSb29tID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb21zID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZmluZFJvb21zJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb2JyYW5vIHBva29qZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJvb21zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJvb2tSb29tID0gZnVuY3Rpb24gKGRhdGEpIHsvL1RPRE8gemphxIXEhyBzacSZXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3Jlc2VydmUnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXRlbSBwcnplZCBwb3N0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jYW5jZWxCb29raW5nJyx7cm9vbV9pZDogcm9vbV9pZCwgYm9va2luZ19pZDogYm9va2luZ19pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzb2x2ZSBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWplY3QgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxSb29tcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRSb29tcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKHJvb21faWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0Um9vbUJvb2tpbmdzJywge3Jvb21faWQ6IHJvb21faWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGFbMF0ucmVzZXJ2YXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YVswXSlcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0VXNlckluZm8nLCB7ZW1haWw6IHVzZXJ9KS50aGVuKGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF1c2VySW5mby5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVzZXJJbmZvLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHVzZXJJbmZvLmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh1c2VySW5mby5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cEFuZEJvb2sgPSBmdW5jdGlvbiAodXNlciwgaWQsIGRhdGVzLCBwcmljZSwgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4dHJhcyk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cEFuZEJvb2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHVzZXIucGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGRhdGVzLmRhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBkYXRlcy5kYXRlVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhczogZXh0cmFzXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgnT0snKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyByZXplcndhY2ppJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGFkbWluQm9vayA9IGZ1bmN0aW9uIChpZCwgZW1haWwsIGRhdGVzLCBwcmljZSwgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2Vyd2lzOiByb29tU3ZjLCBmdW5rY2phOiBhZG1pbkJvb2sgfCBpZDpcIitpZCtcIiwgZW1haWw6IFwiK2VtYWlsKTtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYWRtaW5Cb29rJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogZGF0ZXMuZGF0ZUZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGRhdGVzLmRhdGVUbyxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFzOiBleHRyYXNcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ09LJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJzRW1haWxzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJzRW1haWxzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyA9IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdOaWUgem5hbGV6aW9ubyB1xbx5dGtvd25pa8OzdycpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnTmllIHpuYWxlemlvbm8gdcW8eXRrb3duaWvDs3cnKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGF5ID0gZnVuY3Rpb24gKHJlc2VydmF0aW9uX2lkLCBwYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcGFpZCcsIHtpZDogcmVzZXJ2YXRpb25faWQsIHBheTogcGF5fSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBnZXRSb29tczogZ2V0Um9vbXMsXHJcbiAgICAgICAgICAgIGdldEFsbFJvb21zOiBnZXRBbGxSb29tcyxcclxuICAgICAgICAgICAgYm9va1Jvb206IGJvb2tSb29tLFxyXG4gICAgICAgICAgICBjYW5jZWxCb29raW5nOiBjYW5jZWxCb29raW5nLFxyXG4gICAgICAgICAgICBnZXRSb29tQm9va2luZ3M6IGdldFJvb21Cb29raW5ncyxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBzaWdudXBBbmRCb29rOiBzaWdudXBBbmRCb29rLFxyXG4gICAgICAgICAgICBhZG1pbkJvb2s6IGFkbWluQm9vayxcclxuICAgICAgICAgICAgZ2V0VXNlcnNFbWFpbHM6IGdldFVzZXJzRW1haWxzLFxyXG4gICAgICAgICAgICBwYXk6IHBheVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgndXNlclNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxVc2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRBbGxVc2VycycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2Vyc1xyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxMi4xMi4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgndm91Y2hlclNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHNhdmVWb3VjaGVycyA9IGZ1bmN0aW9uICh2b3VjaGVycykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2b3VjaGVycyk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NhdmVWb3VjaGVycycsIHZvdWNoZXJzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNoZWNrVm91Y2hlciA9IGZ1bmN0aW9uICh2b3VjaGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NoZWNrVm91Y2hlcicsIHt2b3VjaGVyQ29kZTogdm91Y2hlcn0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgKG5ldyBEYXRlKHJlc3VsdC5kYXRhLnZvdWNoZXIuZXhwaXJ5RGF0ZSkgPCBuZXcgRGF0ZSgpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnVGVybWluIG1pbsSFJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyAmJiByZXN1bHQuZGF0YS52b3VjaGVyLnVzZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ0tvZCB6b3N0YcWCIGp1xbwgd3lrb8W8eXN0YW55Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyAmJiAhcmVzdWx0LmRhdGEudm91Y2hlci51c2VkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS52b3VjaGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciB1c2VWb3VjaGVyID0gZnVuY3Rpb24gKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvdXNlVm91Y2hlcicsIHtjb2RlOiB2b3VjaGVyfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgnS2x1Y3ogd3lrb3J6eXN0YW55LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzYXZlVm91Y2hlcnM6IHNhdmVWb3VjaGVycyxcclxuICAgICAgICAgICAgY2hlY2tWb3VjaGVyOiBjaGVja1ZvdWNoZXIsXHJcbiAgICAgICAgICAgIHVzZVZvdWNoZXI6IHVzZVZvdWNoZXJcclxuICAgICAgICB9XHJcbiAgICB9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
