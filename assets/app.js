var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(o){return{request:function(e){return e.headers=e.headers||{},o.localStorage.token&&(e.headers.Authorization=o.localStorage.token),e}}}]).config(["$stateProvider","$urlRouterProvider",function(o,e){o.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}),e.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(o,e,t){o.$state=e,o.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(o,e,t,n){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.changeUserDetails=function(o,n,a,r,s){if(o){var i={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(i).then(function(o){e.reload()})}},o.cancelBooking=function(o,t){console.log("room id to:"+o+", booking_id to:"+t),n.cancelBooking(o,t).then(function(o){console.log("udało się anulować"),e.reload()})};var a=function(){t.getUserBookings().then(function(e){console.log(e),o.userBookings=e})},r=function(){t.getUserInfo().then(function(e){console.log(e),o.firstName=e.firstName,o.lastName=e.lastName,o.email=e.email,o.phone=e.phone})};o.changePassword=function(e,n,a){e&&t.changePassword(n,a).then(function(e){console.log(e.msg),o.successfulPasswordChange=!0},function(e){o.wrongPassword=!0})},o.checkDate=function(o){var e=new Date,t=new Date(o);return t>e},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(o,e,t,n,a,r,s,i){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.submitError=!1,e.errorMessage="",s.isLoggedIn=function(){return i.isAuthenticated},e.signin=function(){console.log("login"),i.signin(e.user).then(function(o,e){s.isLogedIn=!0,n.location.reload(),console.log(o)})},e.signout=function(){i.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},e.getUserInfo=function(){i.getUserInfo().then(function(o){console.log(o),e.userinfo=o})},e.submitForm=function(o){o?i.signup(e.user).then(function(o){console.log("Pomyślnie zarejestrowano"),e.submitError=!1,i.signin(e.user).then(function(o,e){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():n.location.href="#/successfulSignup"})},function(o){switch(console.log(o),o.code){case 11e3:e.submitError=!0,e.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:e.submitError=!0,e.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(e.submitError=!0,e.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},e.$watch("submitError",function(o){console.log(o)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService",function(o,e,t,n,a,r,s,i,c){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays;var u=function(){i.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:l(),extras:r.extras}).then(function(){n.go("successfulBooking")},function(o){})},r.toPrevious=function(){n.go("offer")};var l=function(){var o=0;return o=r.room.price*r.numOfDays,r.extras.forEach(function(e){o+=e.price*r.numOfDays}),o};u()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(o,e,t,n){n.$validators.compareTo=function(e){return e==o.otherModelValue},o.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}),angular.module("app").controller("offerCtrl",["$scope","$cookies","$state","$location","$window","offerSvc",function(o,e,t,n,a,r){o.offer={},o.extras=[],o.selectedExtras=[];var s={};o.dateFrom="",o.dateTo="",o.roomName="";var i=function(){o.offer=JSON.parse(e.get("room")),o.extras=u(),s=JSON.parse(e.get("dates")),o.dateFrom=c(new Date(s.dateFrom)),o.dateTo=c(new Date(s.dateTo)),o.roomName=o.offer.type,o.roomPrice=o.offer.price*l(),o.extrasTotalPrice=0},c=function(o){var e=o.getUTCDate(),t=o.getUTCMonth()+1,n=o.getUTCFullYear();return""+e+"-"+t+"-"+n};o.addOrRemoveExtra=function(e){var t=o.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t==-1?(o.selectedExtras.push(e),o.extrasTotalPrice+=e.price*l()):(o.selectedExtras.splice(t,1),o.extrasTotalPrice-=e.price*l())},o.toConfirmation=function(){console.log("asdasd");var n={extras:o.selectedExtras,numOfDays:l()};e.put("extras",JSON.stringify(n)),t.go("confirmation")},o.toPrevious=function(){t.go("home")};var u=function(){r.getExtras().then(function(e){o.extras=e;for(var t=0;t<o.extras.length;t++)o.extras[t].buttonText="Dodaj +",o.extras[t].buttonToggle=!1})},l=function(){var o=864e5,e=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/o)};i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$window","$location","roomService","offerSvc","$filter","$state",function(o,e,t,n,a,r,s,i,c){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1;var u=function(){var o=new Date;console.log(o),t.dateFrom=o;var e=new Date;e.setDate(e.getDate()+1),t.dateTo=e};t.init=function(){u(),t.findRooms()},t.findRooms=function(){r.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(o){t.rooms=o},function(o){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(o){e.put("room",JSON.stringify(o)),e.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),s.chooseRoom(o),c.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()}}]),angular.module("app").filter("uniqueCategories",function(){return function(o,e){if(angular.isArray(o)){for(var t=[],n={},a=0;a<o.length;a++){var r=o[a][e];angular.isUndefined(n[r])&&(n[r]=!0,t.push(o[a]))}return t}return o}}),angular.module("app").service("AuthService",["$http","$q",function(o,e){function t(){var o=window.localStorage.getItem(i);console.log("loading User info..."),o&&r(o)}function n(){s=void 0,c=!1,o.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(i)}function a(o){window.localStorage.setItem(i,o),r(o)}function r(e){c=!0,s=e,o.defaults.headers.common.Authorization=s}var s,i="token",c=!1,u=function(t){return e(function(e,n){o.post("/api/authenticate",t).then(function(o){o.data.success?(a(o.data.token),e(o.data.msg,o.data.success)):n(o.data.msg,o.data.success)})})},l=function(){n()},f=function(t){return e(function(e,n){o.post("/api/signup",t).then(function(o){o.data.success?(console.log("jestem w resolve"),e(o.data.msg)):n(o.data.msg)})})};t();var g=function(){return e(function(e,t){o.get("/api/userinfo").then(function(o){o.data.success?e({firstName:o.data.firstName,lastName:o.data.lastName,email:o.data.email,phone:o.data.phone}):t(o.data.msg)})})},d=function(){return e(function(e,t){o.get("/api/getUserBookings").then(function(o){e(o.data)})})},m=function(n){return e(function(e,r){o.post("/api/test",n).then(function(s){s.data.success?(console.log("hello"),o.post("/api/getNewToken",{email:n.email}).then(function(o){o.data.success?(console.log("result2 success"),a(o.data.token),t()):console.log("error nowego tokena")}),e({success:!0,msg:"Pomyślnie zmieniono dane"})):r({success:!1,msg:"coś poszło nie tak"})})})},p=function(t,n){return e(function(e,a){o.post("/api/change-password",{oldPass:t,newPass:n}).then(function(o){o.data.success?e({msg:"pomyślnie zmieniono haslo"}):a({msg:o.data.error})})})};return{signin:u,signout:l,signup:f,getUserInfo:g,getUserBookings:d,changeUserDetails:m,changePassword:p,isAuthenticated:c}}]),angular.module("app").service("offerSvc",["$q","$http",function(o,e){var t=function(o){choosenRoom=o},n=function(){return choosenRoom},a=function(){return o(function(o,t){e.get("/api/getExtras").then(function(e){e.data.success?o(e.data.extras):t(e.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(o,e){var t=function(t){return o(function(o,n){e.post("/api/findRooms",t).then(function(e){e.data.success?(console.log("Pobrano pokoje"),o(e.data.rooms)):n(e.data.error)})})},n=function(t){return o(function(o,n){e.post("/api/reserve",t).then(function(e){e.data.success?o(e.data.success):n(e.data.error)})})},a=function(t,n){return o(function(o,a){console.log("jetem przed post cancel"),e.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(e){e.data.success?(console.log("resolve cancel"),o(e.data.success)):(console.log("reject cancel"),a(e.data.error))})})};return{getRooms:t,bookRoom:n,cancelBooking:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJmaWxsdGVycy9yb29tRmlsdGVyLmpzIiwic2VydmljZXMvYXV0aG9yaXphdGlvbi5zdmMuanMiLCJzZXJ2aWNlcy9vZmZlci5zdmMuanMiLCJzZXJ2aWNlcy9yb29tLnN2Yy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJyZXF1ZXN0IiwiY29uZmlnIiwiaGVhZGVycyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCIkc2NvcGUiLCJBdXRoU2VydmljZSIsInJvb21TZXJ2aWNlIiwicmVnZXgiLCJjaGFuZ2VVc2VyRGV0YWlscyIsImlzVmFsaWQiLCJmTmFtZSIsImxOYW1lIiwibkVtYWlsIiwiblBob25lIiwibmV3RGV0YWlscyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZU51bWJlciIsInRoZW4iLCJhIiwicmVsb2FkIiwiY2FuY2VsQm9va2luZyIsInJvb21faWQiLCJib29raW5nX2lkIiwiY29uc29sZSIsImxvZyIsImdldFVzZXJCb29raW5ncyIsIm1zZyIsInVzZXJCb29raW5ncyIsImdldEluZm8iLCJnZXRVc2VySW5mbyIsInVzZXIiLCJwaG9uZSIsImNoYW5nZVBhc3N3b3JkIiwidmFsaWQiLCJvbGRQIiwibmV3UCIsInJlcyIsInN1Y2Nlc3NmdWxQYXNzd29yZENoYW5nZSIsInJlaiIsIndyb25nUGFzc3dvcmQiLCJjaGVja0RhdGUiLCJkYXRlIiwiY3VycmVudERhdGUiLCJEYXRlIiwiZGF0ZUZyb20iLCIkcSIsIiRsb2NhdGlvbiIsIiRyb3V0ZSIsInN1Ym1pdEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiaXNMb2dnZWRJbiIsImlzQXV0aGVudGljYXRlZCIsInNpZ25pbiIsInN1Y2Nlc3MiLCJpc0xvZ2VkSW4iLCJsb2NhdGlvbiIsInNpZ25vdXQiLCJnbyIsInVzZXJpbmZvIiwic3VibWl0Rm9ybSIsInNpZ251cCIsImRhdGEiLCJ0b1N0cmluZyIsImhyZWYiLCJjb2RlIiwiJHdhdGNoIiwiJGNvb2tpZXMiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsImluaXQiLCJyZXNlcnZlIiwidGVybXMiLCJhbGVydCIsImJvb2tSb29tIiwiaWQiLCJfaWQiLCJmcm9tIiwidG8iLCJwcmljZSIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJlcnJvciIsInRvUHJldmlvdXMiLCJ0b3RhbCIsImZvckVhY2giLCJlIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibmdNb2RlbCIsIiR2YWxpZGF0b3JzIiwiY29tcGFyZVRvIiwibW9kZWxWYWx1ZSIsIiR2YWxpZGF0ZSIsInRlbXBsYXRlIiwib2ZmZXJTdmMiLCJvZmZlciIsInNlbGVjdGVkRXh0cmFzIiwiZGF0ZXMiLCJyb29tTmFtZSIsInNob3dPZmZlciIsImdldEV4dHJhcyIsImRhdGVQcmVldGlmeSIsInR5cGUiLCJyb29tUHJpY2UiLCJjYWxjdWxhdGVEaWZmT2ZEYXlzIiwiZXh0cmFzVG90YWxQcmljZSIsImRheSIsImdldFVUQ0RhdGUiLCJtb250aCIsImdldFVUQ01vbnRoIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiYWRkT3JSZW1vdmVFeHRyYSIsImV4dHJhIiwiaW5kZXgiLCJpbmRleE9mIiwiYnV0dG9uVGV4dCIsImJ1dHRvblRvZ2dsZSIsInB1c2giLCJzcGxpY2UiLCJ0b0NvbmZpcm1hdGlvbiIsInB1dCIsInN0cmluZ2lmeSIsImV4dHJhc0RhdGEiLCJpIiwibGVuZ3RoIiwiTVNfUEVSX0RBWSIsImRhdGVGcm9tVVRDIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkYXRlVG9VVEMiLCJNYXRoIiwiZmxvb3IiLCIkZmlsdGVyIiwibm9Sb29tc0Vycm9yIiwiZXJyb3JNc2ciLCJyb29tcyIsIm51bWJlck9mQmVkcyIsInNldERhdGUiLCJkYXRlVGVtcCIsImZpbmRSb29tcyIsImdldFJvb21zIiwidG9JU09TdHJpbmciLCJiZWRzIiwicm9vbXNEYXRhIiwiYWRkUm9vbSIsImNob29zZVJvb20iLCJ0ZXN0IiwiZmlsdGVyIiwicHJvcGVydHlOYW1lIiwiaXNBcnJheSIsInJlc3VsdCIsImtleXMiLCJ2YWwiLCJpc1VuZGVmaW5lZCIsInNlcnZpY2UiLCIkaHR0cCIsImxvYWRVc2VySW5mbyIsIndpbmRvdyIsImdldEl0ZW0iLCJMT0NBTF9UT0tFTiIsInVzZXJJbmZvIiwiZGVzdHJveVVzZXJJbmZvIiwiYXV0aFRva2VuIiwidW5kZWZpbmVkIiwiZGVmYXVsdHMiLCJjb21tb24iLCJyZW1vdmVJdGVtIiwic3RvcmVVc2VySW5mbyIsInNldEl0ZW0iLCJyZXNvbHZlIiwicmVqZWN0IiwicG9zdCIsInJlc3VsdDIiLCJvbGRQYXNzIiwibmV3UGFzcyIsImNob29zZW5Sb29tIiwiZ2V0Um9vbSJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxhQ0FBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsbUJBQUEsVUFBQSxT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RUFBQW5CLEVBQUF0RyxLQUFBUixTQUVBa0ksRUFBQXBCLEVBQUF0RyxLQUFBeUIsWUFNQWxFLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBdUIsR0FBQSxTQUFBeUksRUFBQUMsR0FDQWhLLFFBQUFDLElBQUEsMkJBQ0FnSixFQUFBZ0IsS0FBQSxzQkFBQW5LLFFBQUFBLEVBQUFDLFdBQUFBLElBQUFMLEtBQUEsU0FBQWtKLEdBQ0FBLEVBQUF0RyxLQUFBUixTQUNBOUIsUUFBQUMsSUFBQSxrQkFDQThKLEVBQUFuQixFQUFBdEcsS0FBQVIsV0FFQTlCLFFBQUFDLElBQUEsaUJBQ0ErSixFQUFBcEIsRUFBQXRHLEtBQUF5QixZQU1BLFFBQ0FtRSxTQUFBQSxFQUNBMUUsU0FBQUEsRUFDQTNELGNBQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAyMi4wOS4yMDE2LlxyXG4gKi9cclxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnLCAndWkucm91dGVyJywgJ25nQ29va2llcyddKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxMS4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgZnVuY3Rpb24gKCR3aW5kb3cpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgICAgICAgICBpZigkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbil7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2hvbWUnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYWluJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyb29tQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21haW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnb2ZmZXInLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9vZmZlcicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnb2ZmZXJDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnb2ZmZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29uZmlybWF0aW9uJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY29uZmlybWF0aW9uJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N1Y2Nlc3NmdWxCb29raW5nJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VjY2Vzc2Z1bEJvb2tpbmcnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsU2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VjY2Vzc2Z1bFNpZ251cCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3NmdWxTaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FjY291bnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhY2NvdW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ25pbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NpZ25pbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ25pbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5ib29raW5ncycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2Jvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYm9va2luZ3MnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5kZXRhaWxzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2RldGFpbHMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5jaGFuZ2VQYXNzd29yZCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NoYW5nZVBhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2hhbmdlUGFzc3dvcmQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9tYWluJylcclxuICAgIH0pXHJcbiAgICAucnVuKFsnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlUGFyYW1zID0gJHN0YXRlUGFyYW1zO1xyXG4gICAgfV0pO1xyXG4gICAgLypcclxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnYXV0aEludGVyY2VwdG9yJyk7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9tYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3NpZ251cCcsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3NpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zaWduaW4nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3NpZ25pbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy91c2VyaW5mbycsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3VzZXJpbmZvJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3N1Y2Nlc3NmdWxTaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvb2ZmZXInLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3N1Y2Nlc3NmdWxCb29raW5nJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm90aGVyd2lzZSgnLycpO1xyXG4gICAgfSk7XHJcbiovXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2FjY0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsIEF1dGhTZXJ2aWNlLCByb29tU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUucmVnZXggPSAnKFxcXFwrWzAtOV1cXFxcZHsxfSkqKFxcXFxzKSooWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pJztcclxuXHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbihpc1ZhbGlkLCBmTmFtZSwgbE5hbWUsIG5FbWFpbCwgblBob25lKXtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3RGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogbkVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuUGhvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VVc2VyRGV0YWlscyhuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyBwcnp5Y2lzayBhbnVsb3dhbmlhIHR5bGtvIGRsYSBwb2tvaSwga3TDs3J5Y2ggZGF0YSBuYSB0byBwb3p3YWxhXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJvb20gaWQgdG86XCIrcm9vbV9pZCtcIiwgYm9va2luZ19pZCB0bzpcIitib29raW5nX2lkKTtcclxuXHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmNhbmNlbEJvb2tpbmcocm9vbV9pZCwgYm9va2luZ19pZCkudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VkYcWCbyBzacSZIGFudWxvd2HEhycpO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJCb29raW5ncygpLnRoZW4oZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VyQm9va2luZ3MgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0SW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maXJzdE5hbWUgPSB1c2VyLmZpcnN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sYXN0TmFtZSA9IHVzZXIubGFzdE5hbWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBob25lID0gdXNlci5waG9uZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8gdXN0YXdpYyBwYXNzeSBuYSB6ZXJvIHBvIMW8xIVkYW5pdSBoaHRwXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKHZhbGlkLG9sZFAsIG5ld1ApIHtcclxuICAgICAgICAgICAgaWYodmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY2hhbmdlUGFzc3dvcmQob2xkUCwgbmV3UCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLm1zZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLndyb25nUGFzc3dvcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZ2V0SW5mbygpO1xyXG4gICAgICAgIGdldFVzZXJCb29raW5ncygpO1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdhdXRoQ3RybCcsIGZ1bmN0aW9uICgkcSwgJHNjb3BlLCAkc3RhdGUsICR3aW5kb3csICRsb2NhdGlvbiwgJHJvdXRlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSkge1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJyhcXFxcK1swLTldXFxcXGR7MX0pKihcXFxccykqKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KSc7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnJztcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNpZ25pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luJyk7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ25pbigkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAobXNnLCBzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy8nO1xyXG4gICAgICAgICAgICAgICAgLy8kc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWdub3V0KCk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dlZEluID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgLy9zdGF0ZS5nbygnaG9tZScpO1xyXG4gICAgICAgICAgICAvLyRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ291dCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmluZm8gPSBtc2c7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbnVwKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvbXnFm2xuaWUgemFyZWplc3Ryb3dhbm8nKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSA9PSAnaHR0cDovL2xvY2FsaG9zdDozMDAxLyMvY29uZmlybWF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy9zdWNjZXNzZnVsU2lnbnVwJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmNvZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExMDAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnV3licmFueSBlbWFpbCBqZXN0IGp1xbwgemFyZWplc3Ryb3dhbnkuIFByb3N6xJkgd3licmHEhyBpbm55Lic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3VibWl0RXJyb3InLCBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdjb25maXJtYXRpb25DdHJsJywgZnVuY3Rpb24gKCRxLCAkd2luZG93LCAkbG9jYXRpb24sICRzdGF0ZSwgJGNvb2tpZXMsICRzY29wZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICRzY29wZS5yb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVGcm9tO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZVRvO1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLmV4dHJhcztcclxuICAgICAgICAkc2NvcGUubnVtT2ZEYXlzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5udW1PZkRheXM7XHJcblxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQgPyAkc2NvcGUuaXNTaWduZWRJbiA9IHRydWUgOiAkc2NvcGUuaXNTaWduZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICRzY29wZS5yZXNlcnZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkc2NvcGUudGVybXMgIT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdQcnplZCBwb3R3aWVyZHplbmllbSByZXplcndhY2ppIG5hbGXFvHkgemFha2NlcHRvd2HEh3JlZ3VsYW1pbi4nKTtcclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmJvb2tSb29tKHtpZDogJHNjb3BlLnJvb20uX2lkLCBmcm9tOiAkc2NvcGUuZGF0ZUZyb20sIHRvOiAkc2NvcGUuZGF0ZVRvLCBwcmljZTogY2FsY3VsYXRlVG90YWxQcmljZSgpLCBleHRyYXM6ICRzY29wZS5leHRyYXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxCb29raW5nJylcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHd5xZt3aWV0bGVuaWUgZXJycm9yYVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9vZmZlcidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdvZmZlcicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHRvdGFsID0gKCRzY29wZS5yb29tLnByaWNlICogJHNjb3BlLm51bU9mRGF5cyk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gZS5wcmljZSAqICRzY29wZS5udW1PZkRheXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB6cm9iaWVuaWUgcmVqZXN0cmFjamkobW/FvGUgcHJ6ZW5pZXNpZW5pZSBuYSBzaWdudXAgdmlldz8gZG8gcm96d2HFvGVuaWEpIGkgb2JzxYJ1Z2EgYsWCxJlkw7N3KG1vxbxlIGpha2/FmyBwb8WCxIVjennEhyBvYnlkd2EgbG9nb3dhbmlhIGkgcmVqZXN0cmFjamUgdyBqZWRubz8pXHJcbiAgICAgICAgLy9UT0RPIE9ic2x1Z2EgYmxlZG93IHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjemVnb3MgZG8gd2lkb2t1IHJlemVyd2FqY2lcclxuICAgICAgICAvL1RPRE8gcG91c8Ozd2HEhyBqYWtpZcWbIGluaXR5KHd5c3RhY3p5IHd5b8WCYcSHIGZ1bmtjasSZIHcga29udHJvbGVyemUgbHViIHNydilcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjYcWCZWogb2JzxYJ1Z2kga29udGEoem1pYW5hIGhhc8WCYSwgbnVtZXJ1IHRlbGVmb251W2RvZGFuaWUgbHViIHptaWFuYV0sIHBvZGdsxIVkdSByZXplcndhY2ppLCBpdHApIG9yYXogb2JzxYJ1Z2kgaG90ZWx1KENSVUQgZG9kYXRrw7N3LCBwb2tvamkgaXRwKS5cclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBtb8W8ZSBqYWtpxZsgd3lrcmVzw7N3IG5hIHRlbWF0IG9iY2nEhcW8ZW5pYSBwb2tvamkgbHViIGpha2nFmyBwcnp5Y2hvZMOzdyBjenkgY2/FmyBhbGJvIGphaWXFmyBjb8WbIGRvIGdlbmVyb3dhbmllIHBkZiB6IHJhcG9ydGVtXHJcbiAgICAgICAgLy9UT0RPIHBvem1pZW5pYcSHIHPFgm93YSByZXNlcnZhdGlvbiBpdHAgbmEgYm9va2luZ1xyXG4gICAgICAgIC8vVE9ETyBrb2R5IHJhYmF0b3dlXHJcbiAgICAgICAgLy9UT0RPIHBvd2lhZG9taWVuaWUgbyBjaWFzdGVjemthY2hcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBwb2RnbMSFZHUgb2LFgm/FvGVuaWEgaG90ZWx1IGphayB3IGtpbmkoMyBzdGFueTogd29sbnksIHphcmV6ZXJ3b3dhbnksIHphamV0eSlcclxuICAgICAgICAvL1RPRE8gemJhZGFuaWUgY3p5IC5ydW4gc3RhdGVQcm92aWRlcmEgcG9jemVibmVcclxuICAgICAgICAvL1RPRE8gcG96bmFuaWUgc3RhdGVQcm92aWRlcmEgaSBkb2RhbmllIG5lc3RlZCB2aWV3c1xyXG4gICAgICAgIC8vVE9ETyBuYSBnxYLDs3duZWogc3Ryb25pZSB6cm9iacSHxbxlYnkgZGF0YSBiecWCxIUgY29uYWptbmllaiBqZWRlbiBkemllbiByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIHptaWFuYSByZWdleCBuYSByb290U2NvcGUgamVzbGkgbW96bGl3ZVxyXG4gICAgICAgIC8vVE9EbyBkYXRhIHJlemVyd2FjamkgdHlsa28gb2QgZGF0eSBkemlzaWVqc3plaiAoYmV6IHJlemVyd2FjamkgdyBwcnplc3rFgm/Fm2NpKVxyXG4gICAgICAgIC8vVE9ETyBrb250b1xyXG4gICAgICAgIC8vem1pYW5hIGRhbnljaFxyXG4gICAgICAgIC8vem1pYW5hIGhhc8WCYVxyXG4gICAgICAgIC8vem9iYWN6ZW5pZSByZXplcndhY2ppXHJcbiAgICAgICAgLy9hbnVsb3dhbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL1xyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ2NvbXBhcmVUbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiBcIm5nTW9kZWxcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG90aGVyTW9kZWxWYWx1ZTogXCI9Y29tcGFyZVRvXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMsIG5nTW9kZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmNvbXBhcmVUbyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZSA9PSBzY29wZS5vdGhlck1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcIm90aGVyTW9kZWxWYWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoJ3VzZXJJbmZvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8cD5zaWFsYWxhPC9wPidcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdvZmZlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkY29va2llcywgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3csIG9mZmVyU3ZjKSB7XHJcbiAgICAgICAgJHNjb3BlLm9mZmVyID0ge307XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgIHZhciBkYXRlcyA9IHt9O1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAnJztcclxuXHJcblxyXG4gICAgICAgIHZhciBzaG93T2ZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vZmZlciA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZ2V0RXh0cmFzKCk7XHJcblxyXG4gICAgICAgICAgICBkYXRlcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZVRvKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAkc2NvcGUub2ZmZXIudHlwZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21QcmljZSA9ICRzY29wZS5vZmZlci5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGF0ZVByZWV0aWZ5ID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnK2RheSsnLScrbW9udGgrJy0nK3llYXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FzZGFzZCcpO1xyXG4gICAgICAgICAgICB2YXIgZXh0cmFzID0ge2V4dHJhczogJHNjb3BlLnNlbGVjdGVkRXh0cmFzLCBudW1PZkRheXM6IGNhbGN1bGF0ZURpZmZPZkRheXMoKX07XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnZXh0cmFzJywgSlNPTi5zdHJpbmdpZnkoZXh0cmFzKSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvbWFpbidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5nZXRFeHRyYXMoKS50aGVuKGZ1bmN0aW9uIChleHRyYXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZXh0cmFzRGF0YTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAgOyBpIDwgJHNjb3BlLmV4dHJhcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25UZXh0ID0gJ0RvZGFqICsnO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVG9nZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVEaWZmT2ZEYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgTVNfUEVSX0RBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKGRhdGVzLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVVUQyA9IERhdGUuVVRDKGRhdGVGcm9tLmdldEZ1bGxZZWFyKCksIGRhdGVGcm9tLmdldE1vbnRoKCksIGRhdGVGcm9tLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG9VVEMgPSBEYXRlLlVUQyhkYXRlVG8uZ2V0RnVsbFllYXIoKSwgZGF0ZVRvLmdldE1vbnRoKCksIGRhdGVUby5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZGF0ZVRvVVRDIC0gZGF0ZUZyb21VVEMpIC8gTVNfUEVSX0RBWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2hvd09mZmVyKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3Jvb21DdHJsJywgZnVuY3Rpb24gKCRxLCAkY29va2llcywgJHNjb3BlLCAkd2luZG93LCAkbG9jYXRpb24sIHJvb21TZXJ2aWNlLCBvZmZlclN2YywkZmlsdGVyLCAkc3RhdGUpIHtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1zZyA9Jyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21zID0gW107XHJcbiAgICAgICAgJHNjb3BlLm51bWJlck9mQmVkcyA9IDE7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2V0RGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGU7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5maW5kUm9vbXMgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIFd5xZt3aWV0bGVuaWUgZXJyb3JhIG8gYnJha3UgcG9rb2ppIG8gd3licmFueWNoIHBhcmFtZXRyYWNoIHXFvHl3YWrEhWMgbm9Sb29tc0Vycm9yIGkgbmctSGlkZVxyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRSb29tcyh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiAkc2NvcGUuZGF0ZUZyb20udG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHRvOiAkc2NvcGUuZGF0ZVRvLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBiZWRzOiAkc2NvcGUubnVtYmVyT2ZCZWRzXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJvb21zRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJvb21zID0gcm9vbXNEYXRhO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTXNnID0gJ0NvxZsgcG9zesWCbyBuaWUgdGFrLidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZFJvb20gPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ3Jvb20nLCBKU09OLnN0cmluZ2lmeShyb29tKSk7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnZGF0ZXMnLCBKU09OLnN0cmluZ2lmeSh7ZGF0ZUZyb206ICRzY29wZS5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUuZGF0ZVRvfSkpO1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5jaG9vc2VSb29tKHJvb20pO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ29mZmVyJyk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmPScjL29mZmVyJztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudGVzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnJvb21zKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDcuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigndW5pcXVlQ2F0ZWdvcmllcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJvb21zLCBwcm9wZXJ0eU5hbWUpIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KHJvb21zKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gcm9vbXNbaV1bcHJvcGVydHlOYW1lXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoa2V5c1t2YWxdKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNbdmFsXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJvb21zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdBdXRoU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgdmFyIExPQ0FMX1RPS0VOID0gJ3Rva2VuJztcclxuICAgICAgICB2YXIgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBVc2VyIGluZm8uLi4nKTsvL0RvIHVzdW5pxJljaWFcclxuICAgICAgICAgICAgaWYodG9rZW4pXHJcbiAgICAgICAgICAgICAgICB1c2VySW5mbyh0b2tlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95VXNlckluZm8oKSB7XHJcbiAgICAgICAgICAgIGF1dGhUb2tlbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9UT0tFTik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdG9yZVVzZXJJbmZvKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9UT0tFTiwgdG9rZW4pO1xyXG4gICAgICAgICAgICB1c2VySW5mbyh0b2tlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1c2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB0b2tlbjtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGF1dGhUb2tlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzaWduaW4gPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9hdXRoZW50aWNhdGUnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnLCByZXN1bHQuZGF0YS5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnLCByZXN1bHQuZGF0YS5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2YXIgc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGVzdHJveVVzZXJJbmZvKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cCA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cCcsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnamVzdGVtIHcgcmVzb2x2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsb2FkVXNlckluZm8oKTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe2ZpcnN0TmFtZTogcmVzdWx0LmRhdGEuZmlyc3ROYW1lLCBsYXN0TmFtZTogcmVzdWx0LmRhdGEubGFzdE5hbWUsIGVtYWlsOiByZXN1bHQuZGF0YS5lbWFpbCwgcGhvbmU6IHJlc3VsdC5kYXRhLnBob25lfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckJvb2tpbmdzID0gZnVuY3Rpb24gKCkgey8vVE9ETyBwb3ByYXdpxIcgcmF6ZW0geiBhcGkgxbxlYnkgZGF3YcWCbyBzdWNjZXNzXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0VXNlckJvb2tpbmdzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbiAobmV3RGV0YWlscykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS90ZXN0JywgbmV3RGV0YWlscykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldE5ld1Rva2VuJywge2VtYWlsOiBuZXdEZXRhaWxzLmVtYWlsfSkudGhlbihmdW5jdGlvbiAocmVzdWx0Mikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Mi5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQyIHN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdDIuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBub3dlZ28gdG9rZW5hJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3N1Y2Nlc3M6IHRydWUsIG1zZzogXCJQb215xZtsbmllIHptaWVuaW9ubyBkYW5lXCJ9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7c3VjY2VzczogZmFsc2UsIG1zZzogXCJjb8WbIHBvc3rFgm8gbmllIHRha1wifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAob2xkUGFzcywgbmV3UGFzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGFuZ2UtcGFzc3dvcmQnLCB7b2xkUGFzczogb2xkUGFzcywgbmV3UGFzczogbmV3UGFzc30pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe21zZzogJ3BvbXnFm2xuaWUgem1pZW5pb25vIGhhc2xvJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7bXNnOiByZXN1bHQuZGF0YS5lcnJvcn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHNpZ25pbjogc2lnbmluLFxyXG4gICAgICAgICAgICBzaWdub3V0OiBzaWdub3V0LFxyXG4gICAgICAgICAgICBzaWdudXA6IHNpZ251cCxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBnZXRVc2VyQm9va2luZ3M6IGdldFVzZXJCb29raW5ncyxcclxuICAgICAgICAgICAgY2hhbmdlVXNlckRldGFpbHM6IGNoYW5nZVVzZXJEZXRhaWxzLFxyXG4gICAgICAgICAgICBjaGFuZ2VQYXNzd29yZDogY2hhbmdlUGFzc3dvcmQsXHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkXHJcbiAgICAgICAgfVxyXG4gICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwOC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnb2ZmZXJTdmMnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcbiAgICAgICAgdmFyIGNob3NlblJvb20gPSB7fTtcclxuICAgICAgICB2YXIgZXh0cmFzID0gW107XHJcblxyXG4gICAgICAgIHZhciBjaG9vc2VSb29tID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgY2hvb3NlblJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hvb3NlblJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRFeHRyYXMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5leHRyYXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgY2hvb3NlUm9vbTogY2hvb3NlUm9vbSxcclxuICAgICAgICAgICAgZ2V0Um9vbTogZ2V0Um9vbSxcclxuICAgICAgICAgICAgZ2V0RXh0cmFzOiBnZXRFeHRyYXMsXHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgncm9vbVNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tcyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2ZpbmRSb29tcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9icmFubyBwb2tvamUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5yb29tcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBib29rUm9vbSA9IGZ1bmN0aW9uIChkYXRhKSB7Ly9UT0RPIHpqYcSFxIcgc2nEmVxyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9yZXNlcnZlJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnamV0ZW0gcHJ6ZWQgcG9zdCBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2FuY2VsQm9va2luZycse3Jvb21faWQ6IHJvb21faWQsIGJvb2tpbmdfaWQ6IGJvb2tpbmdfaWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc29sdmUgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVqZWN0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldFJvb21zOiBnZXRSb29tcyxcclxuICAgICAgICAgICAgYm9va1Jvb206IGJvb2tSb29tLFxyXG4gICAgICAgICAgICBjYW5jZWxCb29raW5nOiBjYW5jZWxCb29raW5nXHJcbiAgICAgICAgfVxyXG4gICAgfSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
