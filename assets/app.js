var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(t){return t.headers=t.headers||{},e.localStorage.token&&(t.headers.Authorization=e.localStorage.token),t}}}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("test",{url:"/test",templateUrl:"test"}),t.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,t,o){e.$state=t,e.$stateParams=o}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,t,o,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,s){if(e){var c={firstName:n,lastName:a,email:r,phoneNumber:s};o.changeUserDetails(c).then(function(e){t.reload()})}},e.cancelBooking=function(e,o){console.log("room id to:"+e+", booking_id to:"+o),n.cancelBooking(e,o).then(function(e){console.log("udało się anulować"),t.reload()})};var a=function(){o.getUserBookings().then(function(t){console.log(t),e.userBookings=t})},r=function(){o.getUserInfo().then(function(t){console.log(t),e.firstName=t.firstName,e.lastName=t.lastName,e.email=t.email,e.phone=t.phone})};e.changePassword=function(t,n,a){t&&o.changePassword(n,a).then(function(t){console.log(t.msg),e.successfulPasswordChange=!0},function(t){e.wrongPassword=!0})},e.checkDate=function(e){var t=new Date,o=new Date(e);return o>t},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,t,o,n,a,r,s,c){t.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",t.submitError=!1,t.errorMessage="",s.isLoggedIn=function(){return c.isAuthenticated},s.isLoggedIn()&&c.getUserRole().then(function(e){s.role=e.role}),t.signin=function(){console.log("login"),c.signin(t.user).then(function(e,t){s.isLogedIn=!0,c.getUserRole().then(function(e){s.role=e.role}),n.location.reload(),console.log(e)})},t.signout=function(){c.signout(),s.isLogedIn=!1,o.go("home").then(function(){n.location.reload()}),console.log("logout")},t.getUserInfo=function(){c.getUserInfo().then(function(e){console.log(e),t.userinfo=e})},t.submitForm=function(e){e?c.signup(t.user).then(function(e){console.log("Pomyślnie zarejestrowano"),t.submitError=!1,c.signin(t.user).then(function(e,t){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():o.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:t.submitError=!0,t.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:t.submitError=!0,t.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(t.submitError=!0,t.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},t.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService","voucherService",function(e,t,o,n,a,r,s,c,i,u){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays,r.price=JSON.parse(a.get("price"));var l=function(){c.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):i.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:d(),extras:r.extras}).then(function(){s.discount&&u.useVoucher(s.discount.code).then(function(e){n.go("successfulBooking")},function(e){console.log(e)})},function(e){})},r.toPrevious=function(){n.go("offer")};var d=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(t){e+=t.price*r.numOfDays}),e};l()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,t,o,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$rootScope","$cookies","$state","$location","$window","offerSvc",function(e,t,o,n,a,r,s){e.offer={},e.extras=[],e.selectedExtras=[];var c={};e.dateFrom="",e.dateTo="",e.roomName="";var i=function(){e.offer=JSON.parse(o.get("room")),e.extras=l(),c=JSON.parse(o.get("dates")),e.dateFrom=u(new Date(c.dateFrom)),e.dateTo=u(new Date(c.dateTo)),e.roomName=e.offer.room.type,e.roomPrice=e.offer.room.price*d(),e.extrasTotalPrice=0,e.calculateTotalPrice()},u=function(e){var t=e.getUTCDate(),o=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+t+"-"+o+"-"+n};e.addOrRemoveExtra=function(t){var o=e.selectedExtras.indexOf(t);t.buttonText=t.buttonToggle?"Dodaj +":"Usuń -",t.buttonToggle=!t.buttonToggle,o==-1?(e.selectedExtras.push(t),e.extrasTotalPrice+=t.price*d()):(e.selectedExtras.splice(o,1),e.extrasTotalPrice-=t.price*d()),e.calculateTotalPrice()},e.toConfirmation=function(){console.log("asdasd");var t={extras:e.selectedExtras,numOfDays:d()};o.put("extras",JSON.stringify(t)),o.put("price",JSON.stringify(e.totalPrice)),n.go("confirmation")},e.toPrevious=function(){n.go("home")},e.calculateTotalPrice=function(){void 0!=t.discount&&"zl"==t.discount.type?e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice-t.discount.amount:void 0!=t.discount&&"%"==t.discount.type?(e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice,e.totalPrice=e.totalPrice-e.totalPrice*(t.discount.amount/100)):(e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice,console.log(e.extrasTotalPrice))};var l=function(){s.getExtras().then(function(t){e.extras=t;for(var o=0;o<e.extras.length;o++)e.extras[o].buttonText="Dodaj +",e.extras[o].buttonToggle=!1})};e.addOrRemoveExtra=function(t){var o=e.selectedExtras.indexOf(t);t.buttonText=t.buttonToggle?"Dodaj +":"Usuń -",t.buttonToggle=!t.buttonToggle,e.totalPrice=0,o==-1?(e.selectedExtras.push(t),e.extrasTotalPrice+=t.price*d()):(e.selectedExtras.splice(o,1),e.extrasTotalPrice-=t.price*d()),e.calculateTotalPrice()};var d=function(){var e=864e5,t=new Date(c.dateFrom),o=new Date(c.dateTo),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());return Math.floor((a-n)/e)};t.$watch("discount",function(){e.calculateTotalPrice()}),i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$rootScope","$window","$location","roomService","voucherService","offerSvc","$filter","$state",function(e,t,o,n,a,r,s,c,i,u,l){o.dateFrom="",o.dateTo="",o.noRoomsError=!1,o.errorMsg="",o.rooms=[],o.numberOfBeds=1,o.successfulCancel=!1,o.totalPrice=0,o.extras=[],o.selectedExtras=[],o.extrasTotalPrice=0,o.selectOrAddUser=void 0,o.select=function(e){o.selectedRoom=e};var d=function(){var e=new Date;o.dateFrom=e;var t=new Date;t.setDate(t.getDate()+1),o.dateTo=t};o.init=function(){d(),o.findRooms()},o.findRooms=function(){if(o.dateFrom.getMonth()>=o.dateTo.getMonth()&&o.dateFrom.getDate()>=o.dateTo.getDate()){var e=new Date;e.setDate(o.dateFrom.getDate()+1),e.setMonth(o.dateFrom.getMonth()),o.dateTo=e}s.getRooms({from:o.dateFrom.toISOString(),to:o.dateTo.toISOString(),beds:o.numberOfBeds}).then(function(e){e.length>0?(o.rooms=e,o.noRoomsError=!1):o.noRoomsError=!0},function(e){o.noRoomsError=!0,o.errorMsg="Coś poszło nie tak."})},o.addRoom=function(e){t.put("room",JSON.stringify({room:{id:e._id,type:e.type,price:e.price}})),t.put("dates",JSON.stringify({dateFrom:o.dateFrom,dateTo:o.dateTo})),i.chooseRoom(e),l.go("offer")},o.test=function(){console.log(o.rooms),o.findRooms()},o.getAllRooms=function(){s.getAllRooms().then(function(e){o.allRooms=e,console.log(e)},function(e){})},o.dateChanged=function(){if(o.dateFrom.getMonth()>=o.dateTo.getMonth()&&o.dateFrom.getDate()>=o.dateTo.getDate()){var e=new Date;e.setDate(o.dateFrom.getDate()+1),e.setMonth(o.dateFrom.getMonth()),o.dateTo=e}},o.getAvailability=function(e){for(var t=(new Date,new Date(o.dateFrom)),n=new Date(o.dateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),s=new Date(e[a].to);if(t<s&&n>r)return"notAvailable"}return"available"},o.managmentInit=function(){d(),o.getAllRooms()},o.toBookings=function(e){t.put("selectedRoom",JSON.stringify({_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price})),$("#regulamin").modal("hide"),setTimeout(function(){l.go("managment-bookings")},500)},o.getSelectedRoom=function(){o.selectedRoom=JSON.parse(t.get("selectedRoom"))},o.checkDate=function(e){var t=new Date,o=new Date(e);return o>t},o.cancelBooking=function(e,t){console.log("room id to:"+e+", booking_id to:"+t),s.cancelBooking(e,t).then(function(e){console.log("udało się anulować"),l.reload()})},o.getRoomBookings=function(){o.getSelectedRoom(),s.getRoomBookings(o.selectedRoom._id).then(function(e){o.bookings=e.reservations})},o.selectUser=function(e){s.getUserInfo(e).then(function(e){o.selectedUser=e,console.log(o.selectedUser)})},o.toBooking=function(e,o,n){t.put("booking",JSON.stringify({room:{_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price},dateFrom:o,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){l.go("test")},500)},o.initBooking=function(){o.booking=JSON.parse(t.get("booking")),o.test.dateFrom=new Date(o.booking.dateFrom),o.test.dateTo=new Date(o.booking.dateTo),o.calculateTotalPrice(),f(),s.getUsersEmails().then(function(e){o.users=JSON.parse(JSON.stringify(e))})},o.submitBookForm=function(){var e=null;if(o.selectOrAddUser){if(void 0==o.test.email)var e={email:""+o.test.firstName+o.test.lastName+o.test.phone,firstName:o.test.firstName,lastName:o.test.lastName,phone:o.test.phone};else var e={email:o.test.email,firstName:o.test.firstName,lastName:o.test.lastName,phone:o.test.phone};s.signupAndBook(e,o.booking.room._id,{dateFrom:o.test.dateFrom,dateTo:o.test.dateTo},o.totalPrice,o.selectedExtras).then(function(e){n.discount&&c.useVoucher(n.discount.code).then(function(e){},function(e){console.log(e)})})}else e=JSON.parse(o.selectedUserBooking),s.adminBook(o.booking.room._id,e.email,{dateFrom:o.test.dateFrom,dateTo:o.test.dateTo},o.totalPrice,o.selectedExtras).then(function(e){n.discount&&c.useVoucher(n.discount.code).then(function(e){},function(e){console.log(e)})})};var g=function(){var e=864e5,t=new Date(o.test.dateFrom),n=new Date(o.test.dateTo),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};o.calculateTotalPrice=function(){o.booking&&(void 0!=n.discount&&"zl"==n.discount.type?o.totalPrice=g()*o.booking.room.price+o.extrasTotalPrice-n.discount.amount:void 0!=n.discount&&"%"==n.discount.type?(o.totalPrice=g()*o.booking.room.price+o.extrasTotalPrice,o.totalPrice=o.totalPrice-o.totalPrice*(n.discount.amount/100)):(o.totalPrice=g()*o.booking.room.price+o.extrasTotalPrice,console.log(o.extrasTotalPrice)))};var f=function(){i.getExtras().then(function(e){o.extras=e;for(var t=0;t<o.extras.length;t++)o.extras[t].buttonText="Dodaj +",o.extras[t].buttonToggle=!1})};o.addOrRemoveExtra=function(e){var t=o.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,o.totalPrice=0,t==-1?(o.selectedExtras.push(e),o.extrasTotalPrice+=e.price*g()):(o.selectedExtras.splice(t,1),o.extrasTotalPrice-=e.price*g()),o.calculateTotalPrice()},o.paidClass=function(e){return e?"btn-success":"btn-warning"},o.pay=function(e){s.pay(e._id,!e.paid).then(function(t){console.log(t),e.paid=!e.paid})},n.$watch("discount",function(){o.calculateTotalPrice()})}]),angular.module("app").controller("userCtrl",["$scope","$state","AuthService","roomService","userService",function(e,t,o,n,a){a.getAllUsers().then(function(t){e.users=t,console.log(e.users)}),e.selectUser=function(t){e.selectedUser=t,console.log(e.selectedUser)},e.changeUserDetails=function(o){if(o){var n={firstName:e.selectedUser.firstName,lastName:e.selectedUser.lastName,email:e.selectedUser.email,phoneNumber:e.selectedUser.phoneNumber,role:e.selectedUser.role};a.changeUserDetails(n).then(function(e){t.reload()})}}}]),angular.module("app").controller("voucherCtrl",["$scope","$rootScope","voucherService",function(e,t,o){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var t="",o=0;o<e.length;o++){if(!n(e.charAt(o)))return t=Number(t);t+=e.charAt(o)}return t=Number(t)}e.generateVouchers=function(){e.vouchers={codes:[]};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=e.voucherExpiryDate;if(o<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var n="",r=0;r<4;r++){for(var s=0;s<5;s++)n+=t.charAt(Math.floor(Math.random()*t.length));3!=r&&(n+="-")}e.vouchers.codes.push(n)}var c=e.discount.charAt(e.discount.length-1);"%"===c?e.vouchers.discountType="%":"ł"===c&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=a(e.discount),e.vouchers.expiryDate=o,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){console.log(e.vouchers),o.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){console.log(e.voucher),o.checkVoucher(e.voucher.toString()).then(function(o){console.log(o),e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+o.discount+o.discountType,t.discount={amount:o.discount,type:o.discountType,code:e.voucher},console.log(o.discount)},function(o){console.log(o),t.discount=void 0,e.voucherNotFound=o,e.voucherFound=void 0})},e.codeChanged=function(){e.bookingFrm.$valid||(e.voucherFound=void 0,e.voucherNotFound=void 0,t.discount=void 0)}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,t){if(angular.isArray(e)){for(var o=[],n={},a=0;a<e.length;a++){var r=e[a][t];angular.isUndefined(n[r])&&(n[r]=!0,o.push(e[a]))}return o}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,t,o){function n(){var e=window.localStorage.getItem(i);console.log("loading User info..."),e&&s(e)}function a(){c=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(i)}function r(e){window.localStorage.setItem(i,e),s(e)}function s(t){u=!0,c=t,e.defaults.headers.common.Authorization=c}var c,i="token",u=!1,l=function(o){return t(function(t,n){e.post("/api/authenticate",o).then(function(e){e.data.success?(r(e.data.token),t(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},g=function(o){return t(function(t,n){e.post("/api/signup",o).then(function(e){e.data.success?(console.log("jestem w resolve"),t(e.data.msg)):n(e.data.msg)})})};n();var f=function(){return t(function(t,o){e.get("/api/userinfo").then(function(e){e.data.success?t({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):o(e.data.msg)})})},m=function(){return t(function(t,o){e.get("/api/getUserBookings").then(function(e){t(e.data)})})},p=function(o){return t(function(t,a){e.post("/api/changeUserDetails",o).then(function(s){s.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:o.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),t({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(o,n){return t(function(t,a){e.post("/api/change-password",{oldPass:o,newPass:n}).then(function(e){e.data.success?t({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return t(function(t,o){e.get("/api/userinfo").then(function(e){e.data.success?t({role:e.data.role}):o(e.data.msg)})})};return{signin:l,signout:d,signup:g,getUserInfo:f,getUserBookings:m,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,t){var o=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,o){t.get("/api/getExtras").then(function(t){t.data.success?e(t.data.extras):o(t.data.error)})})};return{chooseRoom:o,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,t){var o=function(o){return e(function(e,n){t.post("/api/findRooms",o).then(function(t){t.data.success?(console.log("Pobrano pokoje"),e(t.data.rooms)):n(t.data.error)})})},n=function(o){return e(function(e,n){t.post("/api/reserve",o).then(function(t){t.data.success?e(t.data.success):n(t.data.error)})})},a=function(o,n){return e(function(e,a){console.log("jetem przed post cancel"),t.post("/api/cancelBooking",{room_id:o,booking_id:n}).then(function(t){t.data.success?(console.log("resolve cancel"),e(t.data.success)):(console.log("reject cancel"),a(t.data.error))})})},r=function(){return e(function(e,o){t.get("/api/getRooms").then(function(t){t.data.success?e(t.data.result):o(t.data.error)})})},s=function(o){return e(function(e,n){t.post("/api/getRoomBookings",{room_id:o}).then(function(t){console.log(t.data[0].reservations),e(t.data[0])},function(e){n(e.data)})})},c=function(o){return e(function(e,n){t.post("/api/getUserInfo",{email:o}).then(function(t){t.data.error?n(t.data):e(t.data)},function(e){n(e.data)})})},i=function(o,n,a,r,s){return console.log(s),e(function(e,c){t.post("/api/signupAndBook",{firstName:o.firstName,lastName:o.lastName,email:o.email,number:o.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(t){e("OK")},function(e){c("Wystąpił błąd podczas rezerwacji")})})},u=function(o,n,a,r,s){return console.log("Serwis: roomSvc, funkcja: adminBook | id:"+o+", email: "+n),e(function(e,c){t.post("/api/adminBook",{id:o,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(t){t.data.success?e("OK"):c("Wystąpił błąd podczas rezerwacji")},function(e){c("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,o){t.get("/api/getUsersEmails").then(function(t){(t.data.success=!1)?o("Nie znaleziono użytkowników"):e(t.data)},function(e){o("Nie znaleziono użytkowników")})})},d=function(o,n){return e(function(e,a){t.post("/api/paid",{id:o,pay:n}).then(function(t){t.data.success?e(!0):a(!1)})})};return{getRooms:o,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s,getUserInfo:c,signupAndBook:i,adminBook:u,getUsersEmails:l,pay:d}}]),angular.module("app").service("userService",["$q","$http",function(e,t){var o=function(){return e(function(e,o){t.get("/api/getAllUsers").then(function(t){e(t.data)},function(e){o(e.data)})})},n=function(o){return e(function(e,n){t.post("/api/adminChangeUserDetails",o).then(function(t){t.data.success?e({success:!0,msg:"Pomyślnie zmieniono dane"}):n({success:!1,msg:"coś poszło nie tak"})})})};return{getAllUsers:o,changeUserDetails:n}}]),angular.module("app").service("voucherService",["$q","$http",function(e,t){var o=function(o){return console.log(o),e(function(e,n){t.post("/api/saveVouchers",o).then(function(t){t.data.success?e(t.data.msg):n(t.data.msg)},function(e){n(e.data.msg)})})},n=function(o){return e(function(e,n){t.post("/api/checkVoucher",{voucherCode:o}).then(function(t){t.data.success&&new Date(t.data.voucher.expiryDate)<new Date?n("Termin miną"):t.data.success&&t.data.voucher.used?n("Kod został już wykożystany"):t.data.success&&!t.data.voucher.used?e(t.data.voucher):n(t.data.error)})})},a=function(o){return e(function(e,n){t.post("/api/useVoucher",{code:o}).then(function(t){t.data.success?e("Klucz wykorzystany."):n(t.data.error)})})};return{saveVouchers:o,checkVoucher:n,useVoucher:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy91c2VyQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3ZvdWNoZXJDb250cm9sbGVyLmpzIiwiZmlsbHRlcnMvcm9vbUZpbHRlci5qcyIsInNlcnZpY2VzL2F1dGhvcml6YXRpb24uc3ZjLmpzIiwic2VydmljZXMvb2ZmZXIuc3ZjLmpzIiwic2VydmljZXMvcm9vbS5zdmMuanMiLCJzZXJ2aWNlcy91c2VyLnN2Yy5qcyIsInNlcnZpY2VzL3ZvdWNoZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwibG9jYWxTdG9yYWdlIiwidG9rZW4iLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRzY29wZSIsIkF1dGhTZXJ2aWNlIiwicm9vbVNlcnZpY2UiLCJyZWdleCIsImlzQWN0aXZlIiwidmlld0xvY2F0aW9uIiwiJGxvY2F0aW9uIiwicGF0aCIsImNoYW5nZVVzZXJEZXRhaWxzIiwiaXNWYWxpZCIsImZOYW1lIiwibE5hbWUiLCJuRW1haWwiLCJuUGhvbmUiLCJuZXdEZXRhaWxzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lTnVtYmVyIiwidGhlbiIsImEiLCJyZWxvYWQiLCJjYW5jZWxCb29raW5nIiwicm9vbV9pZCIsImJvb2tpbmdfaWQiLCJjb25zb2xlIiwibG9nIiwiZ2V0VXNlckJvb2tpbmdzIiwibXNnIiwidXNlckJvb2tpbmdzIiwiZ2V0SW5mbyIsImdldFVzZXJJbmZvIiwidXNlciIsInBob25lIiwiY2hhbmdlUGFzc3dvcmQiLCJ2YWxpZCIsIm9sZFAiLCJuZXdQIiwicmVzIiwic3VjY2Vzc2Z1bFBhc3N3b3JkQ2hhbmdlIiwicmVqIiwid3JvbmdQYXNzd29yZCIsImNoZWNrRGF0ZSIsImRhdGUiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJkYXRlRnJvbSIsIiRxIiwiJHJvdXRlIiwic3VibWl0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpc0xvZ2dlZEluIiwiaXNBdXRoZW50aWNhdGVkIiwiZ2V0VXNlclJvbGUiLCJyZXN1bHQiLCJyb2xlIiwic2lnbmluIiwic3VjY2VzcyIsImlzTG9nZWRJbiIsImxvY2F0aW9uIiwic2lnbm91dCIsImdvIiwidXNlcmluZm8iLCJzdWJtaXRGb3JtIiwic2lnbnVwIiwiZGF0YSIsInRvU3RyaW5nIiwiY29kZSIsIiR3YXRjaCIsIiRjb29raWVzIiwidm91Y2hlclNlcnZpY2UiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsInByaWNlIiwiaW5pdCIsInJlc2VydmUiLCJ0ZXJtcyIsImFsZXJ0IiwiYm9va1Jvb20iLCJpZCIsIl9pZCIsImZyb20iLCJ0byIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJkaXNjb3VudCIsInVzZVZvdWNoZXIiLCJ2UmVzdWx0IiwiZXJyb3IiLCJ0b1ByZXZpb3VzIiwidG90YWwiLCJmb3JFYWNoIiwiZSIsImRpcmVjdGl2ZSIsInJlcXVpcmUiLCJzY29wZSIsIm90aGVyTW9kZWxWYWx1ZSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cmlidXRlcyIsIm5nTW9kZWwiLCIkdmFsaWRhdG9ycyIsImNvbXBhcmVUbyIsIm1vZGVsVmFsdWUiLCIkdmFsaWRhdGUiLCJ0ZW1wbGF0ZSIsImF0dHIiLCJtQ3RybCIsInZhbGlkYXRpb24iLCJ2b3VjaGVyIiwibGVuZ3RoIiwiY2hhckF0IiwiJHNldFZhbGlkaXR5IiwiJHBhcnNlcnMiLCJwdXNoIiwib2ZmZXJTdmMiLCJvZmZlciIsInNlbGVjdGVkRXh0cmFzIiwiZGF0ZXMiLCJyb29tTmFtZSIsInNob3dPZmZlciIsImdldEV4dHJhcyIsImRhdGVQcmVldGlmeSIsInR5cGUiLCJyb29tUHJpY2UiLCJjYWxjdWxhdGVEaWZmT2ZEYXlzIiwiZXh0cmFzVG90YWxQcmljZSIsImRheSIsImdldFVUQ0RhdGUiLCJtb250aCIsImdldFVUQ01vbnRoIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiYWRkT3JSZW1vdmVFeHRyYSIsImV4dHJhIiwiaW5kZXgiLCJpbmRleE9mIiwiYnV0dG9uVGV4dCIsImJ1dHRvblRvZ2dsZSIsInNwbGljZSIsInRvQ29uZmlybWF0aW9uIiwicHV0Iiwic3RyaW5naWZ5IiwidG90YWxQcmljZSIsInVuZGVmaW5lZCIsImFtb3VudCIsImV4dHJhc0RhdGEiLCJpIiwiTVNfUEVSX0RBWSIsImRhdGVGcm9tVVRDIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkYXRlVG9VVEMiLCJNYXRoIiwiZmxvb3IiLCIkZmlsdGVyIiwibm9Sb29tc0Vycm9yIiwiZXJyb3JNc2ciLCJyb29tcyIsIm51bWJlck9mQmVkcyIsInN1Y2Nlc3NmdWxDYW5jZWwiLCJzZWxlY3RPckFkZFVzZXIiLCJzZWxlY3QiLCJzZWxlY3RlZFJvb20iLCJzZXREYXRlIiwiZGF0ZVRlbXAiLCJmaW5kUm9vbXMiLCJzZXRNb250aCIsImdldFJvb21zIiwidG9JU09TdHJpbmciLCJiZWRzIiwicm9vbXNEYXRhIiwiYWRkUm9vbSIsImNob29zZVJvb20iLCJ0ZXN0IiwiZ2V0QWxsUm9vbXMiLCJhbGxSb29tcyIsImRhdGVDaGFuZ2VkIiwiZ2V0QXZhaWxhYmlsaXR5IiwicmVzZXJ2YXRpb25zIiwicm9vbURhdGVGcm9tIiwicm9vbURhdGVUbyIsIm1hbmFnbWVudEluaXQiLCJ0b0Jvb2tpbmdzIiwibnVtYmVyIiwiJCIsIm1vZGFsIiwic2V0VGltZW91dCIsImdldFNlbGVjdGVkUm9vbSIsImdldFJvb21Cb29raW5ncyIsImIiLCJib29raW5ncyIsInNlbGVjdFVzZXIiLCJ1Iiwic2VsZWN0ZWRVc2VyIiwidG9Cb29raW5nIiwiaW5pdEJvb2tpbmciLCJib29raW5nIiwiZ2V0VXNlcnNFbWFpbHMiLCJ1c2VycyIsInN1Ym1pdEJvb2tGb3JtIiwic2lnbnVwQW5kQm9vayIsInNlbGVjdGVkVXNlckJvb2tpbmciLCJhZG1pbkJvb2siLCJwYWlkQ2xhc3MiLCJwYWlkIiwicGF5IiwidXNlclNlcnZpY2UiLCJnZXRBbGxVc2VycyIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImNvbnZlcnRUb051bWJlciIsIk51bWJlciIsImdlbmVyYXRlVm91Y2hlcnMiLCJ2b3VjaGVycyIsImNvZGVzIiwicG9zc2libGUiLCJleHBpcnlEYXRlIiwidm91Y2hlckV4cGlyeURhdGUiLCJ2b3VjaGVyRXJyb3IiLCJ2b3VjaGVyc0dlbmVyYXRlZCIsImdlbmVyYXRlZFZvdWNoZXJzIiwibnVtYmVyT2ZWb3VjaGVycyIsImoiLCJyYW5kb20iLCJsYXN0IiwiZGlzY291bnRUeXBlIiwidm91Y2hlcnNTYXZlZCIsInNhdmVWb3VjaGVycyIsImNoZWNrVm91Y2hlciIsInZvdWNoZXJOb3RGb3VuZCIsInZvdWNoZXJGb3VuZCIsImNvZGVDaGFuZ2VkIiwiYm9va2luZ0ZybSIsIiR2YWxpZCIsImZpbHRlciIsInByb3BlcnR5TmFtZSIsImlzQXJyYXkiLCJrZXlzIiwidmFsIiwiaXNVbmRlZmluZWQiLCJzZXJ2aWNlIiwiJGh0dHAiLCJsb2FkVXNlckluZm8iLCJ3aW5kb3ciLCJnZXRJdGVtIiwiTE9DQUxfVE9LRU4iLCJ1c2VySW5mbyIsImRlc3Ryb3lVc2VySW5mbyIsImF1dGhUb2tlbiIsImRlZmF1bHRzIiwiY29tbW9uIiwicmVtb3ZlSXRlbSIsInN0b3JlVXNlckluZm8iLCJzZXRJdGVtIiwicmVzb2x2ZSIsInJlamVjdCIsInBvc3QiLCJyZXN1bHQyIiwib2xkUGFzcyIsIm5ld1Bhc3MiLCJjaG9vc2VuUm9vbSIsImdldFJvb20iLCJyZXNlcnZhdGlvbl9pZCIsInZvdWNoZXJDb2RlIiwidXNlZCJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxhQ0FBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsbUJBQUEsVUFBQSxTQUFBQyxHQUNBLE9BQ0FDLFFBQUEsU0FBQUMsR0FNQSxNQUxBQSxHQUFBQyxRQUFBRCxFQUFBQyxZQUNBSCxFQUFBSSxhQUFBQyxRQUNBSCxFQUFBQyxRQUFBLGNBQUFILEVBQUFJLGFBQUFDLE9BR0FILE9BS0FBLFFBQUEsaUJBQUEscUJBQUEsU0FBQUksRUFBQUMsR0FDQUQsRUFDQUUsTUFBQSxRQUNBQyxJQUFBLFFBQ0FDLFdBQUEsV0FDQUMsWUFBQSxTQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUUsWUFBQSxVQUVBSCxNQUFBLGNBQ0FDLElBQUEsY0FDQUUsWUFBQSxlQUVBSCxNQUFBLFdBQ0FDLElBQUEsV0FDQUUsWUFBQSxZQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUMsV0FBQSxZQUNBQyxZQUFBLFVBRUFILE1BQUEsZ0JBQ0FDLElBQUEsZ0JBQ0FFLFlBQUEsaUJBRUFILE1BQUEscUJBQ0FDLElBQUEscUJBQ0FFLFlBQUEsc0JBRUFILE1BQUEsb0JBQ0FDLElBQUEsb0JBQ0FFLFlBQUEscUJBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsb0JBQ0FDLElBQUEs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LEtBQUEsU0FBQW1DLEdBQ0FBLEVBQUFXLEtBQUFSLFFBQ0FnTixFQUFBbk4sRUFBQVcsS0FBQXJDLEtBRUE4TyxFQUFBcE4sRUFBQVcsS0FBQXJDLE1BQ0EsU0FBQTBCLEdBQ0FvTixFQUFBcE4sRUFBQVcsS0FBQXJDLFVBS0FtTixFQUFBLFNBQUE3SCxHQUNBLE1BQUFuRSxHQUFBLFNBQUEwTixFQUFBQyxHQUNBZCxFQUFBZSxLQUFBLHFCQUFBTyxZQUFBaEssSUFBQS9GLEtBQUEsU0FBQW1DLEdBQ0FBLEVBQUFXLEtBQUFSLFNBQUEsR0FBQVosTUFBQVMsRUFBQVcsS0FBQWlELFFBQUFpSCxZQUFBLEdBQUF0TCxNQUNBNk4sRUFBQSxlQUVBcE4sRUFBQVcsS0FBQVIsU0FBQUgsRUFBQVcsS0FBQWlELFFBQUFpSyxLQUNBVCxFQUFBLDhCQUVBcE4sRUFBQVcsS0FBQVIsVUFBQUgsRUFBQVcsS0FBQWlELFFBQUFpSyxLQUNBVixFQUFBbk4sRUFBQVcsS0FBQWlELFNBR0F3SixFQUFBcE4sRUFBQVcsS0FBQTRCLFlBTUFGLEVBQUEsU0FBQXVCLEdBQ0EsTUFBQW5FLEdBQUEsU0FBQTBOLEVBQUFDLEdBQ0FkLEVBQUFlLEtBQUEsbUJBQUF4TSxLQUFBK0MsSUFBQS9GLEtBQUEsU0FBQW1DLEdBQ0FBLEVBQUFXLEtBQUFSLFFBQ0FnTixFQUFBLHVCQUVBQyxFQUFBcE4sRUFBQVcsS0FBQTRCLFdBS0EsUUFDQWlKLGFBQUFBLEVBQ0FDLGFBQUFBLEVBQ0FwSixXQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMjIuMDkuMjAxNi5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJywgJ3VpLnJvdXRlcicsICduZ0Nvb2tpZXMnXSk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIGZ1bmN0aW9uICgkd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFpbicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncm9vbUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Jvb21zJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcm9vbXMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdyb29tcydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdyZXN0YXVyYW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcmVzdGF1cmFudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Jlc3RhdXJhbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGFjdCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbnRhY3QnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250YWN0J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ29mZmVyJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvb2ZmZXInLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ29mZmVyQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbmZpcm1hdGlvbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsQm9va2luZycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsU2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hY2NvdW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYWNjb3VudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWduaW4nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWduaW4nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWduaW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuYm9va2luZ3MnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Jvb2tpbmdzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuZGV0YWlscycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkZXRhaWxzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuY2hhbmdlUGFzc3dvcmQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jaGFuZ2VQYXNzd29yZCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NoYW5nZVBhc3N3b3JkJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQucm9vbXMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtcm9vbXMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtcm9vbXMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnVzZXJzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXVzZXJzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXVzZXJzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC52b3VjaGVycycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC12b3VjaGVycycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC12b3VjaGVycydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQtYm9va2luZ3MnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LWJvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21hbmFnbWVudC1ib29raW5ncydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCd0ZXN0Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdGVzdCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Rlc3QnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbWFpbicpXHJcbiAgICB9KVxyXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsXHJcbiAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRzdGF0ZVBhcmFtcyA9ICRzdGF0ZVBhcmFtcztcclxuXHJcbiAgICB9XSk7XHJcbiAgICAvKlxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcclxuICAgICAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgICAgICAud2hlbignLycsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21haW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbnVwJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3NpZ25pbicsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc2lnbmluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3VzZXJpbmZvJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdXNlcmluZm8nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3VjY2Vzc2Z1bFNpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9vZmZlcicse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvb2ZmZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvY29uZmlybWF0aW9uJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9jb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc3VjY2Vzc2Z1bEJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub3RoZXJ3aXNlKCcvJyk7XHJcbiAgICB9KTtcclxuKi9cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignYWNjQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24gKHZpZXdMb2NhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdmlld0xvY2F0aW9uID09PSAkbG9jYXRpb24ucGF0aCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24oaXNWYWxpZCwgZk5hbWUsIGxOYW1lLCBuRW1haWwsIG5QaG9uZSl7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0RldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBmTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogbE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IG5FbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogblBob25lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY2hhbmdlVXNlckRldGFpbHMobmV3RGV0YWlscykudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8gcHJ6eWNpc2sgYW51bG93YW5pYSB0eWxrbyBkbGEgcG9rb2ksIGt0w7NyeWNoIGRhdGEgbmEgdG8gcG96d2FsYVxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyQm9va2luZ3MoKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlckJvb2tpbmdzID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlyc3ROYW1lID0gdXNlci5maXJzdE5hbWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE5hbWUgPSB1c2VyLmxhc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5waG9uZSA9IHVzZXIucGhvbmU7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHVzdGF3aWMgcGFzc3kgbmEgemVybyBwbyDFvMSFZGFuaXUgaGh0cFxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICh2YWxpZCxvbGRQLCBuZXdQKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKG9sZFAsIG5ld1ApLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5tc2cpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VjY2Vzc2Z1bFBhc3N3b3JkQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlaikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS53cm9uZ1Bhc3N3b3JkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBnZXRJbmZvKCk7XHJcbiAgICAgICAgZ2V0VXNlckJvb2tpbmdzKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2F1dGhDdHJsJywgZnVuY3Rpb24gKCRxLCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgJGxvY2F0aW9uLCAkcm91dGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKSB7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUucmVnZXggPSAnKFxcXFwrWzAtOV1cXFxcZHsxfSkqKFxcXFxzKSooWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICcnO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZDtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgaWYoJHJvb3RTY29wZS5pc0xvZ2dlZEluKCkpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUucm9sZSA9IHJlc3VsdC5yb2xlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgXHJcbiAgICAgICAgJHNjb3BlLnNpZ25pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luJyk7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ25pbigkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAobXNnLCBzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyUm9sZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUucm9sZSA9IHJlc3VsdC5yb2xlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy8nO1xyXG4gICAgICAgICAgICAgICAgLy8kc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWdub3V0KCk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dlZEluID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgLy9zdGF0ZS5nbygnaG9tZScpO1xyXG4gICAgICAgICAgICAvLyRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ291dCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmluZm8gPSBtc2c7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8vVE9ETyBzdGF0ZS5yZWxvYWRcclxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbnVwKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvbXnFm2xuaWUgemFyZWplc3Ryb3dhbm8nKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSA9PSAnaHR0cDovL2xvY2FsaG9zdDozMDAxLyMvY29uZmlybWF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bFNpZ251cCcpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmPScjL3N1Y2Nlc3NmdWxTaWdudXAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGRhdGEuY29kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTEwMDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdXeWJyYW55IGVtYWlsIGplc3QganXFvCB6YXJlamVzdHJvd2FueS4gUHJvc3rEmSB3eWJyYcSHIGlubnkuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnVXBzcyBjb8WbIHBvc3rFgm8gbmllIHRhay4gUHJvc3rEmSBzcHLDs2Jvd2HEhyBww7PFum5pZWouJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdzdWJtaXRFcnJvcicsIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JNZXNzYWdlKVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHEsICR3aW5kb3csICRsb2NhdGlvbiwgJHN0YXRlLCAkY29va2llcywgJHNjb3BlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UsIHZvdWNoZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICRzY29wZS5yb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVGcm9tO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZVRvO1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLmV4dHJhcztcclxuICAgICAgICAkc2NvcGUubnVtT2ZEYXlzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5udW1PZkRheXM7XHJcbiAgICAgICAgJHNjb3BlLnByaWNlID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3ByaWNlJykpO1xyXG5cclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkID8gJHNjb3BlLmlzU2lnbmVkSW4gPSB0cnVlIDogJHNjb3BlLmlzU2lnbmVkSW4gPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLnJlc2VydmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS50ZXJtcyAhPSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1ByemVkIHBvdHdpZXJkemVuaWVtIHJlemVyd2FjamkgbmFsZcW8eSB6YWFrY2VwdG93YcSHcmVndWxhbWluLicpO1xyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2UuYm9va1Jvb20oe2lkOiAkc2NvcGUucm9vbS5faWQsIGZyb206ICRzY29wZS5kYXRlRnJvbSwgdG86ICRzY29wZS5kYXRlVG8sIHByaWNlOiBjYWxjdWxhdGVUb3RhbFByaWNlKCksIGV4dHJhczogJHNjb3BlLmV4dHJhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLnVzZVZvdWNoZXIoJHJvb3RTY29wZS5kaXNjb3VudC5jb2RlKS50aGVuKGZ1bmN0aW9uICh2UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdWNjZXNzZnVsQm9va2luZycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gd3nFm3dpZXRsZW5pZSBlcnJyb3JhXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b1ByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL29mZmVyJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ29mZmVyJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdG90YWwgPSAoJHNjb3BlLnJvb20ucHJpY2UgKiAkc2NvcGUubnVtT2ZEYXlzKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBlLnByaWNlICogJHNjb3BlLm51bU9mRGF5cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHpyb2JpZW5pZSByZWplc3RyYWNqaShtb8W8ZSBwcnplbmllc2llbmllIG5hIHNpZ251cCB2aWV3PyBkbyByb3p3YcW8ZW5pYSkgaSBvYnPFgnVnYSBixYLEmWTDs3cobW/FvGUgamFrb8WbIHBvxYLEhWN6ecSHIG9ieWR3YSBsb2dvd2FuaWEgaSByZWplc3RyYWNqZSB3IGplZG5vPylcclxuICAgICAgICAvL1RPRE8gT2JzbHVnYSBibGVkb3cgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGN6ZWdvcyBkbyB3aWRva3UgcmV6ZXJ3YWpjaVxyXG4gICAgICAgIC8vVE9ETyBwb3Vzw7N3YcSHIGpha2llxZsgaW5pdHkod3lzdGFjenkgd3lvxYJhxIcgZnVua2NqxJkgdyBrb250cm9sZXJ6ZSBsdWIgc3J2KVxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGNhxYJlaiBvYnPFgnVnaSBrb250YSh6bWlhbmEgaGFzxYJhLCBudW1lcnUgdGVsZWZvbnVbZG9kYW5pZSBsdWIgem1pYW5hXSwgcG9kZ2zEhWR1IHJlemVyd2FjamksIGl0cCkgb3JheiBvYnPFgnVnaSBob3RlbHUoQ1JVRCBkb2RhdGvDs3csIHBva29qaSBpdHApLlxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIG1vxbxlIGpha2nFmyB3eWtyZXPDs3cgbmEgdGVtYXQgb2JjacSFxbxlbmlhIHBva29qaSBsdWIgamFracWbIHByenljaG9kw7N3IGN6eSBjb8WbIGFsYm8gamFpZcWbIGNvxZsgZG8gZ2VuZXJvd2FuaWUgcGRmIHogcmFwb3J0ZW1cclxuICAgICAgICAvL1RPRE8gcG96bWllbmlhxIcgc8WCb3dhIHJlc2VydmF0aW9uIGl0cCBuYSBib29raW5nXHJcbiAgICAgICAgLy9UT0RPIHBvd2lhZG9taWVuaWUgbyBjaWFzdGVjemthY2hcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBwb2RnbMSFZHUgb2LFgm/FvGVuaWEgaG90ZWx1IGphayB3IGtpbmkoMyBzdGFueTogd29sbnksIHphcmV6ZXJ3b3dhbnksIHphamV0eSlcclxuICAgICAgICAvL1RPRE8gemJhZGFuaWUgY3p5IC5ydW4gc3RhdGVQcm92aWRlcmEgcG9jemVibmVcclxuICAgICAgICAvL1RPRE8gcG96bmFuaWUgc3RhdGVQcm92aWRlcmEgaSBkb2RhbmllIG5lc3RlZCB2aWV3c1xyXG4gICAgICAgIC8vVE9ETyBuYSBnxYLDs3duZWogc3Ryb25pZSB6cm9iacSHxbxlYnkgZGF0YSBiecWCxIUgY29uYWptbmllaiBqZWRlbiBkemllbiByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIHptaWFuYSByZWdleCBuYSByb290U2NvcGUgamVzbGkgbW96bGl3ZVxyXG4gICAgICAgIC8vVE9EbyBkYXRhIHJlemVyd2FjamkgdHlsa28gb2QgZGF0eSBkemlzaWVqc3plaiAoYmV6IHJlemVyd2FjamkgdyBwcnplc3rFgm/Fm2NpKVxyXG4gICAgICAgIC8vVE9ETyBrb250b1xyXG4gICAgICAgIC8vem1pYW5hIGRhbnljaFxyXG4gICAgICAgIC8vem1pYW5hIGhhc8WCYVxyXG4gICAgICAgIC8vem9iYWN6ZW5pZSByZXplcndhY2ppXHJcbiAgICAgICAgLy9hbnVsb3dhbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL1xyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ2NvbXBhcmVUbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiBcIm5nTW9kZWxcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG90aGVyTW9kZWxWYWx1ZTogXCI9Y29tcGFyZVRvXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMsIG5nTW9kZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmNvbXBhcmVUbyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZSA9PSBzY29wZS5vdGhlck1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcIm90aGVyTW9kZWxWYWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoJ3VzZXJJbmZvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8cD5zaWFsYWxhPC9wPidcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLypcclxuICAgIC5kaXJlY3RpdmUoJ215RGlyZWN0aXZlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbUN0cmwpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG15VmFsaWRhdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKFwiZVwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgnY2hhckUnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ2NoYXJFJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtQ3RybC4kcGFyc2Vycy5wdXNoKG15VmFsaWRhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiAgICAqL1xyXG4gICAgLmRpcmVjdGl2ZSgndm91Y2hlcmNoZWNrJywgZnVuY3Rpb24gKHZvdWNoZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0aW9uKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih2b3VjaGVyLmxlbmd0aCA9PSAyMyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZvdWNoZXIuY2hhckF0KDUpID09ICctJyAmJiB2b3VjaGVyLmNoYXJBdCgxMSkgJiYgdm91Y2hlci5jaGFyQXQoMTcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b3VjaGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbUN0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdvZmZlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCAkY29va2llcywgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3csIG9mZmVyU3ZjKSB7XHJcbiAgICAgICAgJHNjb3BlLm9mZmVyID0ge307XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgIHZhciBkYXRlcyA9IHt9O1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAnJztcclxuXHJcblxyXG4gICAgICAgIHZhciBzaG93T2ZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vZmZlciA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZ2V0RXh0cmFzKCk7XHJcblxyXG4gICAgICAgICAgICBkYXRlcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZVRvKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAkc2NvcGUub2ZmZXIucm9vbS50eXBlO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbVByaWNlID0gJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGF0ZVByZWV0aWZ5ID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnK2RheSsnLScrbW9udGgrJy0nK3llYXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FzZGFzZCcpO1xyXG4gICAgICAgICAgICB2YXIgZXh0cmFzID0ge2V4dHJhczogJHNjb3BlLnNlbGVjdGVkRXh0cmFzLCBudW1PZkRheXM6IGNhbGN1bGF0ZURpZmZPZkRheXMoKX07XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnZXh0cmFzJywgSlNPTi5zdHJpbmdpZnkoZXh0cmFzKSk7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncHJpY2UnLCBKU09OLnN0cmluZ2lmeSgkc2NvcGUudG90YWxQcmljZSkpO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb25maXJtYXRpb24nKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b1ByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL21haW4nXHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50ICE9IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLmRpc2NvdW50LnR5cGUgPT0gJ3psJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5vZmZlci5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlKSAtICRyb290U2NvcGUuZGlzY291bnQuYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnJScpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5vZmZlci5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gJHNjb3BlLnRvdGFsUHJpY2UgLSAoJHNjb3BlLnRvdGFsUHJpY2UgKiAoJHJvb3RTY29wZS5kaXNjb3VudC5hbW91bnQgLyAxMDApKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUub2ZmZXIucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZXh0cmFzVG90YWxQcmljZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5nZXRFeHRyYXMoKS50aGVuKGZ1bmN0aW9uIChleHRyYXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZXh0cmFzRGF0YTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAgOyBpIDwgJHNjb3BlLmV4dHJhcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25UZXh0ID0gJ0RvZGFqICsnO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVG9nZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlRGlmZk9mRGF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIE1TX1BFUl9EQVkgPSAxMDAwICogNjAgKiA2MCAqIDI0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlcy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZShkYXRlcy5kYXRlVG8pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21VVEMgPSBEYXRlLlVUQyhkYXRlRnJvbS5nZXRGdWxsWWVhcigpLCBkYXRlRnJvbS5nZXRNb250aCgpLCBkYXRlRnJvbS5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvVVRDID0gRGF0ZS5VVEMoZGF0ZVRvLmdldEZ1bGxZZWFyKCksIGRhdGVUby5nZXRNb250aCgpLCBkYXRlVG8uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGRhdGVUb1VUQyAtIGRhdGVGcm9tVVRDKSAvIE1TX1BFUl9EQVkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJHdhdGNoKCdkaXNjb3VudCcsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHNob3dPZmZlcigpO1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA2LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdyb29tQ3RybCcsIGZ1bmN0aW9uICgkcSwgJGNvb2tpZXMsICRzY29wZSwgJHJvb3RTY29wZSwgJHdpbmRvdywgJGxvY2F0aW9uLCByb29tU2VydmljZSwgdm91Y2hlclNlcnZpY2UsIG9mZmVyU3ZjLCRmaWx0ZXIsICRzdGF0ZSkge1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yTXNnID0nJztcclxuICAgICAgICAkc2NvcGUucm9vbXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUubnVtYmVyT2ZCZWRzID0gMTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Y2Nlc3NmdWxDYW5jZWwgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzID0gW107XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0T3JBZGRVc2VyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUm9vbSA9IHJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNldERhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZGF0ZVRlbXAuc2V0RGF0ZShkYXRlVGVtcC5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlVGVtcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZpbmRSb29tcyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gb2dhcm5hYyBzaWUgeiB0eW0gYmVkcywgd3lzenVraXdhYyBwb2tvamUgbyBwb2RhbmVqIGlsb3NjaSBvc29iIGkgbmF6d2FjIHRvIGpha29zIHcgYmF6aWUgb3N0YXRlY3puaWVcclxuICAgICAgICAgICAgaWYoJHNjb3BlLmRhdGVGcm9tLmdldE1vbnRoKCkgPj0gJHNjb3BlLmRhdGVUby5nZXRNb250aCgpICYmICRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkgPj0gJHNjb3BlLmRhdGVUby5nZXREYXRlKCkpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoJHNjb3BlLmRhdGVGcm9tLmdldERhdGUoKSsxKTtcclxuICAgICAgICAgICAgICAgIGRhdGVUZW1wLnNldE1vbnRoKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlVGVtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRSb29tcyh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiAkc2NvcGUuZGF0ZUZyb20udG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHRvOiAkc2NvcGUuZGF0ZVRvLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBiZWRzOiAkc2NvcGUubnVtYmVyT2ZCZWRzXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJvb21zRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYocm9vbXNEYXRhLmxlbmd0aCA+MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJvb21zID0gcm9vbXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1zZyA9ICdDb8WbIHBvc3rFgm8gbmllIHRhay4nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRSb29tID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdyb29tJywgSlNPTi5zdHJpbmdpZnkoe3Jvb206IHtpZDogcm9vbS5faWQsIHR5cGU6IHJvb20udHlwZSwgcHJpY2U6IHJvb20ucHJpY2V9fSkpO1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2RhdGVzJywgSlNPTi5zdHJpbmdpZnkoe2RhdGVGcm9tOiAkc2NvcGUuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLmRhdGVUb30pKTtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuY2hvb3NlUm9vbShyb29tKTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdvZmZlcicpO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy9vZmZlcic7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5yb29tcyk7XHJcbiAgICAgICAgICAgICRzY29wZS5maW5kUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldEFsbFJvb21zKCkudGhlbihmdW5jdGlvbiAocm9vbXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hbGxSb29tcyA9IHJvb21zO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocm9vbXMpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETyBvYnPFgnVnYSBlcnJvcmFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICRzY29wZS5jaGVja0F2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnJvb21EYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYWxsUm9vbXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciByb29tRGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVGcm9tKTtcclxuICAgICAgICAgICAgICAgIHZhciByb29tRGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLnJvb21EYXRlVG8pO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8ICRzY29wZS5hbGxSb29tc1tpXS5yZXNlcnZhdGlvbnMubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5hbGxSb29tc1tpXS5yZXNlcnZhdGlvbnNbal0uZnJvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5hbGxSb29tc1tpXS5yZXNlcnZhdGlvbnNbal0udG8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRlRnJvbSA8IGRhdGVUbyAmJiByb29tRGF0ZVRvID4gZGF0ZUZyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsbFJvb21zW2ldLmF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuYWxsUm9vbXNbaV0uYXZhaWxhYmxlID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUm9vbXNbaV0uYXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFsbFJvb21zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAqL1xyXG5cclxuICAgICAgICAkc2NvcGUuZGF0ZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpID49ICRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpID49ICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKCRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXRNb250aCgkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vVE9EbyBwbyB6bWlhbmllIGRhdHkgem1pZW5pYyBjbGFzc2Uoa29tcGxldG55IHJld29yaz8gOigpXHJcbiAgICAgICAgJHNjb3BlLmdldEF2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uIChyZXNlcnZhdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZXNlcnZhdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS50byk7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vdEF2YWlsYWJsZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJ2F2YWlsYWJsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubWFuYWdtZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmdzID0gZnVuY3Rpb24gKHJvb20pIHtcclxuXHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnc2VsZWN0ZWRSb29tJywgSlNPTi5zdHJpbmdpZnkoe19pZDogcm9vbS5faWQsIHR5cGU6IHJvb20udHlwZSwgbnVtYmVyOiByb29tLm51bWJlciwgYmVkczogcm9vbS5iZWRzLCBwcmljZTogcm9vbS5wcmljZX0pKTtcclxuICAgICAgICAgICAgJCgnI3JlZ3VsYW1pbicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWFuYWdtZW50LWJvb2tpbmdzJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldFNlbGVjdGVkUm9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUm9vbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdzZWxlY3RlZFJvb20nKSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJvb20gaWQgdG86XCIrcm9vbV9pZCtcIiwgYm9va2luZ19pZCB0bzpcIitib29raW5nX2lkKTtcclxuXHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmNhbmNlbEJvb2tpbmcocm9vbV9pZCwgYm9va2luZ19pZCkudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VkYcWCbyBzacSZIGFudWxvd2HEhycpO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRSb29tQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20oKTtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbUJvb2tpbmdzKCRzY29wZS5zZWxlY3RlZFJvb20uX2lkKS50aGVuKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm9va2luZ3MgPSBiLnJlc2VydmF0aW9ucztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0VXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFVzZXJJbmZvKHVzZXIpLnRoZW4oZnVuY3Rpb24gKHUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXIgPSB1O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNlbGVjdGVkVXNlcik7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvQm9va2luZyA9IGZ1bmN0aW9uIChyb29tLCBkYXRlRnJvbSwgZGF0ZVRvKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnYm9va2luZycsIEpTT04uc3RyaW5naWZ5KHtyb29tOiB7X2lkOiByb29tLl9pZCwgdHlwZTogcm9vbS50eXBlLCBudW1iZXI6IHJvb20ubnVtYmVyLCBiZWRzOiByb29tLmJlZHMsIHByaWNlOiByb29tLnByaWNlfSwgZGF0ZUZyb206IGRhdGVGcm9tLCBkYXRlVG86IGRhdGVUb30pKTtcclxuICAgICAgICAgICAgJCgnI3JlZ3VsYW1pbicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndGVzdCcpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pbml0Qm9va2luZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmcgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnYm9va2luZycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRlc3QuZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUuYm9va2luZy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgICRzY29wZS50ZXN0LmRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVUbyk7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgICAgIGdldEV4dHJhcygpO1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2Vyc0VtYWlscygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJzKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHByemVuaWVzaWVuaWUgcGV3bnljaCBmdW5rY2pvbmFsbm9zY2kgZG8gdXNlckN0cmxcclxuXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgZG9kYXRrw7N3IGkgb2JsaWN6ZW5pZSBjZW55XHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEJvb2tGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXNlciA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RPckFkZFVzZXIpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLnRlc3QuZW1haWwgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IFwiXCIrJHNjb3BlLnRlc3QuZmlyc3ROYW1lKyRzY29wZS50ZXN0Lmxhc3ROYW1lKyRzY29wZS50ZXN0LnBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS50ZXN0LmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS50ZXN0Lmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnRlc3QucGhvbmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6ICRzY29wZS50ZXN0LmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS50ZXN0LmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS50ZXN0Lmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnRlc3QucGhvbmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2Uuc2lnbnVwQW5kQm9vayh1c2VyLCAkc2NvcGUuYm9va2luZy5yb29tLl9pZCwge2RhdGVGcm9tOiAkc2NvcGUudGVzdC5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUudGVzdC5kYXRlVG99LCAkc2NvcGUudG90YWxQcmljZSwgJHNjb3BlLnNlbGVjdGVkRXh0cmFzKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyU2VydmljZS51c2VWb3VjaGVyKCRyb290U2NvcGUuZGlzY291bnQuY29kZSkudGhlbihmdW5jdGlvbiAodlJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyID0gSlNPTi5wYXJzZSgkc2NvcGUuc2VsZWN0ZWRVc2VyQm9va2luZyk7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5hZG1pbkJvb2soJHNjb3BlLmJvb2tpbmcucm9vbS5faWQsIHVzZXIuZW1haWwgLHtkYXRlRnJvbTogJHNjb3BlLnRlc3QuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLnRlc3QuZGF0ZVRvfSwgJHNjb3BlLnRvdGFsUHJpY2UsICRzY29wZS5zZWxlY3RlZEV4dHJhcylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLnVzZVZvdWNoZXIoJHJvb3RTY29wZS5kaXNjb3VudC5jb2RlKS50aGVuKGZ1bmN0aW9uICh2UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlRGlmZk9mRGF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIE1TX1BFUl9EQVkgPSAxMDAwICogNjAgKiA2MCAqIDI0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUudGVzdC5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUudGVzdC5kYXRlVG8pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21VVEMgPSBEYXRlLlVUQyhkYXRlRnJvbS5nZXRGdWxsWWVhcigpLCBkYXRlRnJvbS5nZXRNb250aCgpLCBkYXRlRnJvbS5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvVVRDID0gRGF0ZS5VVEMoZGF0ZVRvLmdldEZ1bGxZZWFyKCksIGRhdGVUby5nZXRNb250aCgpLCBkYXRlVG8uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGRhdGVUb1VUQyAtIGRhdGVGcm9tVVRDKSAvIE1TX1BFUl9EQVkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkc2NvcGUuYm9va2luZyl7XHJcbiAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50ICE9IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLmRpc2NvdW50LnR5cGUgPT0gJ3psJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UpIC0gJHJvb3RTY29wZS5kaXNjb3VudC5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICclJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLmJvb2tpbmcucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9ICRzY29wZS50b3RhbFByaWNlIC0gKCRzY29wZS50b3RhbFByaWNlICogKCRyb290U2NvcGUuZGlzY291bnQuYW1vdW50IC8gMTAwKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLmJvb2tpbmcucm9vbS5wcmljZSkgKyAkc2NvcGUuZXh0cmFzVG90YWxQcmljZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZXh0cmFzVG90YWxQcmljZSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5nZXRFeHRyYXMoKS50aGVuKGZ1bmN0aW9uIChleHRyYXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZXh0cmFzRGF0YTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAgOyBpIDwgJHNjb3BlLmV4dHJhcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25UZXh0ID0gJ0RvZGFqICsnO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVG9nZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAwO1xyXG4gICAgICAgICAgICBpZihpbmRleCA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMucHVzaChleHRyYSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSArPSBleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSAtPSBleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBhaWRDbGFzcyA9IGZ1bmN0aW9uIChwYWlkKSB7XHJcbiAgICAgICAgICAgIGlmKHBhaWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2J0bi1zdWNjZXNzJztcclxuICAgICAgICAgICAgcmV0dXJuICdidG4td2FybmluZydcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5wYXkgPSBmdW5jdGlvbiAoYm9va2luZykge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5wYXkoYm9va2luZy5faWQsICFib29raW5nLnBhaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIGJvb2tpbmcucGFpZCA9ICFib29raW5nLnBhaWQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCgnZGlzY291bnQnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4wMS4yMDE3LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigndXNlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsIEF1dGhTZXJ2aWNlLCByb29tU2VydmljZSwgdXNlclNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMgPSB1c2VycztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnVzZXJzKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0VXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VsZWN0ZWRVc2VyKVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3RGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS5zZWxlY3RlZFVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLnBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICRzY29wZS5zZWxlY3RlZFVzZXIucm9sZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLmNoYW5nZVVzZXJEZXRhaWxzKG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTIuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uY29udHJvbGxlcigndm91Y2hlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCB2b3VjaGVyU2VydmljZSkge1xyXG5cclxuICAgIC8vSWxlLCBjenkgd2llbG9rcm90bmVnbyB1enl0a3UsIGRhdGEgd3lnYcWbbmnEmWNpYVxyXG4gICAgJHNjb3BlLmdlbmVyYXRlVm91Y2hlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnZvdWNoZXJzID0ge1xyXG4gICAgICAgICAgICBjb2RlczogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBwb3NzaWJsZSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcclxuICAgICAgICB2YXIgZXhwaXJ5RGF0ZSA9ICRzY29wZS52b3VjaGVyRXhwaXJ5RGF0ZTtcclxuICAgICAgICBpZihleHBpcnlEYXRlIDwgbmV3IERhdGUoKSl7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRXJyb3IgPSAnRGF0YSB3eWdhxZtuacSZY2lhIG5pZSBtb8W8ZSBiecSHIHogcHJ6ZXN6xYJvxZtjaSc7Ly9UT0RPIHBvcHJhd2nEhyBrb211bmlrYXRcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzR2VuZXJhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5nZW5lcmF0ZWRWb3VjaGVycyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJFcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgd2hpbGUoJHNjb3BlLnZvdWNoZXJzLmNvZGVzLmxlbmd0aCA8ICRzY29wZS5udW1iZXJPZlZvdWNoZXJzKXtcclxuICAgICAgICAgICAgICAgIHZhciB2b3VjaGVyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCA1OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXIgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGkgIT0gMyApdm91Y2hlciArPSAnLSc7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmNvZGVzLnB1c2godm91Y2hlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vVE9ETyBkYWxzemEgcHJhY2EgbmFkIHZvdWNoZXJhbWksIHBvbXnFm2xlxIcgamFrIHRvIHByemVjaG93eXdhxIcgdyBiYXppZSBjenkgamFrbyB0ZWtzdCBucC4gMjAlIGN6eSBvZGR6aWVsbmllIG51bWJlcjogMjAsIGRpc2NvdW50VHlwZTogJyVcIlxyXG4gICAgICAgICAgICB2YXIgbGFzdCA9ICRzY29wZS5kaXNjb3VudC5jaGFyQXQoJHNjb3BlLmRpc2NvdW50Lmxlbmd0aC0xKTtcclxuICAgICAgICAgICAgaWYobGFzdCA9PT0gJyUnKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50VHlwZSA9ICclJztcclxuICAgICAgICAgICAgZWxzZSBpZihsYXN0ID09PSAnxYInICYmICRzY29wZS5kaXNjb3VudC5jaGFyQXQoJHNjb3BlLmRpc2NvdW50Lmxlbmd0aC0yKSA9PT0gJ3onKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50VHlwZSA9ICd6bCc7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZGlzY291bnQgPSBjb252ZXJ0VG9OdW1iZXIoJHNjb3BlLmRpc2NvdW50KTtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmV4cGlyeURhdGUgPSBleHBpcnlEYXRlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2VuZXJhdGVkVm91Y2hlcnMgPSAkc2NvcGUudm91Y2hlcnMuY29kZXM7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc0dlbmVyYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc1NhdmVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLnNhdmVWb3VjaGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudm91Y2hlcnMpO1xyXG4gICAgICAgIHZvdWNoZXJTZXJ2aWNlLnNhdmVWb3VjaGVycygkc2NvcGUudm91Y2hlcnMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudm91Y2hlcnNTYXZlZCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vVE9ETyBvZGplY2llIGt3b3R5IGkgc3ByYXdkemVuaWUgdmF6bm9zY2kod3lzd2lldGxlbmllIG9kcG93aWVkbmllZ28gZXJyb3JhKSwgbmEga29uaWVjIHByenkgcmV6ZXJ3YWNqaSB1d3pnbGVkbmljIHZvdWNoZXJcclxuICAgICRzY29wZS5jaGVja1ZvdWNoZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnZvdWNoZXIpO1xyXG4gICAgICAgICAgICB2b3VjaGVyU2VydmljZS5jaGVja1ZvdWNoZXIoJHNjb3BlLnZvdWNoZXIudG9TdHJpbmcoKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSAnS29kIHBvcHJhd255IHpuacW8a2EgJytyZXN1bHQuZGlzY291bnQrcmVzdWx0LmRpc2NvdW50VHlwZTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZGlzY291bnQgPSB7YW1vdW50OiByZXN1bHQuZGlzY291bnQsIHR5cGU6IHJlc3VsdC5kaXNjb3VudFR5cGUsIGNvZGU6ICRzY29wZS52b3VjaGVyfTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kaXNjb3VudCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyTm90Rm91bmQgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLmNvZGVDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCEkc2NvcGUuYm9va2luZ0ZybS4kdmFsaWQpe1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlckZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlck5vdEZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmRpc2NvdW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaXNOdW1lcmljKG4pIHtcclxuICAgICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobikpICYmIGlzRmluaXRlKG4pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnZlcnRUb051bWJlcihuKSB7XHJcbiAgICAgICAgdmFyIGRpc2NvdW50ID0gJyc7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihpc051bWVyaWMobi5jaGFyQXQoaSkpKXtcclxuICAgICAgICAgICAgICAgIGRpc2NvdW50ICs9IG4uY2hhckF0KGkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGlzY291bnQgPSBOdW1iZXIoZGlzY291bnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpc2NvdW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc2NvdW50ID0gTnVtYmVyKGRpc2NvdW50KTtcclxuICAgICAgICByZXR1cm4gZGlzY291bnQ7XHJcbiAgICB9XHJcbn0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNy4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmlsdGVyKCd1bmlxdWVDYXRlZ29yaWVzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocm9vbXMsIHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICBpZihhbmd1bGFyLmlzQXJyYXkocm9vbXMpKXtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcm9vbXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSByb29tc1tpXVtwcm9wZXJ0eU5hbWVdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChrZXlzW3ZhbF0pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5c1t2YWxdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocm9vbXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vbXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ0F1dGhTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcclxuICAgICAgICB2YXIgTE9DQUxfVE9LRU4gPSAndG9rZW4nO1xyXG4gICAgICAgIHZhciBpc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgYXV0aFRva2VuO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2FkVXNlckluZm8oKSB7XHJcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9UT0tFTik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIFVzZXIgaW5mby4uLicpOy8vRG8gdXN1bmnEmWNpYVxyXG4gICAgICAgICAgICBpZih0b2tlbil7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mbyh0b2tlbik7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95VXNlckluZm8oKSB7XHJcbiAgICAgICAgICAgIGF1dGhUb2tlbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9UT0tFTik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdG9yZVVzZXJJbmZvKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9UT0tFTiwgdG9rZW4pO1xyXG4gICAgICAgICAgICB1c2VySW5mbyh0b2tlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1c2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB0b2tlbjtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGF1dGhUb2tlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzaWduaW4gPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9hdXRoZW50aWNhdGUnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnLCByZXN1bHQuZGF0YS5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnLCByZXN1bHQuZGF0YS5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2YXIgc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGVzdHJveVVzZXJJbmZvKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cCA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cCcsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnamVzdGVtIHcgcmVzb2x2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsb2FkVXNlckluZm8oKTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe2ZpcnN0TmFtZTogcmVzdWx0LmRhdGEuZmlyc3ROYW1lLCBsYXN0TmFtZTogcmVzdWx0LmRhdGEubGFzdE5hbWUsIGVtYWlsOiByZXN1bHQuZGF0YS5lbWFpbCwgcGhvbmU6IHJlc3VsdC5kYXRhLnBob25lLCByb2xlOiByZXN1bHQuZGF0YS5yb2xlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckJvb2tpbmdzID0gZnVuY3Rpb24gKCkgey8vVE9ETyBwb3ByYXdpxIcgcmF6ZW0geiBhcGkgxbxlYnkgZGF3YcWCbyBzdWNjZXNzXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0VXNlckJvb2tpbmdzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbiAobmV3RGV0YWlscykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGFuZ2VVc2VyRGV0YWlscycsIG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXROZXdUb2tlbicsIHtlbWFpbDogbmV3RGV0YWlscy5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdDIuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0MiBzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQyLmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igbm93ZWdvIHRva2VuYScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtzdWNjZXNzOiB0cnVlLCBtc2c6IFwiUG9tecWbbG5pZSB6bWllbmlvbm8gZGFuZVwifSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe3N1Y2Nlc3M6IGZhbHNlLCBtc2c6IFwiY2/FmyBwb3N6xYJvIG5pZSB0YWtcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKG9sZFBhc3MsIG5ld1Bhc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hhbmdlLXBhc3N3b3JkJywge29sZFBhc3M6IG9sZFBhc3MsIG5ld1Bhc3M6IG5ld1Bhc3N9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHttc2c6ICdwb215xZtsbmllIHptaWVuaW9ubyBoYXNsbyd9KTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe21zZzogcmVzdWx0LmRhdGEuZXJyb3J9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJSb2xlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3JvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgc2lnbmluOiBzaWduaW4sXHJcbiAgICAgICAgICAgIHNpZ25vdXQ6IHNpZ25vdXQsXHJcbiAgICAgICAgICAgIHNpZ251cDogc2lnbnVwLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIGdldFVzZXJCb29raW5nczogZ2V0VXNlckJvb2tpbmdzLFxyXG4gICAgICAgICAgICBjaGFuZ2VVc2VyRGV0YWlsczogY2hhbmdlVXNlckRldGFpbHMsXHJcbiAgICAgICAgICAgIGNoYW5nZVBhc3N3b3JkOiBjaGFuZ2VQYXNzd29yZCxcclxuICAgICAgICAgICAgZ2V0VXNlclJvbGU6IGdldFVzZXJSb2xlLFxyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZFxyXG4gICAgICAgIH1cclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDguMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ29mZmVyU3ZjJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIHZhciBjaG9zZW5Sb29tID0ge307XHJcbiAgICAgICAgdmFyIGV4dHJhcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgY2hvb3NlUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgIGNob29zZW5Sb29tID0gcm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNob29zZW5Sb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0RXh0cmFzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuZXh0cmFzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGNob29zZVJvb206IGNob29zZVJvb20sXHJcbiAgICAgICAgICAgIGdldFJvb206IGdldFJvb20sXHJcbiAgICAgICAgICAgIGdldEV4dHJhczogZ2V0RXh0cmFzLFxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3Jvb21TZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWRSb29tID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb21zID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZmluZFJvb21zJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb2JyYW5vIHBva29qZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJvb21zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJvb2tSb29tID0gZnVuY3Rpb24gKGRhdGEpIHsvL1RPRE8gemphxIXEhyBzacSZXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3Jlc2VydmUnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXRlbSBwcnplZCBwb3N0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jYW5jZWxCb29raW5nJyx7cm9vbV9pZDogcm9vbV9pZCwgYm9va2luZ19pZDogYm9va2luZ19pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzb2x2ZSBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWplY3QgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxSb29tcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRSb29tcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKHJvb21faWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0Um9vbUJvb2tpbmdzJywge3Jvb21faWQ6IHJvb21faWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGFbMF0ucmVzZXJ2YXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YVswXSlcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0VXNlckluZm8nLCB7ZW1haWw6IHVzZXJ9KS50aGVuKGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF1c2VySW5mby5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVzZXJJbmZvLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHVzZXJJbmZvLmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh1c2VySW5mby5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cEFuZEJvb2sgPSBmdW5jdGlvbiAodXNlciwgaWQsIGRhdGVzLCBwcmljZSwgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4dHJhcyk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cEFuZEJvb2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHVzZXIucGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGRhdGVzLmRhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBkYXRlcy5kYXRlVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhczogZXh0cmFzXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgnT0snKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyByZXplcndhY2ppJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGFkbWluQm9vayA9IGZ1bmN0aW9uIChpZCwgZW1haWwsIGRhdGVzLCBwcmljZSwgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2Vyd2lzOiByb29tU3ZjLCBmdW5rY2phOiBhZG1pbkJvb2sgfCBpZDpcIitpZCtcIiwgZW1haWw6IFwiK2VtYWlsKTtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYWRtaW5Cb29rJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogZGF0ZXMuZGF0ZUZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGRhdGVzLmRhdGVUbyxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFzOiBleHRyYXNcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ09LJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJzRW1haWxzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJzRW1haWxzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyA9IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdOaWUgem5hbGV6aW9ubyB1xbx5dGtvd25pa8OzdycpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnTmllIHpuYWxlemlvbm8gdcW8eXRrb3duaWvDs3cnKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGF5ID0gZnVuY3Rpb24gKHJlc2VydmF0aW9uX2lkLCBwYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcGFpZCcsIHtpZDogcmVzZXJ2YXRpb25faWQsIHBheTogcGF5fSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBnZXRSb29tczogZ2V0Um9vbXMsXHJcbiAgICAgICAgICAgIGdldEFsbFJvb21zOiBnZXRBbGxSb29tcyxcclxuICAgICAgICAgICAgYm9va1Jvb206IGJvb2tSb29tLFxyXG4gICAgICAgICAgICBjYW5jZWxCb29raW5nOiBjYW5jZWxCb29raW5nLFxyXG4gICAgICAgICAgICBnZXRSb29tQm9va2luZ3M6IGdldFJvb21Cb29raW5ncyxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBzaWdudXBBbmRCb29rOiBzaWdudXBBbmRCb29rLFxyXG4gICAgICAgICAgICBhZG1pbkJvb2s6IGFkbWluQm9vayxcclxuICAgICAgICAgICAgZ2V0VXNlcnNFbWFpbHM6IGdldFVzZXJzRW1haWxzLFxyXG4gICAgICAgICAgICBwYXk6IHBheVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgndXNlclNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxVc2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRBbGxVc2VycycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uIChuZXdEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2FkbWluQ2hhbmdlVXNlckRldGFpbHMnLCBuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7c3VjY2VzczogdHJ1ZSwgbXNnOiBcIlBvbXnFm2xuaWUgem1pZW5pb25vIGRhbmVcIn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtzdWNjZXNzOiBmYWxzZSwgbXNnOiBcImNvxZsgcG9zesWCbyBuaWUgdGFrXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2VycyxcclxuICAgICAgICAgICAgY2hhbmdlVXNlckRldGFpbHM6IGNoYW5nZVVzZXJEZXRhaWxzXHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDEyLjEyLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCd2b3VjaGVyU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgc2F2ZVZvdWNoZXJzID0gZnVuY3Rpb24gKHZvdWNoZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZvdWNoZXJzKTtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2F2ZVZvdWNoZXJzJywgdm91Y2hlcnMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hlY2tWb3VjaGVyID0gZnVuY3Rpb24gKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hlY2tWb3VjaGVyJywge3ZvdWNoZXJDb2RlOiB2b3VjaGVyfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyAmJiAobmV3IERhdGUocmVzdWx0LmRhdGEudm91Y2hlci5leHBpcnlEYXRlKSA8IG5ldyBEYXRlKCkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdUZXJtaW4gbWluxIUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmIHJlc3VsdC5kYXRhLnZvdWNoZXIudXNlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnS29kIHpvc3RhxYIganXFvCB3eWtvxbx5c3RhbnknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmICFyZXN1bHQuZGF0YS52b3VjaGVyLnVzZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnZvdWNoZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHVzZVZvdWNoZXIgPSBmdW5jdGlvbiAodm91Y2hlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VWb3VjaGVyJywge2NvZGU6IHZvdWNoZXJ9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdLbHVjeiB3eWtvcnp5c3RhbnkuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNhdmVWb3VjaGVyczogc2F2ZVZvdWNoZXJzLFxyXG4gICAgICAgICAgICBjaGVja1ZvdWNoZXI6IGNoZWNrVm91Y2hlcixcclxuICAgICAgICAgICAgdXNlVm91Y2hlcjogdXNlVm91Y2hlclxyXG4gICAgICAgIH1cclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
