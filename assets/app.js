var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(o){return{request:function(e){return e.headers=e.headers||{},o.localStorage.token&&(e.headers.Authorization=o.localStorage.token),e}}}]).config(["$stateProvider","$urlRouterProvider",function(o,e){o.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}),e.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(o,e,t){o.$state=e,o.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(o,e,t,n){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.changeUserDetails=function(o,n,a,r,s){if(o){var i={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(i).then(function(o){e.reload()})}},o.cancelBooking=function(o,t){console.log("room id to:"+o+", booking_id to:"+t),n.cancelBooking(o,t).then(function(o){console.log("udało się anulować"),e.reload()})};var a=function(){t.getUserBookings().then(function(e){console.log(e),o.userBookings=e})},r=function(){t.getUserInfo().then(function(e){console.log(e),o.firstName=e.firstName,o.lastName=e.lastName,o.email=e.email,o.phone=e.phone})};o.changePassword=function(e,n,a){e&&t.changePassword(n,a).then(function(e){console.log(e.msg),o.successfulPasswordChange=!0},function(e){o.wrongPassword=!0})},o.checkDate=function(o){var e=new Date,t=new Date(o);return t>e},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(o,e,t,n,a,r,s,i){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.submitError=!1,e.errorMessage="",s.isLoggedIn=function(){return i.isAuthenticated},s.isLoggedIn()&&i.getUserRole().then(function(o){s.role=o.role}),e.signin=function(){console.log("login"),i.signin(e.user).then(function(o,e){s.isLogedIn=!0,i.getUserRole().then(function(o){s.role=o.role}),n.location.reload(),console.log(o)})},e.signout=function(){i.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},e.getUserInfo=function(){i.getUserInfo().then(function(o){console.log(o),e.userinfo=o})},e.submitForm=function(o){o?i.signup(e.user).then(function(o){console.log("Pomyślnie zarejestrowano"),e.submitError=!1,i.signin(e.user).then(function(o,e){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(o){switch(console.log(o),o.code){case 11e3:e.submitError=!0,e.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:e.submitError=!0,e.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(e.submitError=!0,e.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},e.$watch("submitError",function(o){console.log(o)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService",function(o,e,t,n,a,r,s,i,c){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays;var u=function(){i.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:l(),extras:r.extras}).then(function(){n.go("successfulBooking")},function(o){})},r.toPrevious=function(){n.go("offer")};var l=function(){var o=0;return o=r.room.price*r.numOfDays,r.extras.forEach(function(e){o+=e.price*r.numOfDays}),o};u()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(o,e,t,n){n.$validators.compareTo=function(e){return e==o.otherModelValue},o.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}),angular.module("app").controller("offerCtrl",["$scope","$cookies","$state","$location","$window","offerSvc",function(o,e,t,n,a,r){o.offer={},o.extras=[],o.selectedExtras=[];var s={};o.dateFrom="",o.dateTo="",o.roomName="";var i=function(){o.offer=JSON.parse(e.get("room")),o.extras=u(),s=JSON.parse(e.get("dates")),o.dateFrom=c(new Date(s.dateFrom)),o.dateTo=c(new Date(s.dateTo)),o.roomName=o.offer.type,o.roomPrice=o.offer.price*l(),o.extrasTotalPrice=0},c=function(o){var e=o.getUTCDate(),t=o.getUTCMonth()+1,n=o.getUTCFullYear();return""+e+"-"+t+"-"+n};o.addOrRemoveExtra=function(e){var t=o.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t==-1?(o.selectedExtras.push(e),o.extrasTotalPrice+=e.price*l()):(o.selectedExtras.splice(t,1),o.extrasTotalPrice-=e.price*l())},o.toConfirmation=function(){console.log("asdasd");var n={extras:o.selectedExtras,numOfDays:l()};e.put("extras",JSON.stringify(n)),t.go("confirmation")},o.toPrevious=function(){t.go("home")};var u=function(){r.getExtras().then(function(e){o.extras=e;for(var t=0;t<o.extras.length;t++)o.extras[t].buttonText="Dodaj +",o.extras[t].buttonToggle=!1})},l=function(){var o=864e5,e=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/o)};i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$window","$location","roomService","offerSvc","$filter","$state",function(o,e,t,n,a,r,s,i,c){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.select=function(o){t.selectedRoom=o,r.selectRoom(o)};var u=function(){var o=new Date;console.log(o),t.dateFrom=o;var e=new Date;e.setDate(e.getDate()+1),t.dateTo=e};t.init=function(){u(),t.findRooms()},t.findRooms=function(){r.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(o){t.rooms=o},function(o){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(o){e.put("room",JSON.stringify(o)),e.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),s.chooseRoom(o),c.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()},t.getAllRooms=function(){r.getAllRooms().then(function(o){t.allRooms=o,console.log(o)},function(o){})},t.getAvailability=function(o){for(var e=(new Date,new Date(t.roomDateFrom)),n=new Date(t.roomDateTo),a=0;a<o.length;a++){var r=new Date(o[a].from),s=new Date(o[a].to);if(e<s&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){var o=new Date;t.roomDateFrom=o;var e=new Date;e.setDate(e.getDate()+1),t.roomDateTo=e,t.getAllRooms()},t.toBookings=function(o){e.put("selectedRoom",JSON.stringify(o)),$("#regulamin").modal("hide"),setTimeout(function(){c.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(e.get("selectedRoom"))},t.checkDate=function(o){var e=new Date,t=new Date(o);return t>e},t.cancelBooking=function(o,e){console.log("room id to:"+o+", booking_id to:"+e),r.cancelBooking(o,e).then(function(o){console.log("udało się anulować"),c.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),r.getRoomBookings(t.selectedRoom._id).then(function(o){t.bookings=o.reservations,console.log(t.bookings)})}}]),angular.module("app").filter("uniqueCategories",function(){return function(o,e){if(angular.isArray(o)){for(var t=[],n={},a=0;a<o.length;a++){var r=o[a][e];angular.isUndefined(n[r])&&(n[r]=!0,t.push(o[a]))}return t}return o}}),angular.module("app").service("AuthService",["$http","$q",function(o,e,t){function n(){var o=window.localStorage.getItem(c);console.log("loading User info..."),o&&s(o)}function a(){i=void 0,u=!1,o.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(o){window.localStorage.setItem(c,o),s(o)}function s(e){u=!0,i=e,o.defaults.headers.common.Authorization=i}var i,c="token",u=!1,l=function(t){return e(function(e,n){o.post("/api/authenticate",t).then(function(o){o.data.success?(r(o.data.token),e(o.data.msg,o.data.success)):n(o.data.msg,o.data.success)})})},g=function(){a()},f=function(t){return e(function(e,n){o.post("/api/signup",t).then(function(o){o.data.success?(console.log("jestem w resolve"),e(o.data.msg)):n(o.data.msg)})})};n();var m=function(){return e(function(e,t){o.get("/api/userinfo").then(function(o){o.data.success?e({firstName:o.data.firstName,lastName:o.data.lastName,email:o.data.email,phone:o.data.phone,role:o.data.role}):t(o.data.msg)})})},d=function(){return e(function(e,t){o.get("/api/getUserBookings").then(function(o){e(o.data)})})},p=function(t){return e(function(e,a){o.post("/api/test",t).then(function(s){s.data.success?(console.log("hello"),o.post("/api/getNewToken",{email:t.email}).then(function(o){o.data.success?(console.log("result2 success"),r(o.data.token),n()):console.log("error nowego tokena")}),e({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return e(function(e,a){o.post("/api/change-password",{oldPass:t,newPass:n}).then(function(o){o.data.success?e({msg:"pomyślnie zmieniono haslo"}):a({msg:o.data.error})})})},v=function(){return e(function(e,t){o.get("/api/userinfo").then(function(o){o.data.success?e({role:o.data.role}):t(o.data.msg)})})};return{signin:l,signout:g,signup:f,getUserInfo:m,getUserBookings:d,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(o,e){var t=function(o){choosenRoom=o},n=function(){return choosenRoom},a=function(){return o(function(o,t){e.get("/api/getExtras").then(function(e){e.data.success?o(e.data.extras):t(e.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(o,e){var t=function(t){return o(function(o,n){e.post("/api/findRooms",t).then(function(e){e.data.success?(console.log("Pobrano pokoje"),o(e.data.rooms)):n(e.data.error)})})},n=function(t){return o(function(o,n){e.post("/api/reserve",t).then(function(e){e.data.success?o(e.data.success):n(e.data.error)})})},a=function(t,n){return o(function(o,a){console.log("jetem przed post cancel"),e.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(e){e.data.success?(console.log("resolve cancel"),o(e.data.success)):(console.log("reject cancel"),a(e.data.error))})})},r=function(){return o(function(o,t){e.get("/api/getRooms").then(function(e){e.data.success?o(e.data.result):t(e.data.error)})})},s=function(t){return o(function(o,n){e.post("/api/getRoomBookings",{room_id:t}).then(function(e){console.log(e.data[0].reservations),o(e.data[0])},function(o){n(o.data)})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJmaWxsdGVycy9yb29tRmlsdGVyLmpzIiwic2VydmljZXMvYXV0aG9yaXphdGlvbi5zdmMuanMiLCJzZXJ2aWNlcy9vZmZlci5zdmMuanMiLCJzZXJ2aWNlcy9yb29tLnN2Yy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJyZXF1ZXN0IiwiY29uZmlnIiwiaGVhZGVycyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCIkc2NvcGUiLCJBdXRoU2VydmljZSIsInJvb21TZXJ2aWNlIiwicmVnZXgiLCJjaGFuZ2VVc2VyRGV0YWlscyIsImlzVmFsaWQiLCJmTmFtZSIsImxOYW1lIiwibkVtYWlsIiwiblBob25lIiwibmV3RGV0YWlscyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZU51bWJlciIsInRoZW4iLCJhIiwicmVsb2FkIiwiY2FuY2VsQm9va2luZyIsInJvb21faWQiLCJib29raW5nX2lkIiwiY29uc29sZSIsImxvZyIsImdldFVzZXJCb29raW5ncyIsIm1zZyIsInVzZXJCb29raW5ncyIsImdldEluZm8iLCJnZXRVc2VySW5mbyIsInVzZXIiLCJwaG9uZSIsImNoYW5nZVBhc3N3b3JkIiwidmFsaWQiLCJvbGRQIiwibmV3UCIsInJlcyIsInN1Y2Nlc3NmdWxQYXNzd29yZENoYW5nZSIsInJlaiIsIndyb25nUGFzc3dvcmQiLCJjaGVja0RhdGUiLCJkYXRlIiwiY3VycmVudERhdGUiLCJEYXRlIiwiZGF0ZUZyb20iLCIkcSIsIiRsb2NhdGlvbiIsIiRyb3V0ZSIsInN1Ym1pdEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiaXNMb2dnZWRJbiIsImlzQXV0aGVudGljYXRlZCIsImdldFVzZXJSb2xlIiwicmVzdWx0Iiwicm9sZSIsInNpZ25pbiIsInN1Y2Nlc3MiLCJpc0xvZ2VkSW4iLCJsb2NhdGlvbiIsInNpZ25vdXQiLCJnbyIsInVzZXJpbmZvIiwic3VibWl0Rm9ybSIsInNpZ251cCIsImRhdGEiLCJ0b1N0cmluZyIsImNvZGUiLCIkd2F0Y2giLCIkY29va2llcyIsImlzU2lnbmVkSW4iLCJyb29tIiwiSlNPTiIsInBhcnNlIiwiZ2V0IiwiZGF0ZVRvIiwiZXh0cmFzIiwibnVtT2ZEYXlzIiwiaW5pdCIsInJlc2VydmUiLCJ0ZXJtcyIsImFsZXJ0IiwiYm9va1Jvb20iLCJpZCIsIl9pZCIsImZyb20iLCJ0byIsInByaWNlIiwiY2FsY3VsYXRlVG90YWxQcmljZSIsImVycm9yIiwidG9QcmV2aW91cyIsInRvdGFsIiwiZm9yRWFjaCIsImUiLCJkaXJlY3RpdmUiLCJyZXF1aXJlIiwic2NvcGUiLCJvdGhlck1vZGVsVmFsdWUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJuZ01vZGVsIiwiJHZhbGlkYXRvcnMiLCJjb21wYXJlVG8iLCJtb2RlbFZhbHVlIiwiJHZhbGlkYXRlIiwidGVtcGxhdGUiLCJvZmZlclN2YyIsIm9mZmVyIiwic2VsZWN0ZWRFeHRyYXMiLCJkYXRlcyIsInJvb21OYW1lIiwic2hvd09mZmVyIiwiZ2V0RXh0cmFzIiwiZGF0ZVByZWV0aWZ5IiwidHlwZSIsInJvb21QcmljZSIsImNhbGN1bGF0ZURpZmZPZkRheXMiLCJleHRyYXNUb3RhbFByaWNlIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJhZGRPclJlbW92ZUV4dHJhIiwiZXh0cmEiLCJpbmRleCIsImluZGV4T2YiLCJidXR0b25UZXh0IiwiYnV0dG9uVG9nZ2xlIiwicHVzaCIsInNwbGljZSIsInRvQ29uZmlybWF0aW9uIiwicHV0Iiwic3RyaW5naWZ5IiwiZXh0cmFzRGF0YSIsImkiLCJsZW5ndGgiLCJNU19QRVJfREFZIiwiZGF0ZUZyb21VVEMiLCJVVEMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImRhdGVUb1VUQyIsIk1hdGgiLCJmbG9vciIsIiRmaWx0ZXIiLCJub1Jvb21zRXJyb3IiLCJlcnJvck1zZyIsInJvb21zIiwibnVtYmVyT2ZCZWRzIiwic3VjY2Vzc2Z1bENhbmNlbCIsInNlbGVjdCIsInNlbGVjdGVkUm9vbSIsInNlbGVjdFJvb20iLCJzZXREYXRlIiwiZGF0ZVRlbXAiLCJmaW5kUm9vbXMiLCJnZXRSb29tcyIsInRvSVNPU3RyaW5nIiwiYmVkcyIsInJvb21zRGF0YSIsImFkZFJvb20iLCJjaG9vc2VSb29tIiwidGVzdCIsImdldEFsbFJvb21zIiwiYWxsUm9vbXMiLCJnZXRBdmFpbGFiaWxpdHkiLCJyZXNlcnZhdGlvbnMiLCJyb29tRGF0ZUZyb20iLCJyb29tRGF0ZVRvIiwibWFuYWdtZW50SW5pdCIsInRvQm9va2luZ3MiLCIkIiwibW9kYWwiLCJzZXRUaW1lb3V0IiwiZ2V0U2VsZWN0ZWRSb29tIiwiZ2V0Um9vbUJvb2tpbmdzIiwiYiIsImJvb2tpbmdzIiwiZmlsdGVyIiwicHJvcGVydHlOYW1lIiwiaXNBcnJheSIsImtleXMiLCJ2YWwiLCJpc1VuZGVmaW5lZCIsInNlcnZpY2UiLCIkaHR0cCIsImxvYWRVc2VySW5mbyIsIndpbmRvdyIsImdldEl0ZW0iLCJMT0NBTF9UT0tFTiIsInVzZXJJbmZvIiwiZGVzdHJveVVzZXJJbmZvIiwiYXV0aFRva2VuIiwidW5kZWZpbmVkIiwiZGVmYXVsdHMiLCJjb21tb24iLCJyZW1vdmVJdGVtIiwic3RvcmVVc2VySW5mbyIsInNldEl0ZW0iLCJyZXNvbHZlIiwicmVqZWN0IiwicG9zdCIsInJlc3VsdDIiLCJvbGRQYXNzIiwibmV3UGFzcyIsImNob29zZW5Sb29tIiwiZ2V0Um9vbSJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxhQ0FBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsbUJBQUEsVUFBQSxTQUFBQyxHQUNBLE9BQ0FDLFFBQUEsU0FBQUMsR0FNQSxNQUxBQSxHQUFBQyxRQUFBRCxFQUFBQyxZQUNBSCxFQUFBSSxhQUFBQyxRQUNBSCxFQUFBQyxRQUFBLGNBQUFILEVBQUFJLGFBQUFDLE9BR0FILE9BS0FBLFFBQUEsaUJBQUEscUJBQUEsU0FBQUksRUFBQUMsR0FDQUQsRUFDQUUsTUFBQSxRQUNBQyxJQUFBLFFBQ0FDLFdBQUEsV0FDQUMsWUFBQSxTQUVBSCxNQUFBLFNBQ0FDLElBQUEsU0FDQUMsV0FBQSxZQUNBQyxZQUFBLFVBRUFILE1BQUEsZ0JBQ0FDLElBQUEsZ0JBQ0FFLFlBQUEsaUJBRUFILE1BQUEscUJBQ0FDLElBQUEscUJBQ0FFLFlBQUEsc0JBRUFILE1BQUEsb0JBQ0FDLElBQUEsb0JBQ0FFLFlBQUEscUJBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRSxZQUFBLFdBRUFILE1BQUEsb0JBQ0FDLElBQUEsWUFDQUUsWUFBQSxhQUVBSCxNQUFBLG1CQUNBQyxJQUFBLFdBQ0FFLFlBQUEsWUFFQUgsTUFBQSwwQkFDQUMsSUFBQSxrQkFDQUUsWUFBQSxtQkFFQUgsTUFBQSxhQUNBQyxJQUFBLGFBQ0FFLFlBQUEsY0FFQUgsTUFBQSxzQkFDQUMsSUFBQSxzQkFDQUUsWUFBQSx3QkFHQUosRUFBQUssVUFB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QUNBZixFQUFBZ0IsS0FBQSxlQUFBNUksR0FBQS9DLEtBQUEsU0FBQW9DLEdBQ0FBLEVBQUFXLEtBQUFSLFFBQ0FrSixFQUFBckosRUFBQVcsS0FBQVIsU0FFQW1KLEVBQUF0SixFQUFBVyxLQUFBd0IsWUFNQXBFLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBdUIsR0FBQSxTQUFBNkosRUFBQUMsR0FDQXBMLFFBQUFDLElBQUEsMkJBQ0FvSyxFQUFBZ0IsS0FBQSxzQkFBQXZMLFFBQUFBLEVBQUFDLFdBQUFBLElBQUFMLEtBQUEsU0FBQW9DLEdBQ0FBLEVBQUFXLEtBQUFSLFNBQ0FqQyxRQUFBQyxJQUFBLGtCQUNBa0wsRUFBQXJKLEVBQUFXLEtBQUFSLFdBRUFqQyxRQUFBQyxJQUFBLGlCQUNBbUwsRUFBQXRKLEVBQUFXLEtBQUF3QixhQU1BOEUsRUFBQSxXQUNBLE1BQUF6SCxHQUFBLFNBQUE2SixFQUFBQyxHQUNBZixFQUFBbkgsSUFBQSxpQkFBQXhELEtBQUEsU0FBQW9DLEdBQ0FBLEVBQUFXLEtBQUFSLFFBQ0FrSixFQUFBckosRUFBQVcsS0FBQVgsUUFFQXNKLEVBQUF0SixFQUFBVyxLQUFBd0IsWUFNQTBGLEVBQUEsU0FBQTdKLEdBQ0EsTUFBQXdCLEdBQUEsU0FBQTZKLEVBQUFDLEdBQ0FmLEVBQUFnQixLQUFBLHdCQUFBdkwsUUFBQUEsSUFBQUosS0FBQSxTQUFBb0MsR0FDQTlCLFFBQUFDLElBQUE2QixFQUFBVyxLQUFBLEdBQUF5RyxjQUNBaUMsRUFBQXJKLEVBQUFXLEtBQUEsS0FDQSxTQUFBWCxHQUNBc0osRUFBQXRKLEVBQUFXLFVBTUEsUUFDQStGLFNBQUFBLEVBQ0FPLFlBQUFBLEVBQ0FyRixTQUFBQSxFQUNBN0QsY0FBQUEsRUFDQThKLGdCQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMjIuMDkuMjAxNi5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJywgJ3VpLnJvdXRlcicsICduZ0Nvb2tpZXMnXSk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIGZ1bmN0aW9uICgkd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFpbicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncm9vbUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ29mZmVyJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvb2ZmZXInLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ29mZmVyQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbmZpcm1hdGlvbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsQm9va2luZycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsU2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hY2NvdW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYWNjb3VudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWduaW4nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWduaW4nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWduaW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuYm9va2luZ3MnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Jvb2tpbmdzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuZGV0YWlscycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkZXRhaWxzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuY2hhbmdlUGFzc3dvcmQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jaGFuZ2VQYXNzd29yZCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NoYW5nZVBhc3N3b3JkJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQtYm9va2luZ3MnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LWJvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21hbmFnbWVudC1ib29raW5ncydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9tYWluJylcclxuICAgIH0pXHJcbiAgICAucnVuKFsnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlUGFyYW1zID0gJHN0YXRlUGFyYW1zO1xyXG5cclxuICAgIH1dKTtcclxuICAgIC8qXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC53aGVuKCcvJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvbWFpbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zaWdudXAnLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbmluJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zaWduaW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvdXNlcmluZm8nLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy91c2VyaW5mbydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zdWNjZXNzZnVsU2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdWNjZXNzZnVsU2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL29mZmVyJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9vZmZlcidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9jb25maXJtYXRpb24nLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zdWNjZXNzZnVsQm9va2luZycse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vdGhlcndpc2UoJy8nKTtcclxuICAgIH0pO1xyXG4qL1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdhY2NDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJyhcXFxcK1swLTldXFxcXGR7MX0pKihcXFxccykqKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KSc7XHJcblxyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24oaXNWYWxpZCwgZk5hbWUsIGxOYW1lLCBuRW1haWwsIG5QaG9uZSl7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0RldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBmTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogbE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IG5FbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogblBob25lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY2hhbmdlVXNlckRldGFpbHMobmV3RGV0YWlscykudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8gcHJ6eWNpc2sgYW51bG93YW5pYSB0eWxrbyBkbGEgcG9rb2ksIGt0w7NyeWNoIGRhdGEgbmEgdG8gcG96d2FsYVxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyQm9va2luZ3MoKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlckJvb2tpbmdzID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlyc3ROYW1lID0gdXNlci5maXJzdE5hbWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE5hbWUgPSB1c2VyLmxhc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5waG9uZSA9IHVzZXIucGhvbmU7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHVzdGF3aWMgcGFzc3kgbmEgemVybyBwbyDFvMSFZGFuaXUgaGh0cFxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICh2YWxpZCxvbGRQLCBuZXdQKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKG9sZFAsIG5ld1ApLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5tc2cpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VjY2Vzc2Z1bFBhc3N3b3JkQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlaikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS53cm9uZ1Bhc3N3b3JkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBnZXRJbmZvKCk7XHJcbiAgICAgICAgZ2V0VXNlckJvb2tpbmdzKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2F1dGhDdHJsJywgZnVuY3Rpb24gKCRxLCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgJGxvY2F0aW9uLCAkcm91dGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKSB7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUucmVnZXggPSAnKFxcXFwrWzAtOV1cXFxcZHsxfSkqKFxcXFxzKSooWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICcnO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZDtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgaWYoJHJvb3RTY29wZS5pc0xvZ2dlZEluKCkpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUucm9sZSA9IHJlc3VsdC5yb2xlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgXHJcbiAgICAgICAgJHNjb3BlLnNpZ25pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luJyk7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ25pbigkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAobXNnLCBzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyUm9sZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUucm9sZSA9IHJlc3VsdC5yb2xlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy8nO1xyXG4gICAgICAgICAgICAgICAgLy8kc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWdub3V0KCk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dlZEluID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgLy9zdGF0ZS5nbygnaG9tZScpO1xyXG4gICAgICAgICAgICAvLyRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ291dCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmluZm8gPSBtc2c7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8vVE9ETyBzdGF0ZS5yZWxvYWRcclxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbnVwKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvbXnFm2xuaWUgemFyZWplc3Ryb3dhbm8nKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSA9PSAnaHR0cDovL2xvY2FsaG9zdDozMDAxLyMvY29uZmlybWF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bFNpZ251cCcpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmPScjL3N1Y2Nlc3NmdWxTaWdudXAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGRhdGEuY29kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTEwMDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdXeWJyYW55IGVtYWlsIGplc3QganXFvCB6YXJlamVzdHJvd2FueS4gUHJvc3rEmSB3eWJyYcSHIGlubnkuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnVXBzcyBjb8WbIHBvc3rFgm8gbmllIHRhay4gUHJvc3rEmSBzcHLDs2Jvd2HEhyBww7PFum5pZWouJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdzdWJtaXRFcnJvcicsIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JNZXNzYWdlKVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHEsICR3aW5kb3csICRsb2NhdGlvbiwgJHN0YXRlLCAkY29va2llcywgJHNjb3BlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmlzU2lnbmVkSW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJvb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgncm9vbScpKTtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZUZyb207XHJcbiAgICAgICAgJHNjb3BlLmRhdGVUbyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKS5kYXRlVG87XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdleHRyYXMnKSkuZXh0cmFzO1xyXG4gICAgICAgICRzY29wZS5udW1PZkRheXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLm51bU9mRGF5cztcclxuXHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCA/ICRzY29wZS5pc1NpZ25lZEluID0gdHJ1ZSA6ICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnJlc2VydmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS50ZXJtcyAhPSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1ByemVkIHBvdHdpZXJkemVuaWVtIHJlemVyd2FjamkgbmFsZcW8eSB6YWFrY2VwdG93YcSHcmVndWxhbWluLicpO1xyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2UuYm9va1Jvb20oe2lkOiAkc2NvcGUucm9vbS5faWQsIGZyb206ICRzY29wZS5kYXRlRnJvbSwgdG86ICRzY29wZS5kYXRlVG8sIHByaWNlOiBjYWxjdWxhdGVUb3RhbFByaWNlKCksIGV4dHJhczogJHNjb3BlLmV4dHJhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bEJvb2tpbmcnKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gd3nFm3dpZXRsZW5pZSBlcnJyb3JhXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b1ByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL29mZmVyJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ29mZmVyJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdG90YWwgPSAoJHNjb3BlLnJvb20ucHJpY2UgKiAkc2NvcGUubnVtT2ZEYXlzKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBlLnByaWNlICogJHNjb3BlLm51bU9mRGF5cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHpyb2JpZW5pZSByZWplc3RyYWNqaShtb8W8ZSBwcnplbmllc2llbmllIG5hIHNpZ251cCB2aWV3PyBkbyByb3p3YcW8ZW5pYSkgaSBvYnPFgnVnYSBixYLEmWTDs3cobW/FvGUgamFrb8WbIHBvxYLEhWN6ecSHIG9ieWR3YSBsb2dvd2FuaWEgaSByZWplc3RyYWNqZSB3IGplZG5vPylcclxuICAgICAgICAvL1RPRE8gT2JzbHVnYSBibGVkb3cgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGN6ZWdvcyBkbyB3aWRva3UgcmV6ZXJ3YWpjaVxyXG4gICAgICAgIC8vVE9ETyBwb3Vzw7N3YcSHIGpha2llxZsgaW5pdHkod3lzdGFjenkgd3lvxYJhxIcgZnVua2NqxJkgdyBrb250cm9sZXJ6ZSBsdWIgc3J2KVxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGNhxYJlaiBvYnPFgnVnaSBrb250YSh6bWlhbmEgaGFzxYJhLCBudW1lcnUgdGVsZWZvbnVbZG9kYW5pZSBsdWIgem1pYW5hXSwgcG9kZ2zEhWR1IHJlemVyd2FjamksIGl0cCkgb3JheiBvYnPFgnVnaSBob3RlbHUoQ1JVRCBkb2RhdGvDs3csIHBva29qaSBpdHApLlxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIG1vxbxlIGpha2nFmyB3eWtyZXPDs3cgbmEgdGVtYXQgb2JjacSFxbxlbmlhIHBva29qaSBsdWIgamFracWbIHByenljaG9kw7N3IGN6eSBjb8WbIGFsYm8gamFpZcWbIGNvxZsgZG8gZ2VuZXJvd2FuaWUgcGRmIHogcmFwb3J0ZW1cclxuICAgICAgICAvL1RPRE8gcG96bWllbmlhxIcgc8WCb3dhIHJlc2VydmF0aW9uIGl0cCBuYSBib29raW5nXHJcbiAgICAgICAgLy9UT0RPIGtvZHkgcmFiYXRvd2VcclxuICAgICAgICAvL1RPRE8gcG93aWFkb21pZW5pZSBvIGNpYXN0ZWN6a2FjaFxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIHBvZGdsxIVkdSBvYsWCb8W8ZW5pYSBob3RlbHUgamFrIHcga2luaSgzIHN0YW55OiB3b2xueSwgemFyZXplcndvd2FueSwgemFqZXR5KVxyXG4gICAgICAgIC8vVE9ETyB6YmFkYW5pZSBjenkgLnJ1biBzdGF0ZVByb3ZpZGVyYSBwb2N6ZWJuZVxyXG4gICAgICAgIC8vVE9ETyBwb3puYW5pZSBzdGF0ZVByb3ZpZGVyYSBpIGRvZGFuaWUgbmVzdGVkIHZpZXdzXHJcbiAgICAgICAgLy9UT0RPIG5hIGfFgsOzd25laiBzdHJvbmllIHpyb2JpxIfFvGVieSBkYXRhIGJ5xYLEhSBjb25ham1uaWVqIGplZGVuIGR6aWVuIHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gem1pYW5hIHJlZ2V4IG5hIHJvb3RTY29wZSBqZXNsaSBtb3psaXdlXHJcbiAgICAgICAgLy9UT0RvIGRhdGEgcmV6ZXJ3YWNqaSB0eWxrbyBvZCBkYXR5IGR6aXNpZWpzemVqIChiZXogcmV6ZXJ3YWNqaSB3IHByemVzesWCb8WbY2kpXHJcbiAgICAgICAgLy9UT0RPIGtvbnRvXHJcbiAgICAgICAgLy96bWlhbmEgZGFueWNoXHJcbiAgICAgICAgLy96bWlhbmEgaGFzxYJhXHJcbiAgICAgICAgLy96b2JhY3plbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL2FudWxvd2FuaWUgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgnY29tcGFyZVRvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6IFwibmdNb2RlbFwiLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgb3RoZXJNb2RlbFZhbHVlOiBcIj1jb21wYXJlVG9cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgbmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRvcnMuY29tcGFyZVRvID0gZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbFZhbHVlID09IHNjb3BlLm90aGVyTW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFwib3RoZXJNb2RlbFZhbHVlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KVxyXG4gICAgLmRpcmVjdGl2ZSgndXNlckluZm8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxwPnNpYWxhbGE8L3A+J1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDguMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ29mZmVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRjb29raWVzLCAkc3RhdGUsICRsb2NhdGlvbiwgJHdpbmRvdywgb2ZmZXJTdmMpIHtcclxuICAgICAgICAkc2NvcGUub2ZmZXIgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzID0gW107XHJcbiAgICAgICAgdmFyIGRhdGVzID0ge307XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVUbyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5yb29tTmFtZSA9ICcnO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNob3dPZmZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm9mZmVyID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBnZXRFeHRyYXMoKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGVzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZUZyb20pKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVUbyA9IGRhdGVQcmVldGlmeShuZXcgRGF0ZShkYXRlcy5kYXRlVG8pKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5yb29tTmFtZSA9ICRzY29wZS5vZmZlci50eXBlO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbVByaWNlID0gJHNjb3BlLm9mZmVyLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSA9IDA7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBkYXRlUHJlZXRpZnkgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gJycrZGF5KyctJyttb250aCsnLScreWVhcjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG5cclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSAtPSAoZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvQ29uZmlybWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXNkYXNkJyk7XHJcbiAgICAgICAgICAgIHZhciBleHRyYXMgPSB7ZXh0cmFzOiAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMsIG51bU9mRGF5czogY2FsY3VsYXRlRGlmZk9mRGF5cygpfTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdleHRyYXMnLCBKU09OLnN0cmluZ2lmeShleHRyYXMpKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9jb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29uZmlybWF0aW9uJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9tYWluJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmdldEV4dHJhcygpLnRoZW4oZnVuY3Rpb24gKGV4dHJhc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBleHRyYXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCAkc2NvcGUuZXh0cmFzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRleHQgPSAnRG9kYWogKyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25Ub2dnbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZXMuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoZGF0ZXMuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzaG93T2ZmZXIoKTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigncm9vbUN0cmwnLCBmdW5jdGlvbiAoJHEsICRjb29raWVzLCAkc2NvcGUsICR3aW5kb3csICRsb2NhdGlvbiwgcm9vbVNlcnZpY2UsIG9mZmVyU3ZjLCRmaWx0ZXIsICRzdGF0ZSkge1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yTXNnID0nJztcclxuICAgICAgICAkc2NvcGUucm9vbXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUubnVtYmVyT2ZCZWRzID0gMTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Y2Nlc3NmdWxDYW5jZWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSByb29tO1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5zZWxlY3RSb29tKHJvb20pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGUpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBkYXRlO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRlbXAgPSBuZXcgRGF0ZTtcclxuICAgICAgICAgICAgZGF0ZVRlbXAuc2V0RGF0ZShkYXRlVGVtcC5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlVGVtcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZpbmRSb29tcyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gV3nFm3dpZXRsZW5pZSBlcnJvcmEgbyBicmFrdSBwb2tvamkgbyB3eWJyYW55Y2ggcGFyYW1ldHJhY2ggdcW8eXdhasSFYyBub1Jvb21zRXJyb3IgaSBuZy1IaWRlXHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21zKHtcclxuICAgICAgICAgICAgICAgIGZyb206ICRzY29wZS5kYXRlRnJvbS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdG86ICRzY29wZS5kYXRlVG8udG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGJlZHM6ICRzY29wZS5udW1iZXJPZkJlZHNcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocm9vbXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucm9vbXMgPSByb29tc0RhdGE7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSAnQ2/FmyBwb3N6xYJvIG5pZSB0YWsuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncm9vbScsIEpTT04uc3RyaW5naWZ5KHJvb20pKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdkYXRlcycsIEpTT04uc3RyaW5naWZ5KHtkYXRlRnJvbTogJHNjb3BlLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5kYXRlVG99KSk7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmNob29zZVJvb20ocm9vbSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvb2ZmZXInO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50ZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucm9vbXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRBbGxSb29tcygpLnRoZW4oZnVuY3Rpb24gKHJvb21zKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUm9vbXMgPSByb29tcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE8gb2JzxYJ1Z2EgZXJyb3JhXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5nZXRBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAocmVzZXJ2YXRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVUbyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZXNlcnZhdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS50byk7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vdEF2YWlsYWJsZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJ2F2YWlsYWJsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubWFuYWdtZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbURhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGU7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbURhdGVUbyA9IGRhdGVUZW1wO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmdzID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdzZWxlY3RlZFJvb20nLCBKU09OLnN0cmluZ2lmeShyb29tKSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ21hbmFnbWVudC1ib29raW5ncycpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnc2VsZWN0ZWRSb29tJykpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21Cb29raW5ncygkc2NvcGUuc2VsZWN0ZWRSb29tLl9pZCkudGhlbihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmdzID0gYi5yZXNlcnZhdGlvbnM7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYm9va2luZ3MpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNy4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmlsdGVyKCd1bmlxdWVDYXRlZ29yaWVzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocm9vbXMsIHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICBpZihhbmd1bGFyLmlzQXJyYXkocm9vbXMpKXtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcm9vbXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSByb29tc1tpXVtwcm9wZXJ0eU5hbWVdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChrZXlzW3ZhbF0pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5c1t2YWxdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocm9vbXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vbXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ0F1dGhTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcclxuICAgICAgICB2YXIgTE9DQUxfVE9LRU4gPSAndG9rZW4nO1xyXG4gICAgICAgIHZhciBpc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgYXV0aFRva2VuO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2FkVXNlckluZm8oKSB7XHJcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9UT0tFTik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIFVzZXIgaW5mby4uLicpOy8vRG8gdXN1bmnEmWNpYVxyXG4gICAgICAgICAgICBpZih0b2tlbil7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mbyh0b2tlbik7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95VXNlckluZm8oKSB7XHJcbiAgICAgICAgICAgIGF1dGhUb2tlbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9UT0tFTik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdG9yZVVzZXJJbmZvKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9UT0tFTiwgdG9rZW4pO1xyXG4gICAgICAgICAgICB1c2VySW5mbyh0b2tlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1c2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB0b2tlbjtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGF1dGhUb2tlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzaWduaW4gPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9hdXRoZW50aWNhdGUnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnLCByZXN1bHQuZGF0YS5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnLCByZXN1bHQuZGF0YS5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2YXIgc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGVzdHJveVVzZXJJbmZvKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cCA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cCcsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnamVzdGVtIHcgcmVzb2x2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsb2FkVXNlckluZm8oKTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe2ZpcnN0TmFtZTogcmVzdWx0LmRhdGEuZmlyc3ROYW1lLCBsYXN0TmFtZTogcmVzdWx0LmRhdGEubGFzdE5hbWUsIGVtYWlsOiByZXN1bHQuZGF0YS5lbWFpbCwgcGhvbmU6IHJlc3VsdC5kYXRhLnBob25lLCByb2xlOiByZXN1bHQuZGF0YS5yb2xlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckJvb2tpbmdzID0gZnVuY3Rpb24gKCkgey8vVE9ETyBwb3ByYXdpxIcgcmF6ZW0geiBhcGkgxbxlYnkgZGF3YcWCbyBzdWNjZXNzXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0VXNlckJvb2tpbmdzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbiAobmV3RGV0YWlscykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS90ZXN0JywgbmV3RGV0YWlscykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldE5ld1Rva2VuJywge2VtYWlsOiBuZXdEZXRhaWxzLmVtYWlsfSkudGhlbihmdW5jdGlvbiAocmVzdWx0Mikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Mi5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQyIHN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdDIuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBub3dlZ28gdG9rZW5hJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3N1Y2Nlc3M6IHRydWUsIG1zZzogXCJQb215xZtsbmllIHptaWVuaW9ubyBkYW5lXCJ9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7c3VjY2VzczogZmFsc2UsIG1zZzogXCJjb8WbIHBvc3rFgm8gbmllIHRha1wifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAob2xkUGFzcywgbmV3UGFzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGFuZ2UtcGFzc3dvcmQnLCB7b2xkUGFzczogb2xkUGFzcywgbmV3UGFzczogbmV3UGFzc30pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe21zZzogJ3BvbXnFm2xuaWUgem1pZW5pb25vIGhhc2xvJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7bXNnOiByZXN1bHQuZGF0YS5lcnJvcn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlclJvbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcmluZm8nKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7cm9sZTogcmVzdWx0LmRhdGEucm9sZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBzaWduaW46IHNpZ25pbixcclxuICAgICAgICAgICAgc2lnbm91dDogc2lnbm91dCxcclxuICAgICAgICAgICAgc2lnbnVwOiBzaWdudXAsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiBnZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgZ2V0VXNlckJvb2tpbmdzOiBnZXRVc2VyQm9va2luZ3MsXHJcbiAgICAgICAgICAgIGNoYW5nZVVzZXJEZXRhaWxzOiBjaGFuZ2VVc2VyRGV0YWlscyxcclxuICAgICAgICAgICAgY2hhbmdlUGFzc3dvcmQ6IGNoYW5nZVBhc3N3b3JkLFxyXG4gICAgICAgICAgICBnZXRVc2VyUm9sZTogZ2V0VXNlclJvbGUsXHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkXHJcbiAgICAgICAgfVxyXG4gICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwOC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnb2ZmZXJTdmMnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcbiAgICAgICAgdmFyIGNob3NlblJvb20gPSB7fTtcclxuICAgICAgICB2YXIgZXh0cmFzID0gW107XHJcblxyXG4gICAgICAgIHZhciBjaG9vc2VSb29tID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgY2hvb3NlblJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hvb3NlblJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRFeHRyYXMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5leHRyYXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgY2hvb3NlUm9vbTogY2hvb3NlUm9vbSxcclxuICAgICAgICAgICAgZ2V0Um9vbTogZ2V0Um9vbSxcclxuICAgICAgICAgICAgZ2V0RXh0cmFzOiBnZXRFeHRyYXMsXHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgncm9vbVNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxlY3RlZFJvb20gPSBudWxsO1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbXMgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9maW5kUm9vbXMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvYnJhbm8gcG9rb2plJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEucm9vbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYm9va1Jvb20gPSBmdW5jdGlvbiAoZGF0YSkgey8vVE9ETyB6amHEhcSHIHNpxJlcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcmVzZXJ2ZScsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2pldGVtIHByemVkIHBvc3QgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NhbmNlbEJvb2tpbmcnLHtyb29tX2lkOiByb29tX2lkLCBib29raW5nX2lkOiBib29raW5nX2lkfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlIGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlamVjdCBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFJvb21zJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tQm9va2luZ3MgPSBmdW5jdGlvbiAocm9vbV9pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXRSb29tQm9va2luZ3MnLCB7cm9vbV9pZDogcm9vbV9pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YVswXS5yZXNlcnZhdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhWzBdKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBnZXRSb29tczogZ2V0Um9vbXMsXHJcbiAgICAgICAgICAgIGdldEFsbFJvb21zOiBnZXRBbGxSb29tcyxcclxuICAgICAgICAgICAgYm9va1Jvb206IGJvb2tSb29tLFxyXG4gICAgICAgICAgICBjYW5jZWxCb29raW5nOiBjYW5jZWxCb29raW5nLFxyXG4gICAgICAgICAgICBnZXRSb29tQm9va2luZ3M6IGdldFJvb21Cb29raW5nc1xyXG4gICAgICAgIH1cclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
