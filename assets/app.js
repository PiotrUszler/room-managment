var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(t){return t.headers=t.headers||{},e.localStorage.token&&(t.headers.Authorization=e.localStorage.token),t}}}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("managment.room-details",{url:"/managment-room-details",templateUrl:"managment-room-details",controller:"roomCtrl",params:{obj:null}}).state("managment.extras",{url:"/managment-extras",templateUrl:"managment-extras"}).state("managment.extras.details",{url:"/managment-extras-details",templateUrl:"managment-extras-details"}).state("managment.extras.create",{url:"/managment-extras-create",templateUrl:"managment-extras-create"}).state("admin-booking",{url:"/admin-booking",templateUrl:"admin-booking"}),t.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,t,o){e.$state=t,e.$stateParams=o}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,t,o,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,i){if(e){var s={firstName:n,lastName:a,email:r,phoneNumber:i};o.changeUserDetails(s).then(function(e){t.reload()})}},e.cancelBooking=function(e,o){n.cancelBooking(e,o).then(function(e){t.reload()})};var a=function(){o.getUserBookings().then(function(t){e.userBookings=t})},r=function(){o.getUserInfo().then(function(t){e.firstName=t.firstName,e.lastName=t.lastName,e.email=t.email,e.phone=t.phone})};e.changePassword=function(t,n,a){t&&o.changePassword(n,a).then(function(t){e.successfulPasswordChange=!0},function(t){e.wrongPassword=!0})},e.checkDate=function(e){var t=new Date,o=new Date(e);return o>t},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,t,o,n,a,r,i,s){t.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",t.submitError=!1,t.errorMessage="",i.isLoggedIn=function(){return s.isAuthenticated},i.isLoggedIn()&&s.getUserRole().then(function(e){i.role=e.role}),t.signin=function(){s.signin(t.user).then(function(e,t){i.isLogedIn=!0,s.getUserRole().then(function(e){i.role=e.role}),n.location.reload()})},t.signout=function(){s.signout(),i.isLogedIn=!1,o.go("home").then(function(){n.location.reload()})},t.getUserInfo=function(){s.getUserInfo().then(function(e){t.userinfo=e})},t.submitForm=function(e){e?s.signup(t.user).then(function(e){t.submitError=!1,s.signin(t.user).then(function(e,t){i.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():o.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(e.code){case 11e3:t.submitError=!0,t.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:t.submitError=!0,t.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(t.submitError=!0,t.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},t.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService","voucherService",function(e,t,o,n,a,r,i,s,c,u){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays,r.price=JSON.parse(a.get("price"));var l=function(){s.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room.room.id,from:r.dateFrom,to:r.dateTo,price:r.price,extras:r.extras}).then(function(){i.discount?u.useVoucher(i.discount.code).then(function(e){n.go("successfulBooking")},function(e){console.log(e)}):n.go("successfulBooking")},function(e){})},r.toPrevious=function(){n.go("offer")};l()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,t,o,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$rootScope","$cookies","$state","$location","$window","offerSvc",function(e,t,o,n,a,r,i){e.offer={},e.extras=[],e.selectedExtras=[];var s={};e.dateFrom="",e.dateTo="",e.roomName="";var c=function(){e.offer=JSON.parse(o.get("room")),e.extras=l(),s=JSON.parse(o.get("dates")),e.dateFrom=u(new Date(s.dateFrom)),e.dateTo=u(new Date(s.dateTo)),e.roomName=e.offer.room.type,e.roomPrice=e.offer.room.price*d(),e.extrasTotalPrice=0,e.calculateTotalPrice()},u=function(e){var t=e.getUTCDate(),o=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+t+"-"+o+"-"+n};e.addOrRemoveExtra=function(t){var o=e.selectedExtras.indexOf(t);t.buttonText=t.buttonToggle?"Dodaj +":"Usuń -",t.buttonToggle=!t.buttonToggle,o==-1?(e.selectedExtras.push(t),e.extrasTotalPrice+=t.price*d()):(e.selectedExtras.splice(o,1),e.extrasTotalPrice-=t.price*d()),e.calculateTotalPrice()},e.toConfirmation=function(){for(var t={extras:[],numOfDays:d()},a=0;a<e.selectedExtras.length;a++){var r={name:e.selectedExtras[a].name};t.extras.push(r)}o.put("extras",JSON.stringify(t)),o.put("price",JSON.stringify(e.totalPrice)),n.go("confirmation")},e.toPrevious=function(){n.go("home")},e.calculateTotalPrice=function(){void 0!=t.discount&&"zl"==t.discount.type?e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice-t.discount.amount:void 0!=t.discount&&"%"==t.discount.type?(e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice,e.totalPrice=e.totalPrice-e.totalPrice*(t.discount.amount/100)):e.totalPrice=d()*e.offer.room.price+e.extrasTotalPrice};var l=function(){i.getExtras().then(function(t){e.extras=t;for(var o=0;o<e.extras.length;o++)e.extras[o].buttonText="Dodaj +",e.extras[o].buttonToggle=!1})};e.addOrRemoveExtra=function(t){var o=e.selectedExtras.indexOf(t);t.buttonText=t.buttonToggle?"Dodaj +":"Usuń -",t.buttonToggle=!t.buttonToggle,e.totalPrice=0,o==-1?(e.selectedExtras.push(t),e.extrasTotalPrice+=t.price*d()):(e.selectedExtras.splice(o,1),e.extrasTotalPrice-=t.price*d()),e.calculateTotalPrice()};var d=function(){var e=864e5,t=new Date(s.dateFrom),o=new Date(s.dateTo),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());return Math.floor((a-n)/e)};t.$watch("discount",function(){e.calculateTotalPrice()}),c()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$rootScope","$window","$location","roomService","voucherService","offerSvc","$filter","$state",function(e,t,o,n,a,r,i,s,c,u,l){o.dateFrom="",o.dateTo="",o.noRoomsError=!1,o.errorMsg="",o.rooms=[],o.numberOfBeds=1,o.successfulCancel=!1,o.totalPrice=0,o.newExtra={},o.extras=[],o.selectedExtras=[],o.extrasTotalPrice=0,o.selectOrAddUser=void 0,o.select=function(e){o.selectedRoom=e};var d=function(){var e=new Date;o.dateFrom=e;var t=new Date;t.setDate(t.getDate()+1),o.dateTo=t};o.init=function(){d(),o.findRooms()},o.extrasInit=function(){c.getExtras().then(function(e){console.log(e),o.managmentExtras=e})},o.findRooms=function(){if(o.dateFrom.getMonth()>=o.dateTo.getMonth()&&o.dateFrom.getDate()>=o.dateTo.getDate()){var e=new Date;e.setDate(o.dateFrom.getDate()+1),e.setMonth(o.dateFrom.getMonth()),o.dateTo=e}i.getRooms({from:o.dateFrom.toISOString(),to:o.dateTo.toISOString(),beds:o.numberOfBeds}).then(function(e){e.length>0?(o.rooms=e,o.noRoomsError=!1):o.noRoomsError=!0},function(e){o.noRoomsError=!0,o.errorMsg="Coś poszło nie tak."})},o.addRoom=function(e){t.put("room",JSON.stringify({room:{id:e._id,type:e.type,price:e.price}})),t.put("dates",JSON.stringify({dateFrom:o.dateFrom,dateTo:o.dateTo})),c.chooseRoom(e),l.go("offer")},o.getAllRooms=function(){i.getAllRooms().then(function(e){o.allRooms=e},function(e){})},o.dateChanged=function(){if(o.dateFrom.getMonth()>=o.dateTo.getMonth()&&o.dateFrom.getDate()>=o.dateTo.getDate()){var e=new Date;e.setDate(o.dateFrom.getDate()+1),e.setMonth(o.dateFrom.getMonth()),o.dateTo=e}},o.getAvailability=function(e){for(var t=(new Date,new Date(o.dateFrom)),n=new Date(o.dateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),i=new Date(e[a].to);if(t<i&&n>r)return"notAvailable"}return"available"},o.managmentInit=function(){d(),o.getAllRooms()},o.toBookings=function(e){t.put("selectedRoom",JSON.stringify({_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price})),$("#room-dialog").modal("hide"),setTimeout(function(){l.go("managment-bookings")},500)},o.getSelectedRoom=function(){o.selectedRoom=JSON.parse(t.get("selectedRoom"))},o.checkDate=function(e){var t=new Date,o=new Date(e);return o>t},o.cancelBooking=function(e,t){i.cancelBooking(e,t).then(function(e){l.reload()})},o.getRoomBookings=function(){o.getSelectedRoom(),i.getRoomBookings(o.selectedRoom._id).then(function(e){o.bookings=e.reservations})},o.selectUser=function(e){i.getUserInfo(e).then(function(e){o.selectedUser=e})},o.toBooking=function(e,o,n){t.put("booking",JSON.stringify({room:{_id:e._id,type:e.type,number:e.number,beds:e.beds,price:e.price},dateFrom:o,dateTo:n})),$("#room-dialog").modal("hide"),setTimeout(function(){l.go("admin-booking")},500)},o.initBooking=function(){o.booking=JSON.parse(t.get("booking")),o.calculateTotalPrice(),g(),i.getUsersEmails().then(function(e){o.users=JSON.parse(JSON.stringify(e))})},o.submitBookForm=function(){var e=null;if(o.selectOrAddUser){if(void 0==o.bookingUser.email)var e={email:""+o.bookingUser.firstName+o.bookingUser.lastName+o.bookingUser.phone,firstName:o.bookingUser.firstName,lastName:o.bookingUser.lastName,phone:o.bookingUser.phone};else var e={email:o.bookingUser.email,firstName:o.bookingUser.firstName,lastName:o.bookingUser.lastName,phone:o.bookingUser.phone};i.signupAndBook(e,o.booking.room._id,{dateFrom:o.booking.dateFrom,dateTo:o.booking.dateTo},o.totalPrice,o.selectedExtras).then(function(e){n.discount&&s.useVoucher(n.discount.code).then(function(e){},function(e){})})}else e=JSON.parse(o.selectedUserBooking),i.adminBook(o.booking.room._id,e.email,{dateFrom:o.booking.dateFrom,dateTo:o.booking.dateTo},o.totalPrice,o.selectedExtras).then(function(e){n.discount&&s.useVoucher(n.discount.code).then(function(e){},function(e){}),o.successfulAdminBooking=!0})};var m=function(){var e=864e5,t=new Date(o.booking.dateFrom),n=new Date(o.booking.dateTo),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};o.calculateTotalPrice=function(){o.booking&&(void 0!=n.discount&&"zl"==n.discount.type?o.totalPrice=m()*o.booking.room.price+o.extrasTotalPrice-n.discount.amount:void 0!=n.discount&&"%"==n.discount.type?(o.totalPrice=m()*o.booking.room.price+o.extrasTotalPrice,o.totalPrice=o.totalPrice-o.totalPrice*(n.discount.amount/100)):o.totalPrice=m()*o.booking.room.price+o.extrasTotalPrice)};var g=function(){c.getExtras().then(function(e){o.extras=e;for(var t=0;t<o.extras.length;t++)o.extras[t].buttonText="Dodaj +",o.extras[t].buttonToggle=!1})};o.changeExtraDetails=function(e){e&&i.changeExtraDetails(o.selectedExtra).then(function(e){o.changeExtraDetailsResult=e},function(e){o.changeExtraDetailsResult=e})},o.createExtra=function(e){e&&i.createExtra(o.newExtra).then(function(e){o.createdNewExtra=e})},o.deleteExtra=function(){console.log(o.selectedExtra),i.deleteExtra({id:o.selectedExtra._id}).then(function(e){o.deletedExtraResult="Usunięto dodatek",o.extrasInit=function(){c.getExtras().then(function(e){o.managmentExtras=e})}},function(e){o.deletedExtraResult=e})},o.addOrRemoveExtra=function(e){var t=o.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,o.totalPrice=0,t==-1?(o.selectedExtras.push(e),o.extrasTotalPrice+=e.price*m()):(o.selectedExtras.splice(t,1),o.extrasTotalPrice-=e.price*m()),o.calculateTotalPrice()},o.showDetails=function(e){$("#room-dialog").modal("hide"),setTimeout(function(){l.go("managment.room-details",{obj:o.selectedRoom})},500)},o.roomDetailsInit=function(){o.roomParam=l.params.obj},o.showParam=function(){console.log(l.params.obj)},o.changeRoomDetails=function(e){e&&(i.changeRoomDetails(o.roomParam).then(function(e){o.changeRoomDetailsResult="Zmiana przebiegła pomyślnie"},function(e){"NUM_ERR"==e?o.changeRoomDetailsResult="Pokój o podanum numerze już istnieje. Proszę podać inny numer.":o.changeRoomDetailsResult="Wystąpił błąd: "+e}),console.log(o.roomParam))},o.paidClass=function(e){return e?"btn-success":"btn-warning"},o.pay=function(e){i.pay(e._id,!e.paid).then(function(t){e.paid=!e.paid})},n.$watch("discount",function(){o.calculateTotalPrice()})}]),angular.module("app").controller("userCtrl",["$scope","$state","AuthService","roomService","userService",function(e,t,o,n,a){a.getAllUsers().then(function(t){e.users=t}),e.changeUserDetails=function(o){if(o){var n={firstName:e.selectedUser.firstName,lastName:e.selectedUser.lastName,email:e.selectedUser.email,phoneNumber:e.selectedUser.phoneNumber,role:e.selectedUser.role};a.changeUserDetails(n).then(function(e){t.reload()})}}}]),angular.module("app").controller("voucherCtrl",["$scope","$rootScope","voucherService",function(e,t,o){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var t="",o=0;o<e.length;o++){if(!n(e.charAt(o)))return t=Number(t);t+=e.charAt(o)}return t=Number(t)}e.generateVouchers=function(){e.vouchers={codes:[]};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=e.voucherExpiryDate;if(o<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var n="",r=0;r<4;r++){for(var i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));3!=r&&(n+="-")}e.vouchers.codes.push(n)}var s=e.discount.charAt(e.discount.length-1);"%"===s?e.vouchers.discountType="%":"ł"===s&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=a(e.discount),e.vouchers.expiryDate=o,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){o.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){e.voucher&&o.checkVoucher(e.voucher.toString()).then(function(o){e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+o.discount+o.discountType,t.discount={amount:o.discount,type:o.discountType,code:e.voucher}},function(o){t.discount=void 0,e.voucherNotFound=o,e.voucherFound=void 0})},e.codeChanged=function(){e.voucherFound=void 0,e.voucherNotFound=void 0,t.discount=void 0}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,t){if(angular.isArray(e)){for(var o=[],n={},a=0;a<e.length;a++){var r=e[a][t];angular.isUndefined(n[r])&&(n[r]=!0,o.push(e[a]))}return o}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,t,o){function n(){var e=window.localStorage.getItem(c);e&&i(e)}function a(){s=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(e){window.localStorage.setItem(c,e),i(e)}function i(t){u=!0,s=t,e.defaults.headers.common.Authorization=s}var s,c="token",u=!1,l=function(o){return t(function(t,n){e.post("/api/authenticate",o).then(function(e){e.data.success?(r(e.data.token),t(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},m=function(o){return t(function(t,n){e.post("/api/signup",o).then(function(e){e.data.success?t(e.data.msg):n(e.data.msg)})})};n();var g=function(){return t(function(t,o){e.get("/api/userinfo").then(function(e){e.data.success?t({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):o(e.data.msg)})})},f=function(){return t(function(t,o){e.get("/api/getUserBookings").then(function(e){t(e.data)})})},p=function(o){return t(function(t,a){e.post("/api/changeUserDetails",o).then(function(i){i.data.success?(e.post("/api/getNewToken",{email:o.email}).then(function(e){e.data.success&&(r(e.data.token),n())}),t({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(o,n){return t(function(t,a){e.post("/api/change-password",{oldPass:o,newPass:n}).then(function(e){e.data.success?t({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return t(function(t,o){e.get("/api/userinfo").then(function(e){e.data.success?t({role:e.data.role}):o(e.data.msg)})})};return{signin:l,signout:d,signup:m,getUserInfo:g,getUserBookings:f,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,t){var o=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,o){t.get("/api/getExtras").then(function(t){t.data.success?e(t.data.extras):o(t.data.error)})})};return{chooseRoom:o,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,t){var o=function(o){return e(function(e,n){t.post("/api/findRooms",o).then(function(t){t.data.success?e(t.data.rooms):n(t.data.error)})})},n=function(o){return e(function(e,n){t.post("/api/reserve",o).then(function(t){t.data.success?e(t.data.success):n(t.data.error)})})},a=function(o,n){return e(function(e,a){t.post("/api/cancelBooking",{room_id:o,booking_id:n}).then(function(t){t.data.success?e(t.data.success):a(t.data.error)})})},r=function(){return e(function(e,o){t.get("/api/getRooms").then(function(t){t.data.success?e(t.data.result):o(t.data.error)})})},i=function(o){return e(function(e,n){t.post("/api/getRoomBookings",{room_id:o}).then(function(t){e(t.data[0])},function(e){n(e.data)})})},s=function(o){return e(function(e,n){t.post("/api/getUserInfo",{email:o}).then(function(t){t.data.error?n(t.data):e(t.data)},function(e){n(e.data)})})},c=function(o,n,a,r,i){return e(function(e,s){t.post("/api/signupAndBook",{firstName:o.firstName,lastName:o.lastName,email:o.email,number:o.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:i}).then(function(t){e("OK")},function(e){s("Wystąpił błąd podczas rezerwacji")})})},u=function(o,n,a,r,i){return e(function(e,s){t.post("/api/adminBook",{id:o,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:i}).then(function(t){t.data.success?e("OK"):s("Wystąpił błąd podczas rezerwacji")},function(e){s("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,o){t.get("/api/getUsersEmails").then(function(t){(t.data.success=!1)?o("Nie znaleziono użytkowników"):e(t.data)},function(e){o("Nie znaleziono użytkowników")})})},d=function(o,n){return e(function(e,a){t.post("/api/paid",{id:o,pay:n}).then(function(t){t.data.success?e(!0):a(!1)})})},m=function(o){return e(function(e,n){t.post("/api/changeRoomDetails",{id:o._id,number:o.number,beds:o.beds,price:o.price,type:o.type,description:o.description}).then(function(t){t.data.error?n(11e3==t.data.error.code?"NUM_ERR":t.data.error):e("OK")})})},g=function(o){return e(function(e,n){t.post("/api/changeExtraDetails",{id:o._id,name:o.name,price:o.price,unit:o.unit}).then(function(t){t.data.error?n(t.data.error):e("Dane zapisano poprawnie")})})},f=function(o){return e(function(e,n){t.post("/api/createExtra",o).then(function(t){t.data.error?n(t.data.error):e(t.data.msg)})})},p=function(o){return e(function(e,n){t.post("/api/deleteExtra",o).then(function(t){t.data.error?n(t.data.error):e(t.data.msg)})})};return{getRooms:o,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:i,getUserInfo:s,signupAndBook:c,adminBook:u,getUsersEmails:l,pay:d,changeRoomDetails:m,changeExtraDetails:g,createExtra:f,deleteExtra:p}}]),angular.module("app").service("userService",["$q","$http",function(e,t){var o=function(){return e(function(e,o){t.get("/api/getAllUsers").then(function(t){e(t.data)},function(e){o(e.data)})})},n=function(o){return e(function(e,n){t.post("/api/adminChangeUserDetails",o).then(function(t){t.data.success?e({success:!0,msg:"Pomyślnie zmieniono dane"}):n({success:!1,msg:"coś poszło nie tak"})})})};return{getAllUsers:o,changeUserDetails:n}}]),angular.module("app").service("voucherService",["$q","$http",function(e,t){var o=function(o){return console.log(o),e(function(e,n){t.post("/api/saveVouchers",o).then(function(t){t.data.success?e(t.data.msg):n(t.data.msg)},function(e){n(e.data.msg)})})},n=function(o){return e(function(e,n){t.post("/api/checkVoucher",{voucherCode:o}).then(function(t){t.data.success&&new Date(t.data.voucher.expiryDate)<new Date?n("Termin miną"):t.data.success&&t.data.voucher.used?n("Kod został już wykożystany"):t.data.success&&!t.data.voucher.used?e(t.data.voucher):n(t.data.error)})})},a=function(o){return e(function(e,n){t.post("/api/useVoucher",{code:o}).then(function(t){t.data.success?e("Klucz wykorzystany."):n(t.data.error)})})};return{saveVouchers:o,checkVoucher:n,useVoucher:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy91c2VyQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3ZvdWNoZXJDb250cm9sbGVyLmpzIiwiZmlsbHRlcnMvcm9vbUZpbHRlci5qcyIsInNlcnZpY2VzL2F1dGhvcml6YXRpb24uc3ZjLmpzIiwic2VydmljZXMvb2ZmZXIuc3ZjLmpzIiwic2VydmljZXMvcm9vbS5zdmMuanMiLCJzZXJ2aWNlcy91c2VyLnN2Yy5qcyIsInNlcnZpY2VzL3ZvdWNoZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwibG9jYWxTdG9yYWdlIiwidG9rZW4iLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwicGFyYW1zIiwib2JqIiwib3RoZXJ3aXNlIiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRzY29wZSIsIkF1dGhTZXJ2aWNlIiwicm9vbVNlcnZpY2UiLCJyZWdleCIsImlzQWN0aXZlIiwidmlld0xvY2F0aW9uIiwiJGxvY2F0aW9uIiwicGF0aCIsImNoYW5nZVVzZXJEZXRhaWxzIiwiaXNWYWxpZCIsImZOYW1lIiwibE5hbWUiLCJuRW1haWwiLCJuUGhvbmUiLCJuZXdEZXRhaWxzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lTnVtYmVyIiwidGhlbiIsImEiLCJyZWxvYWQiLCJjYW5jZWxCb29raW5nIiwicm9vbV9pZCIsImJvb2tpbmdfaWQiLCJnZXRVc2VyQm9va2luZ3MiLCJtc2ciLCJ1c2VyQm9va2luZ3MiLCJnZXRJbmZvIiwiZ2V0VXNlckluZm8iLCJ1c2VyIiwicGhvbmUiLCJjaGFuZ2VQYXNzd29yZCIsInZhbGlkIiwib2xkUCIsIm5ld1AiLCJyZXMiLCJzdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UiLCJyZWoiLCJ3cm9uZ1Bhc3N3b3JkIiwiY2hlY2tEYXRlIiwiZGF0ZSIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRhdGVGcm9tIiwiJHEiLCIkcm91dGUiLCJzdWJtaXRFcnJvciIsImVycm9yTWVzc2FnZSIsImlzTG9nZ2VkSW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJnZXRVc2VyUm9sZSIsInJlc3VsdCIsInJvbGUiLCJzaWduaW4iLCJzdWNjZXNzIiwiaXNMb2dlZEluIiwibG9jYXRpb24iLCJzaWdub3V0IiwiZ28iLCJ1c2VyaW5mbyIsInN1Ym1pdEZvcm0iLCJzaWdudXAiLCJkYXRhIiwidG9TdHJpbmciLCJjb2RlIiwiJHdhdGNoIiwiY29uc29sZSIsImxvZyIsIiRjb29raWVzIiwidm91Y2hlclNlcnZpY2UiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsInByaWNlIiwiaW5pdCIsInJlc2VydmUiLCJ0ZXJtcyIsImFsZXJ0IiwiYm9va1Jvb20iLCJpZCIsImZyb20iLCJ0byIsImRpc2NvdW50IiwidXNlVm91Y2hlciIsInZSZXN1bHQiLCJlcnJvciIsInRvUHJldmlvdXMiLCJkaXJlY3RpdmUiLCJyZXF1aXJlIiwic2NvcGUiLCJvdGhlck1vZGVsVmFsdWUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJuZ01vZGVsIiwiJHZhbGlkYXRvcnMiLCJjb21wYXJlVG8iLCJtb2RlbFZhbHVlIiwiJHZhbGlkYXRlIiwiYXR0ciIsIm1DdHJsIiwidmFsaWRhdGlvbiIsInZvdWNoZXIiLCJsZW5ndGgiLCJjaGFyQXQiLCIkc2V0VmFsaWRpdHkiLCIkcGFyc2VycyIsInB1c2giLCJvZmZlclN2YyIsIm9mZmVyIiwic2VsZWN0ZWRFeHRyYXMiLCJkYXRlcyIsInJvb21OYW1lIiwic2hvd09mZmVyIiwiZ2V0RXh0cmFzIiwiZGF0ZVByZWV0aWZ5IiwidHlwZSIsInJvb21QcmljZSIsImNhbGN1bGF0ZURpZmZPZkRheXMiLCJleHRyYXNUb3RhbFByaWNlIiwiY2FsY3VsYXRlVG90YWxQcmljZSIsImRheSIsImdldFVUQ0RhdGUiLCJtb250aCIsImdldFVUQ01vbnRoIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiYWRkT3JSZW1vdmVFeHRyYSIsImV4dHJhIiwiaW5kZXgiLCJpbmRleE9mIiwiYnV0dG9uVGV4dCIsImJ1dHRvblRvZ2dsZSIsInNwbGljZSIsInRvQ29uZmlybWF0aW9uIiwiaSIsIm5hbWUiLCJwdXQiLCJzdHJpbmdpZnkiLCJ0b3RhbFByaWNlIiwidW5kZWZpbmVkIiwiYW1vdW50IiwiZXh0cmFzRGF0YSIsIk1TX1BFUl9EQVkiLCJkYXRlRnJvbVVUQyIsIlVUQyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZGF0ZVRvVVRDIiwiTWF0aCIsImZsb29yIiwiJGZpbHRlciIsIm5vUm9vbXNFcnJvciIsImVycm9yTXNnIiwicm9vbXMiLCJudW1iZXJPZkJlZHMiLCJzdWNjZXNzZnVsQ2FuY2VsIiwibmV3RXh0cmEiLCJzZWxlY3RPckFkZFVzZXIiLCJzZWxlY3QiLCJzZWxlY3RlZFJvb20iLCJzZXREYXRlIiwiZGF0ZVRlbXAiLCJmaW5kUm9vbXMiLCJleHRyYXNJbml0IiwiZSIsIm1hbmFnbWVudEV4dHJhcyIsInNldE1vbnRoIiwiZ2V0Um9vbXMiLCJ0b0lTT1N0cmluZyIsImJlZHMiLCJyb29tc0RhdGEiLCJhZGRSb29tIiwiX2lkIiwiY2hvb3NlUm9vbSIsImdldEFsbFJvb21zIiwiYWxsUm9vbXMiLCJkYXRlQ2hhbmdlZCIsImdldEF2YWlsYWJpbGl0eSIsInJlc2VydmF0aW9ucyIsInJvb21EYXRlRnJvbSIsInJvb21EYXRlVG8iLCJtYW5hZ21lbnRJbml0IiwidG9Cb29raW5ncyIsIm51bWJlciIsIiQiLCJtb2RhbCIsInNldFRpbWVvdXQiLCJnZXRTZWxlY3RlZFJvb20iLCJnZXRSb29tQm9va2luZ3MiLCJiIiwiYm9va2luZ3MiLCJzZWxlY3RVc2VyIiwidSIsInNlbGVjdGVkVXNlciIsInRvQm9va2luZyIsImluaXRCb29raW5nIiwiYm9va2luZyIsImdldFVzZXJzRW1haWxzIiwidXNlcnMiLCJzdWJtaXRCb29rRm9ybSIsImJvb2tpbmdVc2VyIiwic2lnbnVwQW5kQm9vayIsInNlbGVjdGVkVXNlckJvb2tpbmciLCJhZG1pbkJvb2siLCJzdWNjZXNzZnVsQWRtaW5Cb29raW5nIiwiY2hhbmdlRXh0cmFEZXRhaWxzIiwic2VsZWN0ZWRFeHRyYSIsImNoYW5nZUV4dHJhRGV0YWlsc1Jlc3VsdCIsImNyZWF0ZUV4dHJhIiwiY3JlYXRlZE5ld0V4dHJhIiwiZGVsZXRlRXh0cmEiLCJkZWxldGVkRXh0cmFSZXN1bHQiLCJzaG93RGV0YWlscyIsInJvb21EZXRhaWxzSW5pdCIsInJvb21QYXJhbSIsInNob3dQYXJhbSIsImNoYW5nZVJvb21EZXRhaWxzIiwiY2hhbmdlUm9vbURldGFpbHNSZXN1bHQiLCJwYWlkQ2xhc3MiLCJwYWlkIiwicGF5IiwidXNlclNlcnZpY2UiLCJnZXRBbGxVc2VycyIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImNvbnZlcnRUb051bWJlciIsIk51bWJlciIsImdlbmVyYXRlVm91Y2hlcnMiLCJ2b3VjaGVycyIsImNvZGVzIiwicG9zc2libGUiLCJleHBpcnlEYXRlIiwidm91Y2hlckV4cGlyeURhdGUiLCJ2b3VjaGVyRXJyb3IiLCJ2b3VjaGVyc0dlbmVyYXRlZCIsImdlbmVyYXRlZFZvdWNoZXJzIiwibnVtYmVyT2ZWb3VjaGVycyIsImoiLCJyYW5kb20iLCJsYXN0IiwiZGlzY291bnRUeXBlIiwidm91Y2hlcnNTYXZlZCIsInNhdmVWb3VjaGVycyIsImNoZWNrVm91Y2hlciIsInZvdWNoZXJOb3RGb3VuZCIsInZvdWNoZXJGb3VuZCIsImNvZGVDaGFuZ2VkIiwiZmlsdGVyIiwicHJvcGVydHlOYW1lIiwiaXNBcnJheSIsImtleXMiLCJ2YWwiLCJpc1VuZGVmaW5lZCIsInNlcnZpY2UiLCIkaHR0cCIsImxvYWRVc2VySW5mbyIsIndpbmRvdyIsImdldEl0ZW0iLCJMT0NBTF9UT0tFTiIsInVzZXJJbmZvIiwiZGVzdHJveVVzZXJJbmZvIiwiYXV0aFRva2VuIiwiZGVmYXVsdHMiLCJjb21tb24iLCJyZW1vdmVJdGVtIiwic3RvcmVVc2VySW5mbyIsInNldEl0ZW0iLCJyZXNvbHZlIiwicmVqZWN0IiwicG9zdCIsInJlc3VsdDIiLCJvbGRQYXNzIiwibmV3UGFzcyIsImNob29zZW5Sb29tIiwiZ2V0Um9vbSIsInJlc2VydmF0aW9uX2lkIiwiZGV0YWlscyIsImRlc2NyaXB0aW9uIiwidW5pdCIsImV4dHJhSWQiLCJ2b3VjaGVyQ29kZSIsInVzZWQiXSwibWFwcGluZ3MiOiJBQUdBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxVQUFBLFlBQUEsYUNBQUQsU0FBQUMsT0FBQSxPQUNBQyxRQUFBLG1CQUFBLFVBQUEsU0FBQUMsR0FDQSxPQUNBQyxRQUFBLFNBQUFDLEdBS0EsTUFKQUEsR0FBQUMsUUFBQUQsRUFBQUMsWUFDQUgsRUFBQUksYUFBQUMsUUFDQUgsRUFBQUMsUUFBQSxjQUFBSCxFQUFBSSxhQUFBQyxPQUVBSCxPQUlBQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUFJLEVBQUFDLEdBQ0FELEVBQ0FFLE1BQUEsUUFDQUMsSUFBQSxRQUNBQyxXQUFBLFdBQ0FDLFlBQUEsU0FFQUgsTUFBQSxTQUNBQyxJQUFBLFNBQ0FFLFlBQUEsVUFFQUgsTUFBQSxjQUNBQyxJQUFB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SUFBQXpGLEtBQUEsU0FBQWlDLEdBQ0FBLEVBQUFXLEtBQUFSLFFBQ0ErTixFQUFBLHVCQUVBQyxFQUFBbk8sRUFBQVcsS0FBQTRCLFdBS0EsUUFDQWtLLGFBQUFBLEVBQ0FDLGFBQUFBLEVBQ0FySyxXQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMjIuMDkuMjAxNi5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJywgJ3VpLnJvdXRlcicsICduZ0Nvb2tpZXMnXSk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIGZ1bmN0aW9uICgkd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21haW4nLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Jvb21DdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFpbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdyb29tcycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Jvb21zJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncm9vbXMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncmVzdGF1cmFudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Jlc3RhdXJhbnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdyZXN0YXVyYW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRhY3QnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb250YWN0JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGFjdCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdvZmZlcicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL29mZmVyJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdvZmZlckN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdvZmZlcidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb25maXJtYXRpb24nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb25maXJtYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bEJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdWNjZXNzZnVsQm9va2luZycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N1Y2Nlc3NmdWxTaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdWNjZXNzZnVsU2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bFNpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYWNjb3VudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FjY291bnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbmluJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbmluJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbmluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NpZ251cCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmJvb2tpbmdzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvYm9va2luZ3MnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdib29raW5ncydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmRldGFpbHMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZGV0YWlscydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50LmNoYW5nZVBhc3N3b3JkJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY2hhbmdlUGFzc3dvcmQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjaGFuZ2VQYXNzd29yZCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnJvb21zJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXJvb21zJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXJvb21zJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC51c2Vycycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC11c2VycycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC11c2VycydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQudm91Y2hlcnMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtdm91Y2hlcnMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtdm91Y2hlcnMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LWJvb2tpbmdzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC1ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9tYW5hZ21lbnQtYm9va2luZ3MnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnJvb20tZGV0YWlscycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC1yb29tLWRldGFpbHMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtcm9vbS1kZXRhaWxzJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyb29tQ3RybCcsXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6e1xyXG4gICAgICAgICAgICAgICAgICAgIG9iajogbnVsbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC5leHRyYXMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtZXh0cmFzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LWV4dHJhcydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQuZXh0cmFzLmRldGFpbHMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtZXh0cmFzLWRldGFpbHMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtZXh0cmFzLWRldGFpbHMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LmV4dHJhcy5jcmVhdGUnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtZXh0cmFzLWNyZWF0ZScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC1leHRyYXMtY3JlYXRlJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FkbWluLWJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hZG1pbi1ib29raW5nJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYWRtaW4tYm9va2luZydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9tYWluJylcclxuICAgIH0pXHJcbiAgICAucnVuKFsnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlUGFyYW1zID0gJHN0YXRlUGFyYW1zO1xyXG4gICAgfV0pO1xyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignYWNjQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuICAgICAgICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAodmlld0xvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2aWV3TG9jYXRpb24gPT09ICRsb2NhdGlvbi5wYXRoKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbihpc1ZhbGlkLCBmTmFtZSwgbE5hbWUsIG5FbWFpbCwgblBob25lKXtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3RGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogbkVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuUGhvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VVc2VyRGV0YWlscyhuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuY2FuY2VsQm9va2luZyhyb29tX2lkLCBib29raW5nX2lkKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckJvb2tpbmdzKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlckJvb2tpbmdzID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGhvbmUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICh2YWxpZCxvbGRQLCBuZXdQKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKG9sZFAsIG5ld1ApLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLndyb25nUGFzc3dvcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBnZXRJbmZvKCk7XHJcbiAgICAgICAgZ2V0VXNlckJvb2tpbmdzKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2F1dGhDdHJsJywgZnVuY3Rpb24gKCRxLCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgJGxvY2F0aW9uLCAkcm91dGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJyc7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmKCRyb290U2NvcGUuaXNMb2dnZWRJbigpKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbmluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbm91dCgpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VyaW5mbyA9IG1zZztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5zdWJtaXRGb3JtID0gZnVuY3Rpb24gKGlzVmFsaWQpIHtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWdudXAoJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSA9PSAnaHR0cDovL2xvY2FsaG9zdDozMDAxLyMvY29uZmlybWF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bFNpZ251cCcpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmNvZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExMDAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnV3licmFueSBlbWFpbCBqZXN0IGp1xbwgemFyZWplc3Ryb3dhbnkuIFByb3N6xJkgd3licmHEhyBpbm55Lic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3VibWl0RXJyb3InLCBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHEsICR3aW5kb3csICRsb2NhdGlvbiwgJHN0YXRlLCAkY29va2llcywgJHNjb3BlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UsIHZvdWNoZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICRzY29wZS5yb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVGcm9tO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZVRvO1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLmV4dHJhcztcclxuICAgICAgICAkc2NvcGUubnVtT2ZEYXlzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5udW1PZkRheXM7XHJcbiAgICAgICAgJHNjb3BlLnByaWNlID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3ByaWNlJykpO1xyXG5cclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkID8gJHNjb3BlLmlzU2lnbmVkSW4gPSB0cnVlIDogJHNjb3BlLmlzU2lnbmVkSW4gPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUucmVzZXJ2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLnRlcm1zICE9IHRydWUpXHJcbiAgICAgICAgICAgICAgICBhbGVydCgnUHJ6ZWQgcG90d2llcmR6ZW5pZW0gcmV6ZXJ3YWNqaSBuYWxlxbx5IHphYWtjZXB0b3dhxIdyZWd1bGFtaW4uJyk7XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5ib29rUm9vbSh7aWQ6ICRzY29wZS5yb29tLnJvb20uaWQsIGZyb206ICRzY29wZS5kYXRlRnJvbSwgdG86ICRzY29wZS5kYXRlVG8sIHByaWNlOiAkc2NvcGUucHJpY2UsIGV4dHJhczogJHNjb3BlLmV4dHJhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLnVzZVZvdWNoZXIoJHJvb3RTY29wZS5kaXNjb3VudC5jb2RlKS50aGVuKGZ1bmN0aW9uICh2UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdWNjZXNzZnVsQm9va2luZycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdWNjZXNzZnVsQm9va2luZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICB0b3RhbCA9ICgkc2NvcGUucm9vbS5wcmljZSAqICRzY29wZS5udW1PZkRheXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGUucHJpY2UgKiAkc2NvcGUubnVtT2ZEYXlzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8genJvYmllbmllIHJlamVzdHJhY2ppKG1vxbxlIHByemVuaWVzaWVuaWUgbmEgc2lnbnVwIHZpZXc/IGRvIHJvendhxbxlbmlhKSBpIG9ic8WCdWdhIGLFgsSZZMOzdyhtb8W8ZSBqYWtvxZsgcG/FgsSFY3p5xIcgb2J5ZHdhIGxvZ293YW5pYSBpIHJlamVzdHJhY2plIHcgamVkbm8/KVxyXG4gICAgICAgIC8vVE9ETyBPYnNsdWdhIGJsZWRvdyByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgY3plZ29zIGRvIHdpZG9rdSByZXplcndhamNpXHJcbiAgICAgICAgLy9UT0RPIHBvdXPDs3dhxIcgamFraWXFmyBpbml0eSh3eXN0YWN6eSB3eW/FgmHEhyBmdW5rY2rEmSB3IGtvbnRyb2xlcnplIGx1YiBzcnYpXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgY2HFgmVqIG9ic8WCdWdpIGtvbnRhKHptaWFuYSBoYXPFgmEsIG51bWVydSB0ZWxlZm9udVtkb2RhbmllIGx1YiB6bWlhbmFdLCBwb2RnbMSFZHUgcmV6ZXJ3YWNqaSwgaXRwKSBvcmF6IG9ic8WCdWdpIGhvdGVsdShDUlVEIGRvZGF0a8OzdywgcG9rb2ppIGl0cCkuXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgbW/FvGUgamFracWbIHd5a3Jlc8OzdyBuYSB0ZW1hdCBvYmNpxIXFvGVuaWEgcG9rb2ppIGx1YiBqYWtpxZsgcHJ6eWNob2TDs3cgY3p5IGNvxZsgYWxibyBqYWllxZsgY2/FmyBkbyBnZW5lcm93YW5pZSBwZGYgeiByYXBvcnRlbVxyXG4gICAgICAgIC8vVE9ETyBwb3ptaWVuaWHEhyBzxYJvd2EgcmVzZXJ2YXRpb24gaXRwIG5hIGJvb2tpbmdcclxuICAgICAgICAvL1RPRE8gcG93aWFkb21pZW5pZSBvIGNpYXN0ZWN6a2FjaFxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIHBvZGdsxIVkdSBvYsWCb8W8ZW5pYSBob3RlbHUgamFrIHcga2luaSgzIHN0YW55OiB3b2xueSwgemFyZXplcndvd2FueSwgemFqZXR5KVxyXG4gICAgICAgIC8vVE9ETyB6YmFkYW5pZSBjenkgLnJ1biBzdGF0ZVByb3ZpZGVyYSBwb2N6ZWJuZVxyXG4gICAgICAgIC8vVE9ETyBwb3puYW5pZSBzdGF0ZVByb3ZpZGVyYSBpIGRvZGFuaWUgbmVzdGVkIHZpZXdzXHJcbiAgICAgICAgLy9UT0RPIG5hIGfFgsOzd25laiBzdHJvbmllIHpyb2JpxIfFvGVieSBkYXRhIGJ5xYLEhSBjb25ham1uaWVqIGplZGVuIGR6aWVuIHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gem1pYW5hIHJlZ2V4IG5hIHJvb3RTY29wZSBqZXNsaSBtb3psaXdlXHJcbiAgICAgICAgLy9UT0RvIGRhdGEgcmV6ZXJ3YWNqaSB0eWxrbyBvZCBkYXR5IGR6aXNpZWpzemVqIChiZXogcmV6ZXJ3YWNqaSB3IHByemVzesWCb8WbY2kpXHJcbiAgICAgICAgLy9UT0RPIGtvbnRvXHJcbiAgICAgICAgLy96bWlhbmEgZGFueWNoXHJcbiAgICAgICAgLy96bWlhbmEgaGFzxYJhXHJcbiAgICAgICAgLy96b2JhY3plbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL2FudWxvd2FuaWUgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgnY29tcGFyZVRvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6IFwibmdNb2RlbFwiLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgb3RoZXJNb2RlbFZhbHVlOiBcIj1jb21wYXJlVG9cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgbmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRvcnMuY29tcGFyZVRvID0gZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbFZhbHVlID09IHNjb3BlLm90aGVyTW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFwib3RoZXJNb2RlbFZhbHVlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KVxyXG4gICAgLmRpcmVjdGl2ZSgndm91Y2hlcmNoZWNrJywgZnVuY3Rpb24gKHZvdWNoZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0aW9uKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih2b3VjaGVyLmxlbmd0aCA9PSAyMyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZvdWNoZXIuY2hhckF0KDUpID09ICctJyAmJiB2b3VjaGVyLmNoYXJBdCgxMSkgJiYgdm91Y2hlci5jaGFyQXQoMTcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b3VjaGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbUN0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdvZmZlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCAkY29va2llcywgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3csIG9mZmVyU3ZjKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5vZmZlciA9IHt9O1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMgPSBbXTtcclxuICAgICAgICB2YXIgZGF0ZXMgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21OYW1lID0gJyc7XHJcblxyXG4gICAgICAgIHZhciBzaG93T2ZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vZmZlciA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZ2V0RXh0cmFzKCk7XHJcblxyXG4gICAgICAgICAgICBkYXRlcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZVRvKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAkc2NvcGUub2ZmZXIucm9vbS50eXBlO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbVByaWNlID0gJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGF0ZVByZWV0aWZ5ID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnK2RheSsnLScrbW9udGgrJy0nK3llYXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGV4dHJhcyA9IHtleHRyYXM6IFtdLCBudW1PZkRheXM6IGNhbGN1bGF0ZURpZmZPZkRheXMoKX07XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9MDsgaSA8ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXh0cmEgPSB7bmFtZTogJHNjb3BlLnNlbGVjdGVkRXh0cmFzW2ldLm5hbWV9O1xyXG4gICAgICAgICAgICAgICAgZXh0cmFzLmV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIHZhciBleHRyYXMgPSB7ZXh0cmFzOiAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMsIG51bU9mRGF5czogY2FsY3VsYXRlRGlmZk9mRGF5cygpfTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdleHRyYXMnLCBKU09OLnN0cmluZ2lmeShleHRyYXMpKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdwcmljZScsIEpTT04uc3RyaW5naWZ5KCRzY29wZS50b3RhbFByaWNlKSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29uZmlybWF0aW9uJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnemwnKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9ICgoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UpIC0gJHJvb3RTY29wZS5kaXNjb3VudC5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICclJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAoY2FsY3VsYXRlRGlmZk9mRGF5cygpICogJHNjb3BlLm9mZmVyLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUudG90YWxQcmljZSAtICgkc2NvcGUudG90YWxQcmljZSAqICgkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudCAvIDEwMCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5vZmZlci5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmdldEV4dHJhcygpLnRoZW4oZnVuY3Rpb24gKGV4dHJhc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBleHRyYXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCAkc2NvcGUuZXh0cmFzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRleHQgPSAnRG9kYWogKyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25Ub2dnbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZXMuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoZGF0ZXMuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCgnZGlzY291bnQnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2hvd09mZmVyKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3Jvb21DdHJsJywgZnVuY3Rpb24gKCRxLCAkY29va2llcywgJHNjb3BlLCAkcm9vdFNjb3BlLCAkd2luZG93LCAkbG9jYXRpb24sIHJvb21TZXJ2aWNlLCB2b3VjaGVyU2VydmljZSwgb2ZmZXJTdmMsJGZpbHRlciwgJHN0YXRlKSB7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVUbyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPScnO1xyXG4gICAgICAgICRzY29wZS5yb29tcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5udW1iZXJPZkJlZHMgPSAxO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3VjY2Vzc2Z1bENhbmNlbCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgJHNjb3BlLm5ld0V4dHJhID0ge307XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdE9yQWRkVXNlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlRnJvbSA9IGRhdGU7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5leHRyYXNJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5nZXRFeHRyYXMoKS50aGVuKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYW5hZ21lbnRFeHRyYXMgPSBlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5maW5kUm9vbXMgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIG9nYXJuYWMgc2llIHogdHltIGJlZHMsIHd5c3p1a2l3YWMgcG9rb2plIG8gcG9kYW5laiBpbG9zY2kgb3NvYiBpIG5hendhYyB0byBqYWtvcyB3IGJhemllIG9zdGF0ZWN6bmllXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpID49ICRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpID49ICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKCRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXRNb250aCgkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbXMoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogJHNjb3BlLmRhdGVGcm9tLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB0bzogJHNjb3BlLmRhdGVUby50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgYmVkczogJHNjb3BlLm51bWJlck9mQmVkc1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyb29tc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJvb21zRGF0YS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yb29tcyA9IHJvb21zRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSAnQ2/FmyBwb3N6xYJvIG5pZSB0YWsuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncm9vbScsIEpTT04uc3RyaW5naWZ5KHtyb29tOiB7aWQ6IHJvb20uX2lkLCB0eXBlOiByb29tLnR5cGUsIHByaWNlOiByb29tLnByaWNlfX0pKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdkYXRlcycsIEpTT04uc3RyaW5naWZ5KHtkYXRlRnJvbTogJHNjb3BlLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5kYXRlVG99KSk7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmNob29zZVJvb20ocm9vbSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldEFsbFJvb21zKCkudGhlbihmdW5jdGlvbiAocm9vbXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hbGxSb29tcyA9IHJvb21zO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETyBvYnPFgnVnYSBlcnJvcmFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZGF0ZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlRnJvbS5nZXRNb250aCgpID49ICRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpID49ICRzY29wZS5kYXRlVG8uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKCRzY29wZS5kYXRlRnJvbS5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlVGVtcC5zZXRNb250aCgkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vVE9EbyBwbyB6bWlhbmllIGRhdHkgem1pZW5pYyBjbGFzc2Uoa29tcGxldG55IHJld29yaz8gOigpXHJcbiAgICAgICAgJHNjb3BlLmdldEF2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uIChyZXNlcnZhdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZXNlcnZhdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS50byk7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vdEF2YWlsYWJsZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJ2F2YWlsYWJsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubWFuYWdtZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmdzID0gZnVuY3Rpb24gKHJvb20pIHtcclxuXHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnc2VsZWN0ZWRSb29tJywgSlNPTi5zdHJpbmdpZnkoe19pZDogcm9vbS5faWQsIHR5cGU6IHJvb20udHlwZSwgbnVtYmVyOiByb29tLm51bWJlciwgYmVkczogcm9vbS5iZWRzLCBwcmljZTogcm9vbS5wcmljZX0pKTtcclxuICAgICAgICAgICAgJCgnI3Jvb20tZGlhbG9nJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdtYW5hZ21lbnQtYm9va2luZ3MnKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRSb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3NlbGVjdGVkUm9vbScpKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmNoZWNrRGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUZyb20gPiBjdXJyZW50RGF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmNhbmNlbEJvb2tpbmcocm9vbV9pZCwgYm9va2luZ19pZCkudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRSb29tQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20oKTtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbUJvb2tpbmdzKCRzY29wZS5zZWxlY3RlZFJvb20uX2lkKS50aGVuKGZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm9va2luZ3MgPSBiLnJlc2VydmF0aW9ucztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0VXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFVzZXJJbmZvKHVzZXIpLnRoZW4oZnVuY3Rpb24gKHUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXIgPSB1O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvQm9va2luZyA9IGZ1bmN0aW9uIChyb29tLCBkYXRlRnJvbSwgZGF0ZVRvKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnYm9va2luZycsIEpTT04uc3RyaW5naWZ5KHtyb29tOiB7X2lkOiByb29tLl9pZCwgdHlwZTogcm9vbS50eXBlLCBudW1iZXI6IHJvb20ubnVtYmVyLCBiZWRzOiByb29tLmJlZHMsIHByaWNlOiByb29tLnByaWNlfSwgZGF0ZUZyb206IGRhdGVGcm9tLCBkYXRlVG86IGRhdGVUb30pKTtcclxuICAgICAgICAgICAgJCgnI3Jvb20tZGlhbG9nJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdhZG1pbi1ib29raW5nJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXRCb29raW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYm9va2luZyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdib29raW5nJykpO1xyXG4gICAgICAgICAgICAvLyRzY29wZS50ZXN0LmRhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICAvLyRzY29wZS50ZXN0LmRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVUbyk7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgICAgIGdldEV4dHJhcygpO1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2Vyc0VtYWlscygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJzKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHByemVuaWVzaWVuaWUgcGV3bnljaCBmdW5rY2pvbmFsbm9zY2kgZG8gdXNlckN0cmxcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEJvb2tGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXNlciA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RPckFkZFVzZXIpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLmJvb2tpbmdVc2VyLmVtYWlsID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBcIlwiKyRzY29wZS5ib29raW5nVXNlci5maXJzdE5hbWUrJHNjb3BlLmJvb2tpbmdVc2VyLmxhc3ROYW1lKyRzY29wZS5ib29raW5nVXNlci5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuYm9va2luZ1VzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLmJvb2tpbmdVc2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLmJvb2tpbmdVc2VyLnBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUuYm9va2luZ1VzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLmJvb2tpbmdVc2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5ib29raW5nVXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICRzY29wZS5ib29raW5nVXNlci5waG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2Uuc2lnbnVwQW5kQm9vayh1c2VyLCAkc2NvcGUuYm9va2luZy5yb29tLl9pZCwge2RhdGVGcm9tOiAkc2NvcGUuYm9va2luZy5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUuYm9va2luZy5kYXRlVG99LCAkc2NvcGUudG90YWxQcmljZSwgJHNjb3BlLnNlbGVjdGVkRXh0cmFzKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyU2VydmljZS51c2VWb3VjaGVyKCRyb290U2NvcGUuZGlzY291bnQuY29kZSkudGhlbihmdW5jdGlvbiAodlJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyID0gSlNPTi5wYXJzZSgkc2NvcGUuc2VsZWN0ZWRVc2VyQm9va2luZyk7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5hZG1pbkJvb2soJHNjb3BlLmJvb2tpbmcucm9vbS5faWQsIHVzZXIuZW1haWwgLHtkYXRlRnJvbTogJHNjb3BlLmJvb2tpbmcuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLmJvb2tpbmcuZGF0ZVRvfSwgJHNjb3BlLnRvdGFsUHJpY2UsICRzY29wZS5zZWxlY3RlZEV4dHJhcylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLmRpc2NvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLnVzZVZvdWNoZXIoJHJvb3RTY29wZS5kaXNjb3VudC5jb2RlKS50aGVuKGZ1bmN0aW9uICh2UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWNjZXNzZnVsQWRtaW5Cb29raW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLmJvb2tpbmcpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICd6bCcpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlKSAtICRyb290U2NvcGUuZGlzY291bnQuYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnJScpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUudG90YWxQcmljZSAtICgkc2NvcGUudG90YWxQcmljZSAqICgkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudCAvIDEwMCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2hhbmdlRXh0cmFEZXRhaWxzID0gZnVuY3Rpb24gKHZhbGlkKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmNoYW5nZUV4dHJhRGV0YWlscygkc2NvcGUuc2VsZWN0ZWRFeHRyYSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZUV4dHJhRGV0YWlsc1Jlc3VsdCA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZUV4dHJhRGV0YWlsc1Jlc3VsdCA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jcmVhdGVFeHRyYSA9IGZ1bmN0aW9uICh2YWxpZCkge1xyXG4gICAgICAgICAgICBpZih2YWxpZCl7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5jcmVhdGVFeHRyYSgkc2NvcGUubmV3RXh0cmEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdGVkTmV3RXh0cmEgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4dHJhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VsZWN0ZWRFeHRyYSk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmRlbGV0ZUV4dHJhKHtpZDogJHNjb3BlLnNlbGVjdGVkRXh0cmEuX2lkfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZEV4dHJhUmVzdWx0ID0gXCJVc3VuacSZdG8gZG9kYXRla1wiO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc0luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWFuYWdtZW50RXh0cmFzID0gZTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZEV4dHJhUmVzdWx0ID0gZXJyb3I7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0RldGFpbHMgPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICAkKCcjcm9vbS1kaWFsb2cnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ21hbmFnbWVudC5yb29tLWRldGFpbHMnLHtvYmo6ICRzY29wZS5zZWxlY3RlZFJvb219KTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJvb21EZXRhaWxzSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21QYXJhbSA9ICRzdGF0ZS5wYXJhbXMub2JqO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaG93UGFyYW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzdGF0ZS5wYXJhbXMub2JqKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VSb29tRGV0YWlscyA9IGZ1bmN0aW9uICh2YWxpZCkge1xyXG4gICAgICAgICAgICBpZih2YWxpZCl7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5jaGFuZ2VSb29tRGV0YWlscygkc2NvcGUucm9vbVBhcmFtKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlUm9vbURldGFpbHNSZXN1bHQgPSBcIlptaWFuYSBwcnplYmllZ8WCYSBwb215xZtsbmllXCI7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihlcnJvciA9PSBcIk5VTV9FUlJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VSb29tRGV0YWlsc1Jlc3VsdCA9IFwiUG9rw7NqIG8gcG9kYW51bSBudW1lcnplIGp1xbwgaXN0bmllamUuIFByb3N6xJkgcG9kYcSHIGlubnkgbnVtZXIuXCJcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlUm9vbURldGFpbHNSZXN1bHQgPSBcIld5c3TEhXBpxYIgYsWCxIVkOiBcIitlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5yb29tUGFyYW0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUucGFpZENsYXNzID0gZnVuY3Rpb24gKHBhaWQpIHtcclxuICAgICAgICAgICAgaWYocGFpZClcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYnRuLXN1Y2Nlc3MnO1xyXG4gICAgICAgICAgICByZXR1cm4gJ2J0bi13YXJuaW5nJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnBheSA9IGZ1bmN0aW9uIChib29raW5nKSB7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLnBheShib29raW5nLl9pZCwgIWJvb2tpbmcucGFpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBib29raW5nLnBhaWQgPSAhYm9va2luZy5wYWlkO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHJvb3RTY29wZS4kd2F0Y2goJ2Rpc2NvdW50JyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMDEuMjAxNy5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3VzZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UsIHVzZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gdXNlcnM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24oaXNWYWxpZCl7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0RldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLnNlbGVjdGVkVXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogJHNjb3BlLnNlbGVjdGVkVXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogJHNjb3BlLnNlbGVjdGVkVXNlci5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiAkc2NvcGUuc2VsZWN0ZWRVc2VyLnJvbGVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB1c2VyU2VydmljZS5jaGFuZ2VVc2VyRGV0YWlscyhuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjEyLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuLmNvbnRyb2xsZXIoJ3ZvdWNoZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgdm91Y2hlclNlcnZpY2UpIHtcclxuXHJcbiAgICAvL0lsZSwgY3p5IHdpZWxva3JvdG5lZ28gdXp5dGt1LCBkYXRhIHd5Z2HFm25pxJljaWFcclxuICAgICRzY29wZS5nZW5lcmF0ZVZvdWNoZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS52b3VjaGVycyA9IHtcclxuICAgICAgICAgICAgY29kZXM6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XHJcbiAgICAgICAgdmFyIGV4cGlyeURhdGUgPSAkc2NvcGUudm91Y2hlckV4cGlyeURhdGU7XHJcbiAgICAgICAgaWYoZXhwaXJ5RGF0ZSA8IG5ldyBEYXRlKCkpe1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlckVycm9yID0gJ0RhdGEgd3lnYcWbbmnEmWNpYSBuaWUgbW/FvGUgYnnEhyB6IHByemVzesWCb8WbY2knOy8vVE9ETyBwb3ByYXdpxIcga29tdW5pa2F0XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc0dlbmVyYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2VuZXJhdGVkVm91Y2hlcnMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHdoaWxlKCRzY29wZS52b3VjaGVycy5jb2Rlcy5sZW5ndGggPCAkc2NvcGUubnVtYmVyT2ZWb3VjaGVycyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdm91Y2hlciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b3VjaGVyICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpICE9IDMgKXZvdWNoZXIgKz0gJy0nO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5jb2Rlcy5wdXNoKHZvdWNoZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1RPRE8gZGFsc3phIHByYWNhIG5hZCB2b3VjaGVyYW1pLCBwb215xZtsZcSHIGphayB0byBwcnplY2hvd3l3YcSHIHcgYmF6aWUgY3p5IGpha28gdGVrc3QgbnAuIDIwJSBjenkgb2RkemllbG5pZSBudW1iZXI6IDIwLCBkaXNjb3VudFR5cGU6ICclXCJcclxuICAgICAgICAgICAgdmFyIGxhc3QgPSAkc2NvcGUuZGlzY291bnQuY2hhckF0KCRzY29wZS5kaXNjb3VudC5sZW5ndGgtMSk7XHJcbiAgICAgICAgICAgIGlmKGxhc3QgPT09ICclJylcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudFR5cGUgPSAnJSc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYobGFzdCA9PT0gJ8WCJyAmJiAkc2NvcGUuZGlzY291bnQuY2hhckF0KCRzY29wZS5kaXNjb3VudC5sZW5ndGgtMikgPT09ICd6JylcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudFR5cGUgPSAnemwnO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50ID0gY29udmVydFRvTnVtYmVyKCRzY29wZS5kaXNjb3VudCk7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5leHBpcnlEYXRlID0gZXhwaXJ5RGF0ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmdlbmVyYXRlZFZvdWNoZXJzID0gJHNjb3BlLnZvdWNoZXJzLmNvZGVzO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNHZW5lcmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNTYXZlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5zYXZlVm91Y2hlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdm91Y2hlclNlcnZpY2Uuc2F2ZVZvdWNoZXJzKCRzY29wZS52b3VjaGVycykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS52b3VjaGVyc1NhdmVkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy9UT0RPIG9kamVjaWUga3dvdHkgaSBzcHJhd2R6ZW5pZSB2YXpub3NjaSh3eXN3aWV0bGVuaWUgb2Rwb3dpZWRuaWVnbyBlcnJvcmEpLCBuYSBrb25pZWMgcHJ6eSByZXplcndhY2ppIHV3emdsZWRuaWMgdm91Y2hlclxyXG4gICAgJHNjb3BlLmNoZWNrVm91Y2hlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkc2NvcGUudm91Y2hlcil7XHJcbiAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLmNoZWNrVm91Y2hlcigkc2NvcGUudm91Y2hlci50b1N0cmluZygpKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyTm90Rm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlckZvdW5kID0gJ0tvZCBwb3ByYXdueSB6bmnFvGthICcrcmVzdWx0LmRpc2NvdW50K3Jlc3VsdC5kaXNjb3VudFR5cGU7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmRpc2NvdW50ID0ge2Ftb3VudDogcmVzdWx0LmRpc2NvdW50LCB0eXBlOiByZXN1bHQuZGlzY291bnRUeXBlLCBjb2RlOiAkc2NvcGUudm91Y2hlcn07XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyTm90Rm91bmQgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLmNvZGVDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAkcm9vdFNjb3BlLmRpc2NvdW50ID0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpc051bWVyaWMobikge1xyXG4gICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydFRvTnVtYmVyKG4pIHtcclxuICAgICAgICB2YXIgZGlzY291bnQgPSAnJztcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKGlzTnVtZXJpYyhuLmNoYXJBdChpKSkpe1xyXG4gICAgICAgICAgICAgICAgZGlzY291bnQgKz0gbi5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudCA9IE51bWJlcihkaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlzY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzY291bnQgPSBOdW1iZXIoZGlzY291bnQpO1xyXG4gICAgICAgIHJldHVybiBkaXNjb3VudDtcclxuICAgIH1cclxufSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA3LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3VuaXF1ZUNhdGVnb3JpZXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb29tcywgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNBcnJheShyb29tcykpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb29tcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHJvb21zW2ldW3Byb3BlcnR5TmFtZV1cclxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGtleXNbdmFsXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzW3ZhbF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyb29tc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb29tcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnQXV0aFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciBMT0NBTF9UT0tFTiA9ICd0b2tlbic7XHJcbiAgICAgICAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICAgICAgaWYodG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RvcmVVc2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfVE9LRU4sIHRva2VuKTtcclxuICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdG9rZW47XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBhdXRoVG9rZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2lnbmluID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYXV0aGVudGljYXRlJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ocmVzdWx0LmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdmFyIHNpZ25vdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lVc2VySW5mbygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzaWdudXAgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zaWdudXAnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtmaXJzdE5hbWU6IHJlc3VsdC5kYXRhLmZpcnN0TmFtZSwgbGFzdE5hbWU6IHJlc3VsdC5kYXRhLmxhc3ROYW1lLCBlbWFpbDogcmVzdWx0LmRhdGEuZW1haWwsIHBob25lOiByZXN1bHQuZGF0YS5waG9uZSwgcm9sZTogcmVzdWx0LmRhdGEucm9sZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gcG9wcmF3acSHIHJhemVtIHogYXBpIMW8ZWJ5IGRhd2HFgm8gc3VjY2Vzc1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJCb29raW5ncycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24gKG5ld0RldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hhbmdlVXNlckRldGFpbHMnLCBuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXROZXdUb2tlbicsIHtlbWFpbDogbmV3RGV0YWlscy5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdDIuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdDIuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7c3VjY2VzczogdHJ1ZSwgbXNnOiBcIlBvbXnFm2xuaWUgem1pZW5pb25vIGRhbmVcIn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtzdWNjZXNzOiBmYWxzZSwgbXNnOiBcImNvxZsgcG9zesWCbyBuaWUgdGFrXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChvbGRQYXNzLCBuZXdQYXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NoYW5nZS1wYXNzd29yZCcsIHtvbGRQYXNzOiBvbGRQYXNzLCBuZXdQYXNzOiBuZXdQYXNzfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7bXNnOiAncG9tecWbbG5pZSB6bWllbmlvbm8gaGFzbG8nfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHttc2c6IHJlc3VsdC5kYXRhLmVycm9yfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyUm9sZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtyb2xlOiByZXN1bHQuZGF0YS5yb2xlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHNpZ25pbjogc2lnbmluLFxyXG4gICAgICAgICAgICBzaWdub3V0OiBzaWdub3V0LFxyXG4gICAgICAgICAgICBzaWdudXA6IHNpZ251cCxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBnZXRVc2VyQm9va2luZ3M6IGdldFVzZXJCb29raW5ncyxcclxuICAgICAgICAgICAgY2hhbmdlVXNlckRldGFpbHM6IGNoYW5nZVVzZXJEZXRhaWxzLFxyXG4gICAgICAgICAgICBjaGFuZ2VQYXNzd29yZDogY2hhbmdlUGFzc3dvcmQsXHJcbiAgICAgICAgICAgIGdldFVzZXJSb2xlOiBnZXRVc2VyUm9sZSxcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWRcclxuICAgICAgICB9XHJcbiAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdvZmZlclN2YycsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuICAgICAgICB2YXIgY2hvc2VuUm9vbSA9IHt9O1xyXG4gICAgICAgIHZhciBleHRyYXMgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIGNob29zZVJvb20gPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICBjaG9vc2VuUm9vbSA9IHJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaG9vc2VuUm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldEV4dHJhcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLmV4dHJhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBjaG9vc2VSb29tOiBjaG9vc2VSb29tLFxyXG4gICAgICAgICAgICBnZXRSb29tOiBnZXRSb29tLFxyXG4gICAgICAgICAgICBnZXRFeHRyYXM6IGdldEV4dHJhcyxcclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA2LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdyb29tU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdGVkUm9vbSA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tcyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2ZpbmRSb29tcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJvb21zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJvb2tSb29tID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcmVzZXJ2ZScsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jYW5jZWxCb29raW5nJyx7cm9vbV9pZDogcm9vbV9pZCwgYm9va2luZ19pZDogYm9va2luZ19pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFJvb21zJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tQm9va2luZ3MgPSBmdW5jdGlvbiAocm9vbV9pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXRSb29tQm9va2luZ3MnLCB7cm9vbV9pZDogcm9vbV9pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhWzBdKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXRVc2VySW5mbycsIHtlbWFpbDogdXNlcn0pLnRoZW4oZnVuY3Rpb24gKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXVzZXJJbmZvLmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodXNlckluZm8uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QodXNlckluZm8uZGF0YSlcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHVzZXJJbmZvLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2lnbnVwQW5kQm9vayA9IGZ1bmN0aW9uICh1c2VyLCBpZCwgZGF0ZXMsIHByaWNlLCBleHRyYXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2lnbnVwQW5kQm9vaycsIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlcjogdXNlci5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogZGF0ZXMuZGF0ZUZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGRhdGVzLmRhdGVUbyxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFzOiBleHRyYXNcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdPSycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWRtaW5Cb29rID0gZnVuY3Rpb24gKGlkLCBlbWFpbCwgZGF0ZXMsIHByaWNlLCBleHRyYXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYWRtaW5Cb29rJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogZGF0ZXMuZGF0ZUZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGRhdGVzLmRhdGVUbyxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFzOiBleHRyYXNcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ09LJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXeXN0xIVwacWCIGLFgsSFZCBwb2RjemFzIHJlemVyd2FjamknKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJzRW1haWxzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJzRW1haWxzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyA9IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdOaWUgem5hbGV6aW9ubyB1xbx5dGtvd25pa8OzdycpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnTmllIHpuYWxlemlvbm8gdcW8eXRrb3duaWvDs3cnKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGF5ID0gZnVuY3Rpb24gKHJlc2VydmF0aW9uX2lkLCBwYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcGFpZCcsIHtpZDogcmVzZXJ2YXRpb25faWQsIHBheTogcGF5fSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VSb29tRGV0YWlscyA9IGZ1bmN0aW9uIChkZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NoYW5nZVJvb21EZXRhaWxzJywge2lkOiBkZXRhaWxzLl9pZCwgbnVtYmVyOiBkZXRhaWxzLm51bWJlciwgYmVkczogZGV0YWlscy5iZWRzLCBwcmljZTogZGV0YWlscy5wcmljZSwgdHlwZTogZGV0YWlscy50eXBlLCBkZXNjcmlwdGlvbjogZGV0YWlscy5kZXNjcmlwdGlvbn0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLmVycm9yKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuZXJyb3IuY29kZSA9PSAxMTAwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJOVU1fRVJSXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFwiT0tcIilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hhbmdlRXh0cmFEZXRhaWxzID0gZnVuY3Rpb24gKGRldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hhbmdlRXh0cmFEZXRhaWxzJywge2lkOiBkZXRhaWxzLl9pZCwgbmFtZTogZGV0YWlscy5uYW1lLCBwcmljZTogZGV0YWlscy5wcmljZSwgdW5pdDogZGV0YWlscy51bml0fSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShcIkRhbmUgemFwaXNhbm8gcG9wcmF3bmllXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNyZWF0ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NyZWF0ZUV4dHJhJywgZXh0cmEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLmVycm9yKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgZGVsZXRlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmFJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9kZWxldGVFeHRyYScsIGV4dHJhSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLmVycm9yKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldFJvb21zOiBnZXRSb29tcyxcclxuICAgICAgICAgICAgZ2V0QWxsUm9vbXM6IGdldEFsbFJvb21zLFxyXG4gICAgICAgICAgICBib29rUm9vbTogYm9va1Jvb20sXHJcbiAgICAgICAgICAgIGNhbmNlbEJvb2tpbmc6IGNhbmNlbEJvb2tpbmcsXHJcbiAgICAgICAgICAgIGdldFJvb21Cb29raW5nczogZ2V0Um9vbUJvb2tpbmdzLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIHNpZ251cEFuZEJvb2s6IHNpZ251cEFuZEJvb2ssXHJcbiAgICAgICAgICAgIGFkbWluQm9vazogYWRtaW5Cb29rLFxyXG4gICAgICAgICAgICBnZXRVc2Vyc0VtYWlsczogZ2V0VXNlcnNFbWFpbHMsXHJcbiAgICAgICAgICAgIHBheTogcGF5LFxyXG4gICAgICAgICAgICBjaGFuZ2VSb29tRGV0YWlsczogY2hhbmdlUm9vbURldGFpbHMsXHJcbiAgICAgICAgICAgIGNoYW5nZUV4dHJhRGV0YWlsczogY2hhbmdlRXh0cmFEZXRhaWxzLFxyXG4gICAgICAgICAgICBjcmVhdGVFeHRyYTogY3JlYXRlRXh0cmEsXHJcbiAgICAgICAgICAgIGRlbGV0ZUV4dHJhOiBkZWxldGVFeHRyYVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgndXNlclNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxVc2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRBbGxVc2VycycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uIChuZXdEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2FkbWluQ2hhbmdlVXNlckRldGFpbHMnLCBuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7c3VjY2VzczogdHJ1ZSwgbXNnOiBcIlBvbXnFm2xuaWUgem1pZW5pb25vIGRhbmVcIn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtzdWNjZXNzOiBmYWxzZSwgbXNnOiBcImNvxZsgcG9zesWCbyBuaWUgdGFrXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2VycyxcclxuICAgICAgICAgICAgY2hhbmdlVXNlckRldGFpbHM6IGNoYW5nZVVzZXJEZXRhaWxzXHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDEyLjEyLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCd2b3VjaGVyU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgc2F2ZVZvdWNoZXJzID0gZnVuY3Rpb24gKHZvdWNoZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZvdWNoZXJzKTtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2F2ZVZvdWNoZXJzJywgdm91Y2hlcnMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hlY2tWb3VjaGVyID0gZnVuY3Rpb24gKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hlY2tWb3VjaGVyJywge3ZvdWNoZXJDb2RlOiB2b3VjaGVyfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcyAmJiAobmV3IERhdGUocmVzdWx0LmRhdGEudm91Y2hlci5leHBpcnlEYXRlKSA8IG5ldyBEYXRlKCkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdUZXJtaW4gbWluxIUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmIHJlc3VsdC5kYXRhLnZvdWNoZXIudXNlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnS29kIHpvc3RhxYIganXFvCB3eWtvxbx5c3RhbnknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmICFyZXN1bHQuZGF0YS52b3VjaGVyLnVzZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnZvdWNoZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHVzZVZvdWNoZXIgPSBmdW5jdGlvbiAodm91Y2hlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VWb3VjaGVyJywge2NvZGU6IHZvdWNoZXJ9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdLbHVjeiB3eWtvcnp5c3RhbnkuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNhdmVWb3VjaGVyczogc2F2ZVZvdWNoZXJzLFxyXG4gICAgICAgICAgICBjaGVja1ZvdWNoZXI6IGNoZWNrVm91Y2hlcixcclxuICAgICAgICAgICAgdXNlVm91Y2hlcjogdXNlVm91Y2hlclxyXG4gICAgICAgIH1cclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
