var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.token&&(o.headers.Authorization=e.localStorage.token),o}}}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("test",{url:"/test",templateUrl:"test"}),o.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,o,t){e.$state=o,e.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,o,t,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.changeUserDetails=function(e,n,a,r,s){if(e){var i={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(i).then(function(e){o.reload()})}},e.cancelBooking=function(e,t){console.log("room id to:"+e+", booking_id to:"+t),n.cancelBooking(e,t).then(function(e){console.log("udało się anulować"),o.reload()})};var a=function(){t.getUserBookings().then(function(o){console.log(o),e.userBookings=o})},r=function(){t.getUserInfo().then(function(o){console.log(o),e.firstName=o.firstName,e.lastName=o.lastName,e.email=o.email,e.phone=o.phone})};e.changePassword=function(o,n,a){o&&t.changePassword(n,a).then(function(o){console.log(o.msg),e.successfulPasswordChange=!0},function(o){e.wrongPassword=!0})},e.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,o,t,n,a,r,s,i){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.submitError=!1,o.errorMessage="",s.isLoggedIn=function(){return i.isAuthenticated},s.isLoggedIn()&&i.getUserRole().then(function(e){s.role=e.role}),o.signin=function(){console.log("login"),i.signin(o.user).then(function(e,o){s.isLogedIn=!0,i.getUserRole().then(function(e){s.role=e.role}),n.location.reload(),console.log(e)})},o.signout=function(){i.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},o.getUserInfo=function(){i.getUserInfo().then(function(e){console.log(e),o.userinfo=e})},o.submitForm=function(e){e?i.signup(o.user).then(function(e){console.log("Pomyślnie zarejestrowano"),o.submitError=!1,i.signin(o.user).then(function(e,o){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:o.submitError=!0,o.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},o.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService",function(e,o,t,n,a,r,s,i,c){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays;var u=function(){i.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:l(),extras:r.extras}).then(function(){n.go("successfulBooking")},function(e){})},r.toPrevious=function(){n.go("offer")};var l=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(o){e+=o.price*r.numOfDays}),e};u()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,n){n.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}),angular.module("app").controller("offerCtrl",["$scope","$cookies","$state","$location","$window","offerSvc",function(e,o,t,n,a,r){e.offer={},e.extras=[],e.selectedExtras=[];var s={};e.dateFrom="",e.dateTo="",e.roomName="";var i=function(){e.offer=JSON.parse(o.get("room")),e.extras=u(),s=JSON.parse(o.get("dates")),e.dateFrom=c(new Date(s.dateFrom)),e.dateTo=c(new Date(s.dateTo)),e.roomName=e.offer.type,e.roomPrice=e.offer.price*l(),e.extrasTotalPrice=0},c=function(e){var o=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+o+"-"+t+"-"+n};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*l()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*l())},e.toConfirmation=function(){console.log("asdasd");var n={extras:e.selectedExtras,numOfDays:l()};o.put("extras",JSON.stringify(n)),t.go("confirmation")},e.toPrevious=function(){t.go("home")};var u=function(){r.getExtras().then(function(o){e.extras=o;for(var t=0;t<e.extras.length;t++)e.extras[t].buttonText="Dodaj +",e.extras[t].buttonToggle=!1})},l=function(){var e=864e5,o=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/e)};i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$window","$location","roomService","offerSvc","$filter","$state",function(e,o,t,n,a,r,s,i,c){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.totalPrice=0,t.extras=[],t.selectedExtras=[],t.extrasTotalPrice=0,t.select=function(e){t.selectedRoom=e};var u=function(){var e=new Date;console.log(e),t.dateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.dateTo=o};t.init=function(){u(),t.findRooms()},t.findRooms=function(){r.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(e){t.rooms=e},function(e){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(e){o.put("room",JSON.stringify(e)),o.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),s.chooseRoom(e),c.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()},t.getAllRooms=function(){r.getAllRooms().then(function(e){t.allRooms=e,console.log(e)},function(e){})},t.getAvailability=function(e){for(var o=(new Date,new Date(t.roomDateFrom)),n=new Date(t.roomDateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),s=new Date(e[a].to);if(o<s&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){var e=new Date;t.roomDateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.roomDateTo=o,t.getAllRooms()},t.toBookings=function(e){o.put("selectedRoom",JSON.stringify(e)),$("#regulamin").modal("hide"),setTimeout(function(){c.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(o.get("selectedRoom"))},t.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},t.cancelBooking=function(e,o){console.log("room id to:"+e+", booking_id to:"+o),r.cancelBooking(e,o).then(function(e){console.log("udało się anulować"),c.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),r.getRoomBookings(t.selectedRoom._id).then(function(e){t.bookings=e.reservations})},t.selectUser=function(e){r.getUserInfo(e).then(function(e){t.selectedUser=e})},t.toBooking=function(e,t,n){o.put("booking",JSON.stringify({room:e,dateFrom:t,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){c.go("test")},500)},t.initBooking=function(){t.booking=JSON.parse(o.get("booking")),t.test.dateFrom=new Date(t.booking.dateFrom),t.test.dateTo=new Date(t.booking.dateTo),t.calculateTotalPrice(),g()},t.submitBookForm=function(){var e=null;if(void 0==t.test.email)var e={email:""+t.test.firstName+t.test.lastName+t.test.phone,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};else var e={email:t.test.email,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};r.signupAndBook(e,t.booking.room._id,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})};var l=function(){var e=864e5,o=new Date(t.test.dateFrom),n=new Date(t.test.dateTo),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};t.calculateTotalPrice=function(){t.totalPrice=l()*t.booking.room.price+t.extrasTotalPrice};var g=function(){s.getExtras().then(function(e){t.extras=e;for(var o=0;o<t.extras.length;o++)t.extras[o].buttonText="Dodaj +",t.extras[o].buttonToggle=!1})};t.addOrRemoveExtra=function(e){var o=t.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t.totalPrice=0,o==-1?(t.selectedExtras.push(e),t.extrasTotalPrice+=e.price*l()):(t.selectedExtras.splice(o,1),t.extrasTotalPrice-=e.price*l()),t.calculateTotalPrice()}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,o){if(angular.isArray(e)){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a][o];angular.isUndefined(n[r])&&(n[r]=!0,t.push(e[a]))}return t}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,o,t){function n(){var e=window.localStorage.getItem(c);console.log("loading User info..."),e&&s(e)}function a(){i=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(e){window.localStorage.setItem(c,e),s(e)}function s(o){u=!0,i=o,e.defaults.headers.common.Authorization=i}var i,c="token",u=!1,l=function(t){return o(function(o,n){e.post("/api/authenticate",t).then(function(e){e.data.success?(r(e.data.token),o(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},g=function(){a()},f=function(t){return o(function(o,n){e.post("/api/signup",t).then(function(e){e.data.success?(console.log("jestem w resolve"),o(e.data.msg)):n(e.data.msg)})})};n();var m=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):t(e.data.msg)})})},d=function(){return o(function(o,t){e.get("/api/getUserBookings").then(function(e){o(e.data)})})},p=function(t){return o(function(o,a){e.post("/api/test",t).then(function(s){s.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:t.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),o({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return o(function(o,a){e.post("/api/change-password",{oldPass:t,newPass:n}).then(function(e){e.data.success?o({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({role:e.data.role}):t(e.data.msg)})})};return{signin:l,signout:g,signup:f,getUserInfo:m,getUserBookings:d,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,o){var t=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,t){o.get("/api/getExtras").then(function(o){o.data.success?e(o.data.extras):t(o.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,o){var t=function(t){return e(function(e,n){o.post("/api/findRooms",t).then(function(o){o.data.success?(console.log("Pobrano pokoje"),e(o.data.rooms)):n(o.data.error)})})},n=function(t){return e(function(e,n){o.post("/api/reserve",t).then(function(o){o.data.success?e(o.data.success):n(o.data.error)})})},a=function(t,n){return e(function(e,a){console.log("jetem przed post cancel"),o.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(o){o.data.success?(console.log("resolve cancel"),e(o.data.success)):(console.log("reject cancel"),a(o.data.error))})})},r=function(){return e(function(e,t){o.get("/api/getRooms").then(function(o){o.data.success?e(o.data.result):t(o.data.error)})})},s=function(t){return e(function(e,n){o.post("/api/getRoomBookings",{room_id:t}).then(function(o){console.log(o.data[0].reservations),e(o.data[0])},function(e){n(e.data)})})},i=function(t){return e(function(e,n){o.post("/api/getUserInfo",{email:t}).then(function(o){o.data.error?n(o.data):e(o.data)},function(e){n(e.data)})})},c=function(t,n,a,r,s){return console.log(s),e(function(e,i){o.post("/api/signupAndBook",{firstName:t.firstName,lastName:t.lastName,email:t.email,number:t.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(e){console.log("udało się")},function(e){console.log("nie udało się")})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s,getUserInfo:i,signupAndBook:c}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJmaWxsdGVycy9yb29tRmlsdGVyLmpzIiwic2VydmljZXMvYXV0aG9yaXphdGlvbi5zdmMuanMiLCJzZXJ2aWNlcy9vZmZlci5zdmMuanMiLCJzZXJ2aWNlcy9yb29tLnN2Yy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJyZXF1ZXN0IiwiY29uZmlnIiwiaGVhZGVycyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCIkc2NvcGUiLCJBdXRoU2VydmljZSIsInJvb21TZXJ2aWNlIiwicmVnZXgiLCJjaGFuZ2VVc2VyRGV0YWlscyIsImlzVmFsaWQiLCJmTmFtZSIsImxOYW1lIiwibkVtYWlsIiwiblBob25lIiwibmV3RGV0YWlscyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZU51bWJlciIsInRoZW4iLCJhIiwicmVsb2FkIiwiY2FuY2VsQm9va2luZyIsInJvb21faWQiLCJib29raW5nX2lkIiwiY29uc29sZSIsImxvZyIsImdldFVzZXJCb29raW5ncyIsIm1zZyIsInVzZXJCb29raW5ncyIsImdldEluZm8iLCJnZXRVc2VySW5mbyIsInVzZXIiLCJwaG9uZSIsImNoYW5nZVBhc3N3b3JkIiwidmFsaWQiLCJvbGRQIiwibmV3UCIsInJlcyIsInN1Y2Nlc3NmdWxQYXNzd29yZENoYW5nZSIsInJlaiIsIndyb25nUGFzc3dvcmQiLCJjaGVja0RhdGUiLCJkYXRlIiwiY3VycmVudERhdGUiLCJEYXRlIiwiZGF0ZUZyb20iLCIkcSIsIiRsb2NhdGlvbiIsIiRyb3V0ZSIsInN1Ym1pdEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiaXNMb2dnZWRJbiIsImlzQXV0aGVudGljYXRlZCIsImdldFVzZXJSb2xlIiwicmVzdWx0Iiwicm9sZSIsInNpZ25pbiIsInN1Y2Nlc3MiLCJpc0xvZ2VkSW4iLCJsb2NhdGlvbiIsInNpZ25vdXQiLCJnbyIsInVzZXJpbmZvIiwic3VibWl0Rm9ybSIsInNpZ251cCIsImRhdGEiLCJ0b1N0cmluZyIsImNvZGUiLCIkd2F0Y2giLCIkY29va2llcyIsImlzU2lnbmVkSW4iLCJyb29tIiwiSlNPTiIsInBhcnNlIiwiZ2V0IiwiZGF0ZVRvIiwiZXh0cmFzIiwibnVtT2ZEYXlzIiwiaW5pdCIsInJlc2VydmUiLCJ0ZXJtcyIsImFsZXJ0IiwiYm9va1Jvb20iLCJpZCIsIl9pZCIsImZyb20iLCJ0byIsInByaWNlIiwiY2FsY3VsYXRlVG90YWxQcmljZSIsImVycm9yIiwidG9QcmV2aW91cyIsInRvdGFsIiwiZm9yRWFjaCIsImUiLCJkaXJlY3RpdmUiLCJyZXF1aXJlIiwic2NvcGUiLCJvdGhlck1vZGVsVmFsdWUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJuZ01vZGVsIiwiJHZhbGlkYXRvcnMiLCJjb21wYXJlVG8iLCJtb2RlbFZhbHVlIiwiJHZhbGlkYXRlIiwidGVtcGxhdGUiLCJvZmZlclN2YyIsIm9mZmVyIiwic2VsZWN0ZWRFeHRyYXMiLCJkYXRlcyIsInJvb21OYW1lIiwic2hvd09mZmVyIiwiZ2V0RXh0cmFzIiwiZGF0ZVByZWV0aWZ5IiwidHlwZSIsInJvb21QcmljZSIsImNhbGN1bGF0ZURpZmZPZkRheXMiLCJleHRyYXNUb3RhbFByaWNlIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJhZGRPclJlbW92ZUV4dHJhIiwiZXh0cmEiLCJpbmRleCIsImluZGV4T2YiLCJidXR0b25UZXh0IiwiYnV0dG9uVG9nZ2xlIiwicHVzaCIsInNwbGljZSIsInRvQ29uZmlybWF0aW9uIiwicHV0Iiwic3RyaW5naWZ5IiwiZXh0cmFzRGF0YSIsImkiLCJsZW5ndGgiLCJNU19QRVJfREFZIiwiZGF0ZUZyb21VVEMiLCJVVEMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImRhdGVUb1VUQyIsIk1hdGgiLCJmbG9vciIsIiRmaWx0ZXIiLCJub1Jvb21zRXJyb3IiLCJlcnJvck1zZyIsInJvb21zIiwibnVtYmVyT2ZCZWRzIiwic3VjY2Vzc2Z1bENhbmNlbCIsInRvdGFsUHJpY2UiLCJzZWxlY3QiLCJzZWxlY3RlZFJvb20iLCJzZXREYXRlIiwiZGF0ZVRlbXAiLCJmaW5kUm9vbXMiLCJnZXRSb29tcyIsInRvSVNPU3RyaW5nIiwiYmVkcyIsInJvb21zRGF0YSIsImFkZFJvb20iLCJjaG9vc2VSb29tIiwidGVzdCIsImdldEFsbFJvb21zIiwiYWxsUm9vbXMiLCJnZXRBdmFpbGFiaWxpdHkiLCJyZXNlcnZhdGlvbnMiLCJyb29tRGF0ZUZyb20iLCJyb29tRGF0ZVRvIiwibWFuYWdtZW50SW5pdCIsInRvQm9va2luZ3MiLCIkIiwibW9kYWwiLCJzZXRUaW1lb3V0IiwiZ2V0U2VsZWN0ZWRSb29tIiwiZ2V0Um9vbUJvb2tpbmdzIiwiYiIsImJvb2tpbmdzIiwic2VsZWN0VXNlciIsInUiLCJzZWxlY3RlZFVzZXIiLCJ0b0Jvb2tpbmciLCJpbml0Qm9va2luZyIsImJvb2tpbmciLCJzdWJtaXRCb29rRm9ybSIsInVuZGVmaW5lZCIsInNpZ251cEFuZEJvb2siLCJmaWx0ZXIiLCJwcm9wZXJ0eU5hbWUiLCJpc0FycmF5Iiwia2V5cyIsInZhbCIsImlzVW5kZWZpbmVkIiwic2VydmljZSIsIiRodHRwIiwibG9hZFVzZXJJbmZvIiwid2luZG93IiwiZ2V0SXRlbSIsIkxPQ0FMX1RPS0VOIiwidXNlckluZm8iLCJkZXN0cm95VXNlckluZm8iLCJhdXRoVG9rZW4iLCJkZWZhdWx0cyIsImNvbW1vbiIsInJlbW92ZUl0ZW0iLCJzdG9yZVVzZXJJbmZvIiwic2V0SXRlbSIsInJlc29sdmUiLCJyZWplY3QiLCJwb3N0IiwicmVzdWx0MiIsIm9sZFBhc3MiLCJuZXdQYXNzIiwiY2hvb3NlblJvb20iLCJnZXRSb29tIiwibnVtYmVyIl0sIm1hcHBpbmdzIjoiQUFHQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQUEsVUFBQSxZQUFBLGFDQUFELFNBQUFDLE9BQUEsT0FDQUMsUUFBQSxtQkFBQSxVQUFBLFNBQUFDLEdBQ0EsT0FDQUMsUUFBQSxTQUFBQyxHQU1BLE1BTEFBLEdBQUFDLFFBQUFELEVBQUFDLFlBQ0FILEVBQUFJLGFBQUFDLFFBQ0FILEVBQUFDLFFBQUEsY0FBQUgsRUFBQUksYUFBQUMsT0FHQUgsT0FLQUEsUUFBQSxpQkFBQSxxQkFBQSxTQUFBSSxFQUFBQyxHQUNBRCxFQUNBRSxNQUFBLFFBQ0FDLElBQUEsUUFDQUMsV0FBQSxXQUNBQyxZQUFBLFNBRUFILE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxXQUFBLFlBQ0FDLFlBQUEsVUFFQUgsTUFBQSxnQkFDQUMsSUFBQSxnQkFDQUUsWUFBQSxpQkFFQUgsTUFBQSxxQkFDQUMsSUFBQSxxQkFDQUUsWUFBQSxzQkFFQUgsTUFBQSxvQkFDQUMsSUFBQSxvQkFDQUUsWUFBQSxxQkFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FFLFlBQUEsWUFFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FFLFlBQUEsV0FFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FFLFlBQUEsV0FFQUgsTUFBQSxvQkFDQUMsSUFBQSxZQUNBRSxZQUFBLGFBRUFILE1BQUEsbUJBQ0FDLElBQUEsV0FDQUUsWUFBQSxZQUVBSCxNQUFB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cUssRUFBQUMsR0FDQWQsRUFBQWUsS0FBQSxvQkFBQXJNLE1BQUFlLElBQUFiLEtBQUEsU0FBQXlMLEdBQ0FBLEVBQUExSSxLQUFBd0IsTUFHQTJILEVBQUFULEVBQUExSSxNQUZBa0osRUFBQVIsRUFBQTFJLE9BR0EsU0FBQTBJLEdBQ0FTLEVBQUFULEVBQUExSSxXQUtBNkgsRUFBQSxTQUFBL0osRUFBQW9ELEVBQUEyQixFQUFBdkIsRUFBQVgsR0FFQSxNQURBcEQsU0FBQUMsSUFBQW1ELEdBQ0E5QixFQUFBLFNBQUFxSyxFQUFBQyxHQUNBZCxFQUFBZSxLQUFBLHNCQUNBdk0sVUFBQWlCLEVBQUFqQixVQUNBQyxTQUFBZ0IsRUFBQWhCLFNBQ0FDLE1BQUFlLEVBQUFmLE1BQ0EyTSxPQUFBNUwsRUFBQUMsTUFDQW1ELEdBQUFBLEVBQ0FFLEtBQUF5QixFQUFBakUsU0FDQXlDLEdBQUF3QixFQUFBbkMsT0FDQVksTUFBQUEsRUFDQVgsT0FBQUEsSUFDQTFELEtBQUEsU0FBQW9DLEdBQ0E5QixRQUFBQyxJQUFBLGNBQ0EsU0FBQTZCLEdBQ0E5QixRQUFBQyxJQUFBLHFCQU1BLFFBQ0F1SSxTQUFBQSxFQUNBTyxZQUFBQSxFQUNBckYsU0FBQUEsRUFDQTdELGNBQUFBLEVBQ0E4SixnQkFBQUEsRUFDQXJKLFlBQUFBLEVBQ0FnSyxjQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMjIuMDkuMjAxNi5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJywgJ3VpLnJvdXRlcicsICduZ0Nvb2tpZXMnXSk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIGZ1bmN0aW9uICgkd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFpbicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncm9vbUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ29mZmVyJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvb2ZmZXInLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ29mZmVyQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbmZpcm1hdGlvbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsQm9va2luZycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsU2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hY2NvdW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYWNjb3VudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWduaW4nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWduaW4nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWduaW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuYm9va2luZ3MnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Jvb2tpbmdzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuZGV0YWlscycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkZXRhaWxzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuY2hhbmdlUGFzc3dvcmQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jaGFuZ2VQYXNzd29yZCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NoYW5nZVBhc3N3b3JkJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQtYm9va2luZ3MnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LWJvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21hbmFnbWVudC1ib29raW5ncydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCd0ZXN0Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdGVzdCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Rlc3QnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbWFpbicpXHJcbiAgICB9KVxyXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsXHJcbiAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRzdGF0ZVBhcmFtcyA9ICRzdGF0ZVBhcmFtcztcclxuXHJcbiAgICB9XSk7XHJcbiAgICAvKlxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcclxuICAgICAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgICAgICAud2hlbignLycsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21haW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbnVwJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3NpZ25pbicsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc2lnbmluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3VzZXJpbmZvJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdXNlcmluZm8nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3VjY2Vzc2Z1bFNpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9vZmZlcicse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvb2ZmZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvY29uZmlybWF0aW9uJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9jb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc3VjY2Vzc2Z1bEJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub3RoZXJ3aXNlKCcvJyk7XHJcbiAgICB9KTtcclxuKi9cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignYWNjQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuXHJcblxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uKGlzVmFsaWQsIGZOYW1lLCBsTmFtZSwgbkVtYWlsLCBuUGhvbmUpe1xyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdEZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogZk5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IGxOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBuRW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG5QaG9uZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVVzZXJEZXRhaWxzKG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHByenljaXNrIGFudWxvd2FuaWEgdHlsa28gZGxhIHBva29pLCBrdMOzcnljaCBkYXRhIG5hIHRvIHBvendhbGFcclxuICAgICAgICAkc2NvcGUuY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicm9vbSBpZCB0bzpcIityb29tX2lkK1wiLCBib29raW5nX2lkIHRvOlwiK2Jvb2tpbmdfaWQpO1xyXG5cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuY2FuY2VsQm9va2luZyhyb29tX2lkLCBib29raW5nX2lkKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndWRhxYJvIHNpxJkgYW51bG93YcSHJyk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckJvb2tpbmdzKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJCb29raW5ncyA9IG1zZztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGhvbmUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB1c3Rhd2ljIHBhc3N5IG5hIHplcm8gcG8gxbzEhWRhbml1IGhodHBcclxuICAgICAgICAkc2NvcGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAodmFsaWQsb2xkUCwgbmV3UCkge1xyXG4gICAgICAgICAgICBpZih2YWxpZCl7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VQYXNzd29yZChvbGRQLCBuZXdQKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMubXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Y2Nlc3NmdWxQYXNzd29yZENoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChyZWopIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUud3JvbmdQYXNzd29yZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNoZWNrRGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUZyb20gPiBjdXJyZW50RGF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgZ2V0SW5mbygpO1xyXG4gICAgICAgIGdldFVzZXJCb29raW5ncygpO1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdhdXRoQ3RybCcsIGZ1bmN0aW9uICgkcSwgJHNjb3BlLCAkc3RhdGUsICR3aW5kb3csICRsb2NhdGlvbiwgJHJvdXRlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSkge1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJyhcXFxcK1swLTldXFxcXGR7MX0pKihcXFxccykqKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KSc7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnJztcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGlmKCRyb290U2NvcGUuaXNMb2dnZWRJbigpKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIFxyXG4gICAgICAgICRzY29wZS5zaWduaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbicpO1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGUgPSByZXN1bHQucm9sZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvJztcclxuICAgICAgICAgICAgICAgIC8vJHN0YXRlLmdvKCdob21lJyk7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2lnbm91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbm91dCgpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIC8vc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgLy8kc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dvdXQnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJpbmZvID0gbXNnO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvL1RPRE8gc3RhdGUucmVsb2FkXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ251cCgkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb215xZtsbmllIHphcmVqZXN0cm93YW5vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbmluKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChtc2csIHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkd2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKCkgPT0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS8jL2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxTaWdudXAnKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy9zdWNjZXNzZnVsU2lnbnVwJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmNvZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExMDAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnV3licmFueSBlbWFpbCBqZXN0IGp1xbwgemFyZWplc3Ryb3dhbnkuIFByb3N6xJkgd3licmHEhyBpbm55Lic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3VibWl0RXJyb3InLCBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDExLjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdjb25maXJtYXRpb25DdHJsJywgZnVuY3Rpb24gKCRxLCAkd2luZG93LCAkbG9jYXRpb24sICRzdGF0ZSwgJGNvb2tpZXMsICRzY29wZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICRzY29wZS5yb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVGcm9tO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZVRvO1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLmV4dHJhcztcclxuICAgICAgICAkc2NvcGUubnVtT2ZEYXlzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5udW1PZkRheXM7XHJcblxyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQgPyAkc2NvcGUuaXNTaWduZWRJbiA9IHRydWUgOiAkc2NvcGUuaXNTaWduZWRJbiA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICRzY29wZS5yZXNlcnZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZigkc2NvcGUudGVybXMgIT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdQcnplZCBwb3R3aWVyZHplbmllbSByZXplcndhY2ppIG5hbGXFvHkgemFha2NlcHRvd2HEh3JlZ3VsYW1pbi4nKTtcclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLmJvb2tSb29tKHtpZDogJHNjb3BlLnJvb20uX2lkLCBmcm9tOiAkc2NvcGUuZGF0ZUZyb20sIHRvOiAkc2NvcGUuZGF0ZVRvLCBwcmljZTogY2FsY3VsYXRlVG90YWxQcmljZSgpLCBleHRyYXM6ICRzY29wZS5leHRyYXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N1Y2Nlc3NmdWxCb29raW5nJylcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHd5xZt3aWV0bGVuaWUgZXJycm9yYVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9vZmZlcidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdvZmZlcicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHRvdGFsID0gKCRzY29wZS5yb29tLnByaWNlICogJHNjb3BlLm51bU9mRGF5cyk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gZS5wcmljZSAqICRzY29wZS5udW1PZkRheXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyB6cm9iaWVuaWUgcmVqZXN0cmFjamkobW/FvGUgcHJ6ZW5pZXNpZW5pZSBuYSBzaWdudXAgdmlldz8gZG8gcm96d2HFvGVuaWEpIGkgb2JzxYJ1Z2EgYsWCxJlkw7N3KG1vxbxlIGpha2/FmyBwb8WCxIVjennEhyBvYnlkd2EgbG9nb3dhbmlhIGkgcmVqZXN0cmFjamUgdyBqZWRubz8pXHJcbiAgICAgICAgLy9UT0RPIE9ic2x1Z2EgYmxlZG93IHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjemVnb3MgZG8gd2lkb2t1IHJlemVyd2FqY2lcclxuICAgICAgICAvL1RPRE8gcG91c8Ozd2HEhyBqYWtpZcWbIGluaXR5KHd5c3RhY3p5IHd5b8WCYcSHIGZ1bmtjasSZIHcga29udHJvbGVyemUgbHViIHNydilcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBjYcWCZWogb2JzxYJ1Z2kga29udGEoem1pYW5hIGhhc8WCYSwgbnVtZXJ1IHRlbGVmb251W2RvZGFuaWUgbHViIHptaWFuYV0sIHBvZGdsxIVkdSByZXplcndhY2ppLCBpdHApIG9yYXogb2JzxYJ1Z2kgaG90ZWx1KENSVUQgZG9kYXRrw7N3LCBwb2tvamkgaXRwKS5cclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBtb8W8ZSBqYWtpxZsgd3lrcmVzw7N3IG5hIHRlbWF0IG9iY2nEhcW8ZW5pYSBwb2tvamkgbHViIGpha2nFmyBwcnp5Y2hvZMOzdyBjenkgY2/FmyBhbGJvIGphaWXFmyBjb8WbIGRvIGdlbmVyb3dhbmllIHBkZiB6IHJhcG9ydGVtXHJcbiAgICAgICAgLy9UT0RPIHBvem1pZW5pYcSHIHPFgm93YSByZXNlcnZhdGlvbiBpdHAgbmEgYm9va2luZ1xyXG4gICAgICAgIC8vVE9ETyBrb2R5IHJhYmF0b3dlXHJcbiAgICAgICAgLy9UT0RPIHBvd2lhZG9taWVuaWUgbyBjaWFzdGVjemthY2hcclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBwb2RnbMSFZHUgb2LFgm/FvGVuaWEgaG90ZWx1IGphayB3IGtpbmkoMyBzdGFueTogd29sbnksIHphcmV6ZXJ3b3dhbnksIHphamV0eSlcclxuICAgICAgICAvL1RPRE8gemJhZGFuaWUgY3p5IC5ydW4gc3RhdGVQcm92aWRlcmEgcG9jemVibmVcclxuICAgICAgICAvL1RPRE8gcG96bmFuaWUgc3RhdGVQcm92aWRlcmEgaSBkb2RhbmllIG5lc3RlZCB2aWV3c1xyXG4gICAgICAgIC8vVE9ETyBuYSBnxYLDs3duZWogc3Ryb25pZSB6cm9iacSHxbxlYnkgZGF0YSBiecWCxIUgY29uYWptbmllaiBqZWRlbiBkemllbiByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIHptaWFuYSByZWdleCBuYSByb290U2NvcGUgamVzbGkgbW96bGl3ZVxyXG4gICAgICAgIC8vVE9EbyBkYXRhIHJlemVyd2FjamkgdHlsa28gb2QgZGF0eSBkemlzaWVqc3plaiAoYmV6IHJlemVyd2FjamkgdyBwcnplc3rFgm/Fm2NpKVxyXG4gICAgICAgIC8vVE9ETyBrb250b1xyXG4gICAgICAgIC8vem1pYW5hIGRhbnljaFxyXG4gICAgICAgIC8vem1pYW5hIGhhc8WCYVxyXG4gICAgICAgIC8vem9iYWN6ZW5pZSByZXplcndhY2ppXHJcbiAgICAgICAgLy9hbnVsb3dhbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL1xyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ2NvbXBhcmVUbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiBcIm5nTW9kZWxcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG90aGVyTW9kZWxWYWx1ZTogXCI9Y29tcGFyZVRvXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMsIG5nTW9kZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmNvbXBhcmVUbyA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZSA9PSBzY29wZS5vdGhlck1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcIm90aGVyTW9kZWxWYWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoJ3VzZXJJbmZvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8cD5zaWFsYWxhPC9wPidcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdvZmZlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkY29va2llcywgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3csIG9mZmVyU3ZjKSB7XHJcbiAgICAgICAgJHNjb3BlLm9mZmVyID0ge307XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgIHZhciBkYXRlcyA9IHt9O1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAnJztcclxuXHJcblxyXG4gICAgICAgIHZhciBzaG93T2ZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vZmZlciA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZ2V0RXh0cmFzKCk7XHJcblxyXG4gICAgICAgICAgICBkYXRlcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZVRvKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucm9vbU5hbWUgPSAkc2NvcGUub2ZmZXIudHlwZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21QcmljZSA9ICRzY29wZS5vZmZlci5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZGF0ZVByZWV0aWZ5ID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuICcnK2RheSsnLScrbW9udGgrJy0nK3llYXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE9yUmVtb3ZlRXh0cmEgPSBmdW5jdGlvbiAoZXh0cmEpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5zZWxlY3RlZEV4dHJhcy5pbmRleE9mKGV4dHJhKTtcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVGV4dCA9IGV4dHJhLmJ1dHRvblRvZ2dsZSA/ICdEb2RhaiArJyA6ICdVc3XFhCAtJztcclxuICAgICAgICAgICAgZXh0cmEuYnV0dG9uVG9nZ2xlID0gIWV4dHJhLmJ1dHRvblRvZ2dsZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FzZGFzZCcpO1xyXG4gICAgICAgICAgICB2YXIgZXh0cmFzID0ge2V4dHJhczogJHNjb3BlLnNlbGVjdGVkRXh0cmFzLCBudW1PZkRheXM6IGNhbGN1bGF0ZURpZmZPZkRheXMoKX07XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnZXh0cmFzJywgSlNPTi5zdHJpbmdpZnkoZXh0cmFzKSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbmZpcm1hdGlvbicpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvbWFpbidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5nZXRFeHRyYXMoKS50aGVuKGZ1bmN0aW9uIChleHRyYXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzID0gZXh0cmFzRGF0YTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAgOyBpIDwgJHNjb3BlLmV4dHJhcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25UZXh0ID0gJ0RvZGFqICsnO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVG9nZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVEaWZmT2ZEYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgTVNfUEVSX0RBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGVzLmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKGRhdGVzLmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVVUQyA9IERhdGUuVVRDKGRhdGVGcm9tLmdldEZ1bGxZZWFyKCksIGRhdGVGcm9tLmdldE1vbnRoKCksIGRhdGVGcm9tLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG9VVEMgPSBEYXRlLlVUQyhkYXRlVG8uZ2V0RnVsbFllYXIoKSwgZGF0ZVRvLmdldE1vbnRoKCksIGRhdGVUby5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZGF0ZVRvVVRDIC0gZGF0ZUZyb21VVEMpIC8gTVNfUEVSX0RBWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2hvd09mZmVyKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3Jvb21DdHJsJywgZnVuY3Rpb24gKCRxLCAkY29va2llcywgJHNjb3BlLCAkd2luZG93LCAkbG9jYXRpb24sIHJvb21TZXJ2aWNlLCBvZmZlclN2YywkZmlsdGVyLCAkc3RhdGUpIHtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lcnJvck1zZyA9Jyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21zID0gW107XHJcbiAgICAgICAgJHNjb3BlLm51bWJlck9mQmVkcyA9IDE7XHJcblxyXG4gICAgICAgICRzY29wZS5zdWNjZXNzZnVsQ2FuY2VsID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAwO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSByb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGUpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBkYXRlO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRlbXAgPSBuZXcgRGF0ZTtcclxuICAgICAgICAgICAgZGF0ZVRlbXAuc2V0RGF0ZShkYXRlVGVtcC5nZXREYXRlKCkrMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlVGVtcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZpbmRSb29tcyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gV3nFm3dpZXRsZW5pZSBlcnJvcmEgbyBicmFrdSBwb2tvamkgbyB3eWJyYW55Y2ggcGFyYW1ldHJhY2ggdcW8eXdhasSFYyBub1Jvb21zRXJyb3IgaSBuZy1IaWRlXHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21zKHtcclxuICAgICAgICAgICAgICAgIGZyb206ICRzY29wZS5kYXRlRnJvbS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdG86ICRzY29wZS5kYXRlVG8udG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGJlZHM6ICRzY29wZS5udW1iZXJPZkJlZHNcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocm9vbXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucm9vbXMgPSByb29tc0RhdGE7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSAnQ2/FmyBwb3N6xYJvIG5pZSB0YWsuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncm9vbScsIEpTT04uc3RyaW5naWZ5KHJvb20pKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdkYXRlcycsIEpTT04uc3RyaW5naWZ5KHtkYXRlRnJvbTogJHNjb3BlLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5kYXRlVG99KSk7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmNob29zZVJvb20ocm9vbSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvb2ZmZXInO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50ZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucm9vbXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRBbGxSb29tcygpLnRoZW4oZnVuY3Rpb24gKHJvb21zKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUm9vbXMgPSByb29tcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE8gb2JzxYJ1Z2EgZXJyb3JhXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5nZXRBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAocmVzZXJ2YXRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVUbyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZXNlcnZhdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS50byk7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vdEF2YWlsYWJsZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJ2F2YWlsYWJsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubWFuYWdtZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbURhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGU7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbURhdGVUbyA9IGRhdGVUZW1wO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmdzID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdzZWxlY3RlZFJvb20nLCBKU09OLnN0cmluZ2lmeShyb29tKSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ21hbmFnbWVudC1ib29raW5ncycpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnc2VsZWN0ZWRSb29tJykpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21Cb29raW5ncygkc2NvcGUuc2VsZWN0ZWRSb29tLl9pZCkudGhlbihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmdzID0gYi5yZXNlcnZhdGlvbnM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2VySW5mbyh1c2VyKS50aGVuKGZ1bmN0aW9uICh1KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyID0gdTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmcgPSBmdW5jdGlvbiAocm9vbSwgZGF0ZUZyb20sIGRhdGVUbykge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2Jvb2tpbmcnLCBKU09OLnN0cmluZ2lmeSh7cm9vbTogcm9vbSwgZGF0ZUZyb206IGRhdGVGcm9tLCBkYXRlVG86IGRhdGVUb30pKTtcclxuICAgICAgICAgICAgJCgnI3JlZ3VsYW1pbicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndGVzdCcpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pbml0Qm9va2luZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmcgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnYm9va2luZycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRlc3QuZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUuYm9va2luZy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgICRzY29wZS50ZXN0LmRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVUbyk7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgICAgIGdldEV4dHJhcygpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBkb2RhdGvDs3cgaSBvYmxpY3plbmllIGNlbnlcclxuICAgICAgICAkc2NvcGUuc3VibWl0Qm9va0Zvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLnRlc3QuZW1haWwgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBcIlwiKyRzY29wZS50ZXN0LmZpcnN0TmFtZSskc2NvcGUudGVzdC5sYXN0TmFtZSskc2NvcGUudGVzdC5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS50ZXN0LmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLnRlc3QubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICRzY29wZS50ZXN0LnBob25lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6ICRzY29wZS50ZXN0LmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLnRlc3QuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUudGVzdC5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnRlc3QucGhvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2Uuc2lnbnVwQW5kQm9vayh1c2VyLCAkc2NvcGUuYm9va2luZy5yb29tLl9pZCwge2RhdGVGcm9tOiAkc2NvcGUudGVzdC5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUudGVzdC5kYXRlVG99LCAkc2NvcGUudG90YWxQcmljZSwgJHNjb3BlLnNlbGVjdGVkRXh0cmFzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVEaWZmT2ZEYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgTVNfUEVSX0RBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS50ZXN0LmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS50ZXN0LmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVVUQyA9IERhdGUuVVRDKGRhdGVGcm9tLmdldEZ1bGxZZWFyKCksIGRhdGVGcm9tLmdldE1vbnRoKCksIGRhdGVGcm9tLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG9VVEMgPSBEYXRlLlVUQyhkYXRlVG8uZ2V0RnVsbFllYXIoKSwgZGF0ZVRvLmdldE1vbnRoKCksIGRhdGVUby5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZGF0ZVRvVVRDIC0gZGF0ZUZyb21VVEMpIC8gTVNfUEVSX0RBWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmdldEV4dHJhcygpLnRoZW4oZnVuY3Rpb24gKGV4dHJhc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBleHRyYXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCAkc2NvcGUuZXh0cmFzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRleHQgPSAnRG9kYWogKyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25Ub2dnbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5wdXNoKGV4dHJhKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlICs9IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA3LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3VuaXF1ZUNhdGVnb3JpZXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb29tcywgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNBcnJheShyb29tcykpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb29tcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHJvb21zW2ldW3Byb3BlcnR5TmFtZV1cclxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGtleXNbdmFsXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzW3ZhbF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyb29tc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb29tcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnQXV0aFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciBMT0NBTF9UT0tFTiA9ICd0b2tlbic7XHJcbiAgICAgICAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgVXNlciBpbmZvLi4uJyk7Ly9EbyB1c3VuacSZY2lhXHJcbiAgICAgICAgICAgIGlmKHRva2VuKXtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvKHRva2VuKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0b3JlVXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1RPS0VOLCB0b2tlbik7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvKHRva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVzZXJJbmZvKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGF1dGhUb2tlbiA9IHRva2VuO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYXV0aFRva2VuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNpZ25pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2F1dGhlbnRpY2F0ZScsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdC5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2csIHJlc3VsdC5kYXRhLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2csIHJlc3VsdC5kYXRhLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHZhciBzaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZXN0cm95VXNlckluZm8oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2lnbnVwID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2lnbnVwJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXN0ZW0gdyByZXNvbHZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcmluZm8nKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7Zmlyc3ROYW1lOiByZXN1bHQuZGF0YS5maXJzdE5hbWUsIGxhc3ROYW1lOiByZXN1bHQuZGF0YS5sYXN0TmFtZSwgZW1haWw6IHJlc3VsdC5kYXRhLmVtYWlsLCBwaG9uZTogcmVzdWx0LmRhdGEucGhvbmUsIHJvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIHBvcHJhd2nEhyByYXplbSB6IGFwaSDFvGVieSBkYXdhxYJvIHN1Y2Nlc3NcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRVc2VyQm9va2luZ3MnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBjaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uIChuZXdEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3Rlc3QnLCBuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlbGxvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0TmV3VG9rZW4nLCB7ZW1haWw6IG5ld0RldGFpbHMuZW1haWx9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQyLmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdDIgc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ocmVzdWx0Mi5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkVXNlckluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIG5vd2VnbyB0b2tlbmEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7c3VjY2VzczogdHJ1ZSwgbXNnOiBcIlBvbXnFm2xuaWUgem1pZW5pb25vIGRhbmVcIn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtzdWNjZXNzOiBmYWxzZSwgbXNnOiBcImNvxZsgcG9zesWCbyBuaWUgdGFrXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChvbGRQYXNzLCBuZXdQYXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NoYW5nZS1wYXNzd29yZCcsIHtvbGRQYXNzOiBvbGRQYXNzLCBuZXdQYXNzOiBuZXdQYXNzfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7bXNnOiAncG9tecWbbG5pZSB6bWllbmlvbm8gaGFzbG8nfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHttc2c6IHJlc3VsdC5kYXRhLmVycm9yfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyUm9sZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtyb2xlOiByZXN1bHQuZGF0YS5yb2xlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHNpZ25pbjogc2lnbmluLFxyXG4gICAgICAgICAgICBzaWdub3V0OiBzaWdub3V0LFxyXG4gICAgICAgICAgICBzaWdudXA6IHNpZ251cCxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBnZXRVc2VyQm9va2luZ3M6IGdldFVzZXJCb29raW5ncyxcclxuICAgICAgICAgICAgY2hhbmdlVXNlckRldGFpbHM6IGNoYW5nZVVzZXJEZXRhaWxzLFxyXG4gICAgICAgICAgICBjaGFuZ2VQYXNzd29yZDogY2hhbmdlUGFzc3dvcmQsXHJcbiAgICAgICAgICAgIGdldFVzZXJSb2xlOiBnZXRVc2VyUm9sZSxcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWRcclxuICAgICAgICB9XHJcbiAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdvZmZlclN2YycsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuICAgICAgICB2YXIgY2hvc2VuUm9vbSA9IHt9O1xyXG4gICAgICAgIHZhciBleHRyYXMgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIGNob29zZVJvb20gPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICBjaG9vc2VuUm9vbSA9IHJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaG9vc2VuUm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldEV4dHJhcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLmV4dHJhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBjaG9vc2VSb29tOiBjaG9vc2VSb29tLFxyXG4gICAgICAgICAgICBnZXRSb29tOiBnZXRSb29tLFxyXG4gICAgICAgICAgICBnZXRFeHRyYXM6IGdldEV4dHJhcyxcclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA2LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdyb29tU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdGVkUm9vbSA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tcyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2ZpbmRSb29tcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9icmFubyBwb2tvamUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5yb29tcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBib29rUm9vbSA9IGZ1bmN0aW9uIChkYXRhKSB7Ly9UT0RPIHpqYcSFxIcgc2nEmVxyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9yZXNlcnZlJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnamV0ZW0gcHJ6ZWQgcG9zdCBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2FuY2VsQm9va2luZycse3Jvb21faWQ6IHJvb21faWQsIGJvb2tpbmdfaWQ6IGJvb2tpbmdfaWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc29sdmUgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVqZWN0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0QWxsUm9vbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0Um9vbXMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb21Cb29raW5ncyA9IGZ1bmN0aW9uIChyb29tX2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldFJvb21Cb29raW5ncycsIHtyb29tX2lkOiByb29tX2lkfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhWzBdLnJlc2VydmF0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGFbMF0pXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldFVzZXJJbmZvJywge2VtYWlsOiB1c2VyfSkudGhlbihmdW5jdGlvbiAodXNlckluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdXNlckluZm8uZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1c2VySW5mby5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh1c2VySW5mby5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAodXNlckluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QodXNlckluZm8uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzaWdudXBBbmRCb29rID0gZnVuY3Rpb24gKHVzZXIsIGlkLCBkYXRlcywgcHJpY2UsIGV4dHJhcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleHRyYXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zaWdudXBBbmRCb29rJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiB1c2VyLnBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBkYXRlcy5kYXRlRnJvbSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogZGF0ZXMuZGF0ZVRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYXM6IGV4dHJhc1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmScpXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbmllIHVkYcWCbyBzacSZJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0Um9vbXM6IGdldFJvb21zLFxyXG4gICAgICAgICAgICBnZXRBbGxSb29tczogZ2V0QWxsUm9vbXMsXHJcbiAgICAgICAgICAgIGJvb2tSb29tOiBib29rUm9vbSxcclxuICAgICAgICAgICAgY2FuY2VsQm9va2luZzogY2FuY2VsQm9va2luZyxcclxuICAgICAgICAgICAgZ2V0Um9vbUJvb2tpbmdzOiBnZXRSb29tQm9va2luZ3MsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiBnZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgc2lnbnVwQW5kQm9vazogc2lnbnVwQW5kQm9va1xyXG4gICAgICAgIH1cclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
