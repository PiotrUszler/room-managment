var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.token&&(o.headers.Authorization=e.localStorage.token),o}}}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("test",{url:"/test",templateUrl:"test"}),o.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,o,t){e.$state=o,e.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,o,t,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,s){if(e){var i={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(i).then(function(e){o.reload()})}},e.cancelBooking=function(e,t){console.log("room id to:"+e+", booking_id to:"+t),n.cancelBooking(e,t).then(function(e){console.log("udało się anulować"),o.reload()})};var a=function(){t.getUserBookings().then(function(o){console.log(o),e.userBookings=o})},r=function(){t.getUserInfo().then(function(o){console.log(o),e.firstName=o.firstName,e.lastName=o.lastName,e.email=o.email,e.phone=o.phone})};e.changePassword=function(o,n,a){o&&t.changePassword(n,a).then(function(o){console.log(o.msg),e.successfulPasswordChange=!0},function(o){e.wrongPassword=!0})},e.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,o,t,n,a,r,s,i){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.submitError=!1,o.errorMessage="",s.isLoggedIn=function(){return i.isAuthenticated},s.isLoggedIn()&&i.getUserRole().then(function(e){s.role=e.role}),o.signin=function(){console.log("login"),i.signin(o.user).then(function(e,o){s.isLogedIn=!0,i.getUserRole().then(function(e){s.role=e.role}),n.location.reload(),console.log(e)})},o.signout=function(){i.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},o.getUserInfo=function(){i.getUserInfo().then(function(e){console.log(e),o.userinfo=e})},o.submitForm=function(e){e?i.signup(o.user).then(function(e){console.log("Pomyślnie zarejestrowano"),o.submitError=!1,i.signin(o.user).then(function(e,o){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:o.submitError=!0,o.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},o.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService",function(e,o,t,n,a,r,s,i,c){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays;var u=function(){i.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:l(),extras:r.extras}).then(function(){n.go("successfulBooking")},function(e){})},r.toPrevious=function(){n.go("offer")};var l=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(o){e+=o.price*r.numOfDays}),e};u()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,n){n.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,o,t,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$cookies","$state","$location","$window","offerSvc",function(e,o,t,n,a,r){e.offer={},e.extras=[],e.selectedExtras=[];var s={};e.dateFrom="",e.dateTo="",e.roomName="";var i=function(){e.offer=JSON.parse(o.get("room")),e.extras=u(),s=JSON.parse(o.get("dates")),e.dateFrom=c(new Date(s.dateFrom)),e.dateTo=c(new Date(s.dateTo)),e.roomName=e.offer.type,e.roomPrice=e.offer.price*l(),e.extrasTotalPrice=0},c=function(e){var o=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+o+"-"+t+"-"+n};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*l()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*l())},e.toConfirmation=function(){console.log("asdasd");var n={extras:e.selectedExtras,numOfDays:l()};o.put("extras",JSON.stringify(n)),t.go("confirmation")},e.toPrevious=function(){t.go("home")};var u=function(){r.getExtras().then(function(o){e.extras=o;for(var t=0;t<e.extras.length;t++)e.extras[t].buttonText="Dodaj +",e.extras[t].buttonToggle=!1})},l=function(){var e=864e5,o=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/e)};i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$rootScope","$window","$location","roomService","offerSvc","$filter","$state",function(e,o,t,n,a,r,s,i,c,u){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.totalPrice=0,t.extras=[],t.selectedExtras=[],t.extrasTotalPrice=0,t.selectOrAddUser=void 0,t.select=function(e){t.selectedRoom=e};var l=function(){var e=new Date;console.log(e),t.dateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.dateTo=o};t.init=function(){l(),t.findRooms()},t.findRooms=function(){if(t.dateTo.getMonth()<=t.dateFrom.getMonth()&&t.dateTo.getDate()<=t.dateFrom.getDate()){var e=t.dateFrom;e.setDate(e.getDate()+1),t.dateTo=e}s.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(e){e.length>0?(t.rooms=e,t.noRoomsError=!1):t.noRoomsError=!0},function(e){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(e){o.put("room",JSON.stringify(e)),o.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),i.chooseRoom(e),u.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()},t.getAllRooms=function(){s.getAllRooms().then(function(e){t.allRooms=e,console.log(e)},function(e){})},t.getAvailability=function(e){for(var o=(new Date,new Date(t.roomDateFrom)),n=new Date(t.roomDateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),s=new Date(e[a].to);if(o<s&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){var e=new Date;t.roomDateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.roomDateTo=o,t.getAllRooms()},t.toBookings=function(e){o.put("selectedRoom",JSON.stringify(e)),$("#regulamin").modal("hide"),setTimeout(function(){u.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(o.get("selectedRoom"))},t.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},t.cancelBooking=function(e,o){console.log("room id to:"+e+", booking_id to:"+o),s.cancelBooking(e,o).then(function(e){console.log("udało się anulować"),u.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),s.getRoomBookings(t.selectedRoom._id).then(function(e){t.bookings=e.reservations})},t.selectUser=function(e){s.getUserInfo(e).then(function(e){t.selectedUser=e,console.log(t.selectedUser)})},t.toBooking=function(e,t,n){o.put("booking",JSON.stringify({room:e,dateFrom:t,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){u.go("test")},500)},t.initBooking=function(){t.booking=JSON.parse(o.get("booking")),t.test.dateFrom=new Date(t.booking.dateFrom),t.test.dateTo=new Date(t.booking.dateTo),t.calculateTotalPrice(),g(),s.getUsers().then(function(e){t.users=JSON.parse(JSON.stringify(e))})},t.submitBookForm=function(){var e=null;if(t.selectOrAddUser){if(void 0==t.test.email)var e={email:""+t.test.firstName+t.test.lastName+t.test.phone,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};else var e={email:t.test.email,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};s.signupAndBook(e,t.booking.room._id,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})}else e=JSON.parse(t.selectedUserBooking),console.log("RoomCtrl, funkcja submitBookForm, dataOd: "+t.test.dateFrom),s.adminBook(t.booking.room._id,e.email,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})};var d=function(){var e=864e5,o=new Date(t.test.dateFrom),n=new Date(t.test.dateTo),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};t.calculateTotalPrice=function(){void 0!=n.discount&&"zl"==n.discount.type?t.totalPrice=d()*t.booking.room.price+t.extrasTotalPrice-n.discount.amount:void 0!=n.discount&&"%"==n.discount.type?(t.totalPrice=d()*t.booking.room.price+t.extrasTotalPrice,t.totalPrice=t.totalPrice-t.totalPrice*(n.discount.amount/100)):t.totalPrice=d()*t.booking.room.price+t.extrasTotalPrice};var g=function(){i.getExtras().then(function(e){t.extras=e;for(var o=0;o<t.extras.length;o++)t.extras[o].buttonText="Dodaj +",t.extras[o].buttonToggle=!1})};t.addOrRemoveExtra=function(e){var o=t.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t.totalPrice=0,o==-1?(t.selectedExtras.push(e),t.extrasTotalPrice+=e.price*d()):(t.selectedExtras.splice(o,1),t.extrasTotalPrice-=e.price*d()),t.calculateTotalPrice()},t.paidClass=function(e){return e?"btn-success":"btn-warning"},t.pay=function(e){s.pay(e._id,!e.paid).then(function(o){console.log(o),e.paid=!e.paid})},n.$watch("discount",function(){t.calculateTotalPrice()})}]),angular.module("app").controller("voucherCtrl",["$scope","$rootScope","voucherService",function(e,o,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){for(var o="",t=0;t<e.length;t++){if(!n(e.charAt(t)))return o=Number(o);o+=e.charAt(t)}return o=Number(o)}e.generateVouchers=function(){e.vouchers={codes:[]};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.voucherExpiryDate;if(t<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var n="",r=0;r<4;r++){for(var s=0;s<5;s++)n+=o.charAt(Math.floor(Math.random()*o.length));3!=r&&(n+="-")}e.vouchers.codes.push(n)}var i=e.discount.charAt(e.discount.length-1);"%"===i?e.vouchers.discountType="%":"ł"===i&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=a(e.discount),e.vouchers.expiryDate=t,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){console.log(e.vouchers),t.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){console.log(e.voucher),t.checkVoucher(e.voucher.toString()).then(function(t){console.log(t),e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+t.discount+t.discountType,o.discount={amount:t.discount,type:t.discountType},console.log(t.discount)},function(t){console.log(t),o.discount=void 0,e.voucherNotFound=t,e.voucherFound=void 0})},e.codeChanged=function(){e.bookingFrm.$valid||(e.voucherFound=void 0,e.voucherNotFound=void 0,o.discount=void 0)}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,o){if(angular.isArray(e)){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a][o];angular.isUndefined(n[r])&&(n[r]=!0,t.push(e[a]))}return t}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,o,t){function n(){var e=window.localStorage.getItem(c);console.log("loading User info..."),e&&s(e)}function a(){i=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(e){window.localStorage.setItem(c,e),s(e)}function s(o){u=!0,i=o,e.defaults.headers.common.Authorization=i}var i,c="token",u=!1,l=function(t){return o(function(o,n){e.post("/api/authenticate",t).then(function(e){e.data.success?(r(e.data.token),o(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},g=function(t){return o(function(o,n){e.post("/api/signup",t).then(function(e){e.data.success?(console.log("jestem w resolve"),o(e.data.msg)):n(e.data.msg)})})};n();var m=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):t(e.data.msg)})})},f=function(){return o(function(o,t){e.get("/api/getUserBookings").then(function(e){o(e.data)})})},p=function(t){return o(function(o,a){e.post("/api/test",t).then(function(s){s.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:t.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),o({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return o(function(o,a){e.post("/api/change-password",{oldPass:t,newPass:n}).then(function(e){e.data.success?o({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({role:e.data.role}):t(e.data.msg)})})};return{signin:l,signout:d,signup:g,getUserInfo:m,getUserBookings:f,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,o){var t=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,t){o.get("/api/getExtras").then(function(o){o.data.success?e(o.data.extras):t(o.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,o){var t=function(t){return e(function(e,n){o.post("/api/findRooms",t).then(function(o){o.data.success?(console.log("Pobrano pokoje"),e(o.data.rooms)):n(o.data.error)})})},n=function(t){return e(function(e,n){o.post("/api/reserve",t).then(function(o){o.data.success?e(o.data.success):n(o.data.error)})})},a=function(t,n){return e(function(e,a){console.log("jetem przed post cancel"),o.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(o){o.data.success?(console.log("resolve cancel"),e(o.data.success)):(console.log("reject cancel"),a(o.data.error))})})},r=function(){return e(function(e,t){o.get("/api/getRooms").then(function(o){o.data.success?e(o.data.result):t(o.data.error)})})},s=function(t){return e(function(e,n){o.post("/api/getRoomBookings",{room_id:t}).then(function(o){console.log(o.data[0].reservations),e(o.data[0])},function(e){n(e.data)})})},i=function(t){return e(function(e,n){o.post("/api/getUserInfo",{email:t}).then(function(o){o.data.error?n(o.data):e(o.data)},function(e){n(e.data)})})},c=function(t,n,a,r,s){return console.log(s),e(function(e,i){o.post("/api/signupAndBook",{firstName:t.firstName,lastName:t.lastName,email:t.email,number:t.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(e){console.log(e)},function(e){console.log("nie udało się")})})},u=function(t,n,a,r,s){return console.log("Serwis: roomSvc, funkcja: adminBook | id:"+t+", email: "+n),e(function(e,i){o.post("/api/adminBook",{id:t,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(o){o.data.success?e("OK"):i("Wystąpił błąd podczas rezerwacji")},function(e){i("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,t){o.get("/api/getUsers").then(function(o){(o.data.success=!1)?t("Nie znaleziono użytkowników"):e(o.data)},function(e){t("Nie znaleziono użytkowników")})})},d=function(t,n){return e(function(e,a){o.post("/api/paid",{id:t,pay:n}).then(function(o){o.data.success?e(!0):a(!1)})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s,getUserInfo:i,signupAndBook:c,adminBook:u,getUsers:l,pay:d}}]),angular.module("app").service("voucherService",["$q","$http",function(e,o){var t=function(t){return console.log(t),e(function(e,n){o.post("/api/saveVouchers",t).then(function(o){o.data.success?e(o.data.msg):n(o.data.msg)},function(e){n(e.data.msg)})})},n=function(t){return e(function(e,n){o.post("/api/checkVoucher",{voucherCode:t}).then(function(o){o.data.success&&new Date(o.data.voucher.expiryDate)<new Date?n("Termin miną"):o.data.success&&o.data.voucher.used?n("Kod został już wykożystany"):o.data.success&&!o.data.voucher.used?e(o.data.voucher):n(o.data.error)})})};return{saveVouchers:t,checkVoucher:n}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy92b3VjaGVyQ29udHJvbGxlci5qcyIsImZpbGx0ZXJzL3Jvb21GaWx0ZXIuanMiLCJzZXJ2aWNlcy9hdXRob3JpemF0aW9uLnN2Yy5qcyIsInNlcnZpY2VzL29mZmVyLnN2Yy5qcyIsInNlcnZpY2VzL3Jvb20uc3ZjLmpzIiwic2VydmljZXMvdm91Y2hlci5zdmMuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImhlYWRlcnMiLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJHNjb3BlIiwiQXV0aFNlcnZpY2UiLCJyb29tU2VydmljZSIsInJlZ2V4IiwiaXNBY3RpdmUiLCJ2aWV3TG9jYXRpb24iLCIkbG9jYXRpb24iLCJwYXRoIiwiY2hhbmdlVXNlckRldGFpbHMiLCJpc1ZhbGlkIiwiZk5hbWUiLCJsTmFtZSIsIm5FbWFpbCIsIm5QaG9uZSIsIm5ld0RldGFpbHMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJ0aGVuIiwiYSIsInJlbG9hZCIsImNhbmNlbEJvb2tpbmciLCJyb29tX2lkIiwiYm9va2luZ19pZCIsImNvbnNvbGUiLCJsb2ciLCJnZXRVc2VyQm9va2luZ3MiLCJtc2ciLCJ1c2VyQm9va2luZ3MiLCJnZXRJbmZvIiwiZ2V0VXNlckluZm8iLCJ1c2VyIiwicGhvbmUiLCJjaGFuZ2VQYXNzd29yZCIsInZhbGlkIiwib2xkUCIsIm5ld1AiLCJyZXMiLCJzdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UiLCJyZWoiLCJ3cm9uZ1Bhc3N3b3JkIiwiY2hlY2tEYXRlIiwiZGF0ZSIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRhdGVGcm9tIiwiJHEiLCIkcm91dGUiLCJzdWJtaXRFcnJvciIsImVycm9yTWVzc2FnZSIsImlzTG9nZ2VkSW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJnZXRVc2VyUm9sZSIsInJlc3VsdCIsInJvbGUiLCJzaWduaW4iLCJzdWNjZXNzIiwiaXNMb2dlZEluIiwibG9jYXRpb24iLCJzaWdub3V0IiwiZ28iLCJ1c2VyaW5mbyIsInN1Ym1pdEZvcm0iLCJzaWdudXAiLCJkYXRhIiwidG9TdHJpbmciLCJjb2RlIiwiJHdhdGNoIiwiJGNvb2tpZXMiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsImluaXQiLCJyZXNlcnZlIiwidGVybXMiLCJhbGVydCIsImJvb2tSb29tIiwiaWQiLCJfaWQiLCJmcm9tIiwidG8iLCJwcmljZSIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJlcnJvciIsInRvUHJldmlvdXMiLCJ0b3RhbCIsImZvckVhY2giLCJlIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibmdNb2RlbCIsIiR2YWxpZGF0b3JzIiwiY29tcGFyZVRvIiwibW9kZWxWYWx1ZSIsIiR2YWxpZGF0ZSIsInRlbXBsYXRlIiwidm91Y2hlclNlcnZpY2UiLCJhdHRyIiwibUN0cmwiLCJ2YWxpZGF0aW9uIiwidm91Y2hlciIsImxlbmd0aCIsImNoYXJBdCIsIiRzZXRWYWxpZGl0eSIsIiRwYXJzZXJzIiwicHVzaCIsIm9mZmVyU3ZjIiwib2ZmZXIiLCJzZWxlY3RlZEV4dHJhcyIsImRhdGVzIiwicm9vbU5hbWUiLCJzaG93T2ZmZXIiLCJnZXRFeHRyYXMiLCJkYXRlUHJlZXRpZnkiLCJ0eXBlIiwicm9vbVByaWNlIiwiY2FsY3VsYXRlRGlmZk9mRGF5cyIsImV4dHJhc1RvdGFsUHJpY2UiLCJkYXkiLCJnZXRVVENEYXRlIiwibW9udGgiLCJnZXRVVENNb250aCIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsImFkZE9yUmVtb3ZlRXh0cmEiLCJleHRyYSIsImluZGV4IiwiaW5kZXhPZiIsImJ1dHRvblRleHQiLCJidXR0b25Ub2dnbGUiLCJzcGxpY2UiLCJ0b0NvbmZpcm1hdGlvbiIsInB1dCIsInN0cmluZ2lmeSIsImV4dHJhc0RhdGEiLCJpIiwiTVNfUEVSX0RBWSIsImRhdGVGcm9tVVRDIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkYXRlVG9VVEMiLCJNYXRoIiwiZmxvb3IiLCIkZmlsdGVyIiwibm9Sb29tc0Vycm9yIiwiZXJyb3JNc2ciLCJyb29tcyIsIm51bWJlck9mQmVkcyIsInN1Y2Nlc3NmdWxDYW5jZWwiLCJ0b3RhbFByaWNlIiwic2VsZWN0T3JBZGRVc2VyIiwidW5kZWZpbmVkIiwic2VsZWN0Iiwic2VsZWN0ZWRSb29tIiwic2V0RGF0ZSIsImRhdGVUZW1wIiwiZmluZFJvb21zIiwiZ2V0Um9vbXMiLCJ0b0lTT1N0cmluZyIsImJlZHMiLCJyb29tc0RhdGEiLCJhZGRSb29tIiwiY2hvb3NlUm9vbSIsInRlc3QiLCJnZXRBbGxSb29tcyIsImFsbFJvb21zIiwiZ2V0QXZhaWxhYmlsaXR5IiwicmVzZXJ2YXRpb25zIiwicm9vbURhdGVGcm9tIiwicm9vbURhdGVUbyIsIm1hbmFnbWVudEluaXQiLCJ0b0Jvb2tpbmdzIiwiJCIsIm1vZGFsIiwic2V0VGltZW91dCIsImdldFNlbGVjdGVkUm9vbSIsImdldFJvb21Cb29raW5ncyIsImIiLCJib29raW5ncyIsInNlbGVjdFVzZXIiLCJ1Iiwic2VsZWN0ZWRVc2VyIiwidG9Cb29raW5nIiwiaW5pdEJvb2tpbmciLCJib29raW5nIiwiZ2V0VXNlcnMiLCJ1c2VycyIsInN1Ym1pdEJvb2tGb3JtIiwic2lnbnVwQW5kQm9vayIsInNlbGVjdGVkVXNlckJvb2tpbmciLCJhZG1pbkJvb2siLCJkaXNjb3VudCIsImFtb3VudCIsInBhaWRDbGFzcyIsInBhaWQiLCJwYXkiLCJpc051bWVyaWMiLCJuIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJjb252ZXJ0VG9OdW1iZXIiLCJOdW1iZXIiLCJnZW5lcmF0ZVZvdWNoZXJzIiwidm91Y2hlcnMiLCJjb2RlcyIsInBvc3NpYmxlIiwiZXhwaXJ5RGF0ZSIsInZvdWNoZXJFeHBpcnlEYXRlIiwidm91Y2hlckVycm9yIiwidm91Y2hlcnNHZW5lcmF0ZWQiLCJnZW5lcmF0ZWRWb3VjaGVycyIsIm51bWJlck9mVm91Y2hlcnMiLCJqIiwicmFuZG9tIiwibGFzdCIsImRpc2NvdW50VHlwZSIsInZvdWNoZXJzU2F2ZWQiLCJzYXZlVm91Y2hlcnMiLCJjaGVja1ZvdWNoZXIiLCJ2b3VjaGVyTm90Rm91bmQiLCJ2b3VjaGVyRm91bmQiLCJjb2RlQ2hhbmdlZCIsImJvb2tpbmdGcm0iLCIkdmFsaWQiLCJmaWx0ZXIiLCJwcm9wZXJ0eU5hbWUiLCJpc0FycmF5Iiwia2V5cyIsInZhbCIsImlzVW5kZWZpbmVkIiwic2VydmljZSIsIiRodHRwIiwibG9hZFVzZXJJbmZvIiwid2luZG93IiwiZ2V0SXRlbSIsIkxPQ0FMX1RPS0VOIiwidXNlckluZm8iLCJkZXN0cm95VXNlckluZm8iLCJhdXRoVG9rZW4iLCJkZWZhdWx0cyIsImNvbW1vbiIsInJlbW92ZUl0ZW0iLCJzdG9yZVVzZXJJbmZvIiwic2V0SXRlbSIsInJlc29sdmUiLCJyZWplY3QiLCJwb3N0IiwicmVzdWx0MiIsIm9sZFBhc3MiLCJuZXdQYXNzIiwiY2hvb3NlblJvb20iLCJnZXRSb29tIiwibnVtYmVyIiwicmVzZXJ2YXRpb25faWQiLCJ2b3VjaGVyQ29kZSIsInVzZWQiXSwibWFwcGluZ3MiOiJBQUdBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxVQUFBLFlBQUEsYUNBQUQsU0FBQUMsT0FBQSxPQUNBQyxRQUFBLG1CQUFBLFVBQUEsU0FBQUMsR0FDQSxPQUNBQyxRQUFBLFNBQUFDLEdBTUEsTUFMQUEsR0FBQUMsUUFBQUQsRUFBQUMsWUFDQUgsRUFBQUksYUFBQUMsUUFDQUgsRUFBQUMsUUFBQSxjQUFBSCxFQUFBSSxhQUFBQyxPQUdBSCxPQUtBQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUFJLEVBQUFDLEdBQ0FELEVBQ0FFLE1BQUEsUUFDQUMsSUFBQSxRQUNBQyxXQUFBLFdBQ0FDLFlBQUEsU0FFQUgsTUFBQSxTQUNBQyxJQUFBLFNBQ0FFLFlBQUEsVUFFQUgsTUFBQSxjQUNBQyxJQUFBLGNBQ0FFLFlBQUEsZUFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FFLFlBQUEsWUFFQUgsTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLFdBQUEsWUFDQUMsWUFBQSxVQUVBSCxNQUFBLGdCQUNBQyxJQUFBLGdCQUNBRSxZQUFBLGlCQUVBSCxNQUFBLHFCQUNBQyxJQUFBLHFCQUNBRSxZQUFBLHNCQUVBSCxNQUFBLG9CQUNBQyxJQUFBLG9CQUNBRSxZQUFBLHFCQUVBSCxNQUFBLFdBQ0FDLElBQUEsV0FDQUUsWUFBQSxZQUVBSCxNQUFBLFVBQ0FDLElBQUEsVUFDQUUsWUFBQSxXQUVBSCxNQUFBLFVBQ0FDLElBQUEsVUFDQUUsWUFBQSxXQUVBSCxNQUFBLG9CQUNBQyxJQUFBLFlBQ0FFLFlBQUEsYUFFQUgsTUFBQSxtQkFDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsMEJBQ0FDLElBQUEsa0JBQ0FFLFlBQUEsbUJBRUFILE1BQUEsYUFDQUMsSUFBQSxhQUNBRSxZQUFBLGNBRUFILE1BQUEsbUJBQ0FDLElBQUEs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LEdBRUEsTUFEQWhNLFNBQUFDLElBQUErTCxHQUNBMUssRUFBQSxTQUFBbU4sRUFBQUMsR0FDQWQsRUFBQWUsS0FBQSxvQkFBQTNDLEdBQUF0TSxLQUFBLFNBQUFtQyxHQUNBQSxFQUFBVyxLQUFBUixRQUNBeU0sRUFBQTVNLEVBQUFXLEtBQUFyQyxLQUVBdU8sRUFBQTdNLEVBQUFXLEtBQUFyQyxNQUNBLFNBQUEwQixHQUNBNk0sRUFBQTdNLEVBQUFXLEtBQUFyQyxVQUtBNE0sRUFBQSxTQUFBekgsR0FDQSxNQUFBaEUsR0FBQSxTQUFBbU4sRUFBQUMsR0FDQWQsRUFBQWUsS0FBQSxxQkFBQVEsWUFBQTdKLElBQUE1RixLQUFBLFNBQUFtQyxHQUNBQSxFQUFBVyxLQUFBUixTQUFBLEdBQUFaLE1BQUFTLEVBQUFXLEtBQUE4QyxRQUFBNkcsWUFBQSxHQUFBL0ssTUFDQXNOLEVBQUEsZUFFQTdNLEVBQUFXLEtBQUFSLFNBQUFILEVBQUFXLEtBQUE4QyxRQUFBOEosS0FDQVYsRUFBQSw4QkFFQTdNLEVBQUFXLEtBQUFSLFVBQUFILEVBQUFXLEtBQUE4QyxRQUFBOEosS0FDQVgsRUFBQTVNLEVBQUFXLEtBQUE4QyxTQUdBb0osRUFBQTdNLEVBQUFXLEtBQUF3QixXQU1BLFFBQ0E4SSxhQUFBQSxFQUNBQyxhQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMjIuMDkuMjAxNi5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJywgJ3VpLnJvdXRlcicsICduZ0Nvb2tpZXMnXSk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIGZ1bmN0aW9uICgkd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFpbicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncm9vbUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYWluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Jvb21zJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcm9vbXMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdyb29tcydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdyZXN0YXVyYW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcmVzdGF1cmFudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Jlc3RhdXJhbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGFjdCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbnRhY3QnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250YWN0J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ29mZmVyJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvb2ZmZXInLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ29mZmVyQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ29mZmVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbmZpcm1hdGlvbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbmZpcm1hdGlvbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsQm9va2luZycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1Y2Nlc3NmdWxTaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsU2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hY2NvdW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYWNjb3VudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWduaW4nLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWduaW4nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWduaW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuYm9va2luZ3MnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9ib29raW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Jvb2tpbmdzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuZGV0YWlscycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkZXRhaWxzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY291bnQuY2hhbmdlUGFzc3dvcmQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jaGFuZ2VQYXNzd29yZCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NoYW5nZVBhc3N3b3JkJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQucm9vbXMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtcm9vbXMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtcm9vbXMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnVzZXJzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXVzZXJzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXVzZXJzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC52b3VjaGVycycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC12b3VjaGVycycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC12b3VjaGVycydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQtYm9va2luZ3MnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LWJvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21hbmFnbWVudC1ib29raW5ncydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCd0ZXN0Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdGVzdCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Rlc3QnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbWFpbicpXHJcbiAgICB9KVxyXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsXHJcbiAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRzdGF0ZVBhcmFtcyA9ICRzdGF0ZVBhcmFtcztcclxuXHJcbiAgICB9XSk7XHJcbiAgICAvKlxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcclxuICAgICAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgICAgICAud2hlbignLycsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL21haW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbnVwJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3NpZ25pbicsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc2lnbmluJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3VzZXJpbmZvJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdXNlcmluZm8nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc3VjY2Vzc2Z1bFNpZ251cCcse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3VjY2Vzc2Z1bFNpZ251cCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9vZmZlcicse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvb2ZmZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvY29uZmlybWF0aW9uJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9jb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc3VjY2Vzc2Z1bEJvb2tpbmcnLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3N1Y2Nlc3NmdWxCb29raW5nJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub3RoZXJ3aXNlKCcvJyk7XHJcbiAgICB9KTtcclxuKi9cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignYWNjQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgQXV0aFNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24gKHZpZXdMb2NhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdmlld0xvY2F0aW9uID09PSAkbG9jYXRpb24ucGF0aCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24oaXNWYWxpZCwgZk5hbWUsIGxOYW1lLCBuRW1haWwsIG5QaG9uZSl7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0RldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBmTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogbE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IG5FbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogblBob25lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY2hhbmdlVXNlckRldGFpbHMobmV3RGV0YWlscykudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8gcHJ6eWNpc2sgYW51bG93YW5pYSB0eWxrbyBkbGEgcG9rb2ksIGt0w7NyeWNoIGRhdGEgbmEgdG8gcG96d2FsYVxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyQm9va2luZ3MoKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlckJvb2tpbmdzID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlyc3ROYW1lID0gdXNlci5maXJzdE5hbWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE5hbWUgPSB1c2VyLmxhc3ROYW1lO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5waG9uZSA9IHVzZXIucGhvbmU7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHVzdGF3aWMgcGFzc3kgbmEgemVybyBwbyDFvMSFZGFuaXUgaGh0cFxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICh2YWxpZCxvbGRQLCBuZXdQKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKG9sZFAsIG5ld1ApLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5tc2cpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VjY2Vzc2Z1bFBhc3N3b3JkQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlaikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS53cm9uZ1Bhc3N3b3JkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBnZXRJbmZvKCk7XHJcbiAgICAgICAgZ2V0VXNlckJvb2tpbmdzKCk7XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTQuMTAuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2F1dGhDdHJsJywgZnVuY3Rpb24gKCRxLCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgJGxvY2F0aW9uLCAkcm91dGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKSB7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUucmVnZXggPSAnKFxcXFwrWzAtOV1cXFxcZHsxfSkqKFxcXFxzKSooWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICcnO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZDtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgaWYoJHJvb3RTY29wZS5pc0xvZ2dlZEluKCkpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlclJvbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUucm9sZSA9IHJlc3VsdC5yb2xlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgXHJcbiAgICAgICAgJHNjb3BlLnNpZ25pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luJyk7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ25pbigkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAobXNnLCBzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyUm9sZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUucm9sZSA9IHJlc3VsdC5yb2xlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZj0nIy8nO1xyXG4gICAgICAgICAgICAgICAgLy8kc3RhdGUuZ28oJ2hvbWUnKTtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5zaWdub3V0KCk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dlZEluID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgLy9zdGF0ZS5nbygnaG9tZScpO1xyXG4gICAgICAgICAgICAvLyRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ291dCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmluZm8gPSBtc2c7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8vVE9ETyBzdGF0ZS5yZWxvYWRcclxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbnVwKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvbXnFm2xuaWUgemFyZWplc3Ryb3dhbm8nKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWduaW4oJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKG1zZywgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9nZWRJbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSA9PSAnaHR0cDovL2xvY2FsaG9zdDozMDAxLyMvY29uZmlybWF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bFNpZ251cCcpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmPScjL3N1Y2Nlc3NmdWxTaWdudXAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGRhdGEuY29kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTEwMDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdXeWJyYW55IGVtYWlsIGplc3QganXFvCB6YXJlamVzdHJvd2FueS4gUHJvc3rEmSB3eWJyYcSHIGlubnkuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnVXBzcyBjb8WbIHBvc3rFgm8gbmllIHRhay4gUHJvc3rEmSBzcHLDs2Jvd2HEhyBww7PFum5pZWouJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1Vwc3MgY2/FmyBwb3N6xYJvIG5pZSB0YWsuIFByb3N6xJkgc3Byw7Nib3dhxIcgcMOzxbpuaWVqLic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdzdWJtaXRFcnJvcicsIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JNZXNzYWdlKVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHEsICR3aW5kb3csICRsb2NhdGlvbiwgJHN0YXRlLCAkY29va2llcywgJHNjb3BlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmlzU2lnbmVkSW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJvb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgncm9vbScpKTtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSkuZGF0ZUZyb207XHJcbiAgICAgICAgJHNjb3BlLmRhdGVUbyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKS5kYXRlVG87XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhcyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdleHRyYXMnKSkuZXh0cmFzO1xyXG4gICAgICAgICRzY29wZS5udW1PZkRheXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZXh0cmFzJykpLm51bU9mRGF5cztcclxuXHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCA/ICRzY29wZS5pc1NpZ25lZEluID0gdHJ1ZSA6ICRzY29wZS5pc1NpZ25lZEluID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnJlc2VydmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS50ZXJtcyAhPSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1ByemVkIHBvdHdpZXJkemVuaWVtIHJlemVyd2FjamkgbmFsZcW8eSB6YWFrY2VwdG93YcSHcmVndWxhbWluLicpO1xyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2UuYm9va1Jvb20oe2lkOiAkc2NvcGUucm9vbS5faWQsIGZyb206ICRzY29wZS5kYXRlRnJvbSwgdG86ICRzY29wZS5kYXRlVG8sIHByaWNlOiBjYWxjdWxhdGVUb3RhbFByaWNlKCksIGV4dHJhczogJHNjb3BlLmV4dHJhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3VjY2Vzc2Z1bEJvb2tpbmcnKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gd3nFm3dpZXRsZW5pZSBlcnJyb3JhXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b1ByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL29mZmVyJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ29mZmVyJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdG90YWwgPSAoJHNjb3BlLnJvb20ucHJpY2UgKiAkc2NvcGUubnVtT2ZEYXlzKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBlLnByaWNlICogJHNjb3BlLm51bU9mRGF5cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9UT0RPIHpyb2JpZW5pZSByZWplc3RyYWNqaShtb8W8ZSBwcnplbmllc2llbmllIG5hIHNpZ251cCB2aWV3PyBkbyByb3p3YcW8ZW5pYSkgaSBvYnPFgnVnYSBixYLEmWTDs3cobW/FvGUgamFrb8WbIHBvxYLEhWN6ecSHIG9ieWR3YSBsb2dvd2FuaWEgaSByZWplc3RyYWNqZSB3IGplZG5vPylcclxuICAgICAgICAvL1RPRE8gT2JzbHVnYSBibGVkb3cgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGN6ZWdvcyBkbyB3aWRva3UgcmV6ZXJ3YWpjaVxyXG4gICAgICAgIC8vVE9ETyBwb3Vzw7N3YcSHIGpha2llxZsgaW5pdHkod3lzdGFjenkgd3lvxYJhxIcgZnVua2NqxJkgdyBrb250cm9sZXJ6ZSBsdWIgc3J2KVxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGNhxYJlaiBvYnPFgnVnaSBrb250YSh6bWlhbmEgaGFzxYJhLCBudW1lcnUgdGVsZWZvbnVbZG9kYW5pZSBsdWIgem1pYW5hXSwgcG9kZ2zEhWR1IHJlemVyd2FjamksIGl0cCkgb3JheiBvYnPFgnVnaSBob3RlbHUoQ1JVRCBkb2RhdGvDs3csIHBva29qaSBpdHApLlxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIG1vxbxlIGpha2nFmyB3eWtyZXPDs3cgbmEgdGVtYXQgb2JjacSFxbxlbmlhIHBva29qaSBsdWIgamFracWbIHByenljaG9kw7N3IGN6eSBjb8WbIGFsYm8gamFpZcWbIGNvxZsgZG8gZ2VuZXJvd2FuaWUgcGRmIHogcmFwb3J0ZW1cclxuICAgICAgICAvL1RPRE8gcG96bWllbmlhxIcgc8WCb3dhIHJlc2VydmF0aW9uIGl0cCBuYSBib29raW5nXHJcbiAgICAgICAgLy9UT0RPIGtvZHkgcmFiYXRvd2VcclxuICAgICAgICAvL1RPRE8gcG93aWFkb21pZW5pZSBvIGNpYXN0ZWN6a2FjaFxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIHBvZGdsxIVkdSBvYsWCb8W8ZW5pYSBob3RlbHUgamFrIHcga2luaSgzIHN0YW55OiB3b2xueSwgemFyZXplcndvd2FueSwgemFqZXR5KVxyXG4gICAgICAgIC8vVE9ETyB6YmFkYW5pZSBjenkgLnJ1biBzdGF0ZVByb3ZpZGVyYSBwb2N6ZWJuZVxyXG4gICAgICAgIC8vVE9ETyBwb3puYW5pZSBzdGF0ZVByb3ZpZGVyYSBpIGRvZGFuaWUgbmVzdGVkIHZpZXdzXHJcbiAgICAgICAgLy9UT0RPIG5hIGfFgsOzd25laiBzdHJvbmllIHpyb2JpxIfFvGVieSBkYXRhIGJ5xYLEhSBjb25ham1uaWVqIGplZGVuIGR6aWVuIHJlemVyd2FjamlcclxuICAgICAgICAvL1RPRE8gem1pYW5hIHJlZ2V4IG5hIHJvb3RTY29wZSBqZXNsaSBtb3psaXdlXHJcbiAgICAgICAgLy9UT0RvIGRhdGEgcmV6ZXJ3YWNqaSB0eWxrbyBvZCBkYXR5IGR6aXNpZWpzemVqIChiZXogcmV6ZXJ3YWNqaSB3IHByemVzesWCb8WbY2kpXHJcbiAgICAgICAgLy9UT0RPIGtvbnRvXHJcbiAgICAgICAgLy96bWlhbmEgZGFueWNoXHJcbiAgICAgICAgLy96bWlhbmEgaGFzxYJhXHJcbiAgICAgICAgLy96b2JhY3plbmllIHJlemVyd2FjamlcclxuICAgICAgICAvL2FudWxvd2FuaWUgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgnY29tcGFyZVRvJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6IFwibmdNb2RlbFwiLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgb3RoZXJNb2RlbFZhbHVlOiBcIj1jb21wYXJlVG9cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgbmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRvcnMuY29tcGFyZVRvID0gZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbFZhbHVlID09IHNjb3BlLm90aGVyTW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFwib3RoZXJNb2RlbFZhbHVlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KVxyXG4gICAgLmRpcmVjdGl2ZSgndXNlckluZm8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxwPnNpYWxhbGE8L3A+J1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAvKlxyXG4gICAgLmRpcmVjdGl2ZSgnbXlEaXJlY3RpdmUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBtQ3RybCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbXlWYWxpZGF0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoXCJlXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCdjaGFyRScsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgnY2hhckUnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1DdHJsLiRwYXJzZXJzLnB1c2gobXlWYWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgICovXHJcbiAgICAuZGlyZWN0aXZlKCd2b3VjaGVyY2hlY2snLCBmdW5jdGlvbiAodm91Y2hlclNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0ciwgbUN0cmwpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRpb24odm91Y2hlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHZvdWNoZXIubGVuZ3RoID09IDIzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodm91Y2hlci5jaGFyQXQoNSkgPT0gJy0nICYmIHZvdWNoZXIuY2hhckF0KDExKSAmJiB2b3VjaGVyLmNoYXJBdCgxNykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvdWNoZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtQ3RybC4kcGFyc2Vycy5wdXNoKHZhbGlkYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDguMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ29mZmVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRjb29raWVzLCAkc3RhdGUsICRsb2NhdGlvbiwgJHdpbmRvdywgb2ZmZXJTdmMpIHtcclxuICAgICAgICAkc2NvcGUub2ZmZXIgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzID0gW107XHJcbiAgICAgICAgdmFyIGRhdGVzID0ge307XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVUbyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5yb29tTmFtZSA9ICcnO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNob3dPZmZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm9mZmVyID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3Jvb20nKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBnZXRFeHRyYXMoKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGVzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSBkYXRlUHJlZXRpZnkobmV3IERhdGUoZGF0ZXMuZGF0ZUZyb20pKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVUbyA9IGRhdGVQcmVldGlmeShuZXcgRGF0ZShkYXRlcy5kYXRlVG8pKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5yb29tTmFtZSA9ICRzY29wZS5vZmZlci50eXBlO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbVByaWNlID0gJHNjb3BlLm9mZmVyLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSA9IDA7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBkYXRlUHJlZXRpZnkgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gJycrZGF5KyctJyttb250aCsnLScreWVhcjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkT3JSZW1vdmVFeHRyYSA9IGZ1bmN0aW9uIChleHRyYSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnNlbGVjdGVkRXh0cmFzLmluZGV4T2YoZXh0cmEpO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25UZXh0ID0gZXh0cmEuYnV0dG9uVG9nZ2xlID8gJ0RvZGFqICsnIDogJ1VzdcWEIC0nO1xyXG4gICAgICAgICAgICBleHRyYS5idXR0b25Ub2dnbGUgPSAhZXh0cmEuYnV0dG9uVG9nZ2xlO1xyXG5cclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gKGV4dHJhLnByaWNlICogY2FsY3VsYXRlRGlmZk9mRGF5cygpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEV4dHJhcy5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSAtPSAoZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvQ29uZmlybWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXNkYXNkJyk7XHJcbiAgICAgICAgICAgIHZhciBleHRyYXMgPSB7ZXh0cmFzOiAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMsIG51bU9mRGF5czogY2FsY3VsYXRlRGlmZk9mRGF5cygpfTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdleHRyYXMnLCBKU09OLnN0cmluZ2lmeShleHRyYXMpKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9jb25maXJtYXRpb24nXHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29uZmlybWF0aW9uJylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9QcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9tYWluJ1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmdldEV4dHJhcygpLnRoZW4oZnVuY3Rpb24gKGV4dHJhc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXMgPSBleHRyYXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCA7IGkgPCAkc2NvcGUuZXh0cmFzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRleHQgPSAnRG9kYWogKyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1tpXS5idXR0b25Ub2dnbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZXMuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoZGF0ZXMuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzaG93T2ZmZXIoKTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwNi4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigncm9vbUN0cmwnLCBmdW5jdGlvbiAoJHEsICRjb29raWVzLCAkc2NvcGUsICRyb290U2NvcGUsICR3aW5kb3csICRsb2NhdGlvbiwgcm9vbVNlcnZpY2UsIG9mZmVyU3ZjLCRmaWx0ZXIsICRzdGF0ZSkge1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5kYXRlVG8gPSAnJztcclxuICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yTXNnID0nJztcclxuICAgICAgICAkc2NvcGUucm9vbXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUubnVtYmVyT2ZCZWRzID0gMTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN1Y2Nlc3NmdWxDYW5jZWwgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDA7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzID0gW107XHJcbiAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0T3JBZGRVc2VyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUm9vbSA9IHJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNldERhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0ZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlRnJvbSA9IGRhdGU7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlO1xyXG4gICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKGRhdGVUZW1wLmdldERhdGUoKSsxKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVUbyA9IGRhdGVUZW1wO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXREYXRlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5maW5kUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZmluZFJvb21zID0gZnVuY3Rpb24gKCkgey8vVE9ETyBvZ2FybmFjIHNpZSB6IHR5bSBiZWRzLCB3eXN6dWtpd2FjIHBva29qZSBvIHBvZGFuZWogaWxvc2NpIG9zb2IgaSBuYXp3YWMgdG8gamFrb3MgdyBiYXppZSBvc3RhdGVjem5pZVxyXG4gICAgICAgICAgICBpZigkc2NvcGUuZGF0ZVRvLmdldE1vbnRoKCkgPD0gJHNjb3BlLmRhdGVGcm9tLmdldE1vbnRoKCkgJiYgJHNjb3BlLmRhdGVUby5nZXREYXRlKCkgPD0gJHNjb3BlLmRhdGVGcm9tLmdldERhdGUoKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9ICRzY29wZS5kYXRlRnJvbTtcclxuICAgICAgICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSsxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRlVG8gPSBkYXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21zKHtcclxuICAgICAgICAgICAgICAgIGZyb206ICRzY29wZS5kYXRlRnJvbS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdG86ICRzY29wZS5kYXRlVG8udG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGJlZHM6ICRzY29wZS5udW1iZXJPZkJlZHNcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocm9vbXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tc0RhdGEubGVuZ3RoID4wKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucm9vbXMgPSByb29tc0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTXNnID0gJ0NvxZsgcG9zesWCbyBuaWUgdGFrLidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZFJvb20gPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ3Jvb20nLCBKU09OLnN0cmluZ2lmeShyb29tKSk7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnZGF0ZXMnLCBKU09OLnN0cmluZ2lmeSh7ZGF0ZUZyb206ICRzY29wZS5kYXRlRnJvbSwgZGF0ZVRvOiAkc2NvcGUuZGF0ZVRvfSkpO1xyXG4gICAgICAgICAgICBvZmZlclN2Yy5jaG9vc2VSb29tKHJvb20pO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ29mZmVyJyk7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmPScjL29mZmVyJztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudGVzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnJvb21zKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRBbGxSb29tcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0QWxsUm9vbXMoKS50aGVuKGZ1bmN0aW9uIChyb29tcykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFsbFJvb21zID0gcm9vbXM7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyb29tcyk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy9UT0RPIG9ic8WCdWdhIGVycm9yYVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QXZhaWxhYmlsaXR5ID0gZnVuY3Rpb24gKHJlc2VydmF0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgcm9vbURhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLnJvb21EYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLnJvb21EYXRlVG8pO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcmVzZXJ2YXRpb25zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS5mcm9tKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZShyZXNlcnZhdGlvbnNbaV0udG8pO1xyXG4gICAgICAgICAgICAgICAgaWYocm9vbURhdGVGcm9tIDwgZGF0ZVRvICYmIHJvb21EYXRlVG8gPiBkYXRlRnJvbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub3RBdmFpbGFibGUnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICdhdmFpbGFibGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hbmFnbWVudEluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21EYXRlRnJvbSA9IGRhdGU7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVGVtcCA9IG5ldyBEYXRlO1xyXG4gICAgICAgICAgICBkYXRlVGVtcC5zZXREYXRlKGRhdGVUZW1wLmdldERhdGUoKSsxKTtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb21EYXRlVG8gPSBkYXRlVGVtcDtcclxuICAgICAgICAgICAgJHNjb3BlLmdldEFsbFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUudG9Cb29raW5ncyA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnc2VsZWN0ZWRSb29tJywgSlNPTi5zdHJpbmdpZnkocm9vbSkpO1xyXG4gICAgICAgICAgICAkKCcjcmVndWxhbWluJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdtYW5hZ21lbnQtYm9va2luZ3MnKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRSb29tID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ3NlbGVjdGVkUm9vbScpKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmNoZWNrRGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUZyb20gPiBjdXJyZW50RGF0ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicm9vbSBpZCB0bzpcIityb29tX2lkK1wiLCBib29raW5nX2lkIHRvOlwiK2Jvb2tpbmdfaWQpO1xyXG5cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuY2FuY2VsQm9va2luZyhyb29tX2lkLCBib29raW5nX2lkKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndWRhxYJvIHNpxJkgYW51bG93YcSHJyk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldFJvb21Cb29raW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmdldFNlbGVjdGVkUm9vbSgpO1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRSb29tQm9va2luZ3MoJHNjb3BlLnNlbGVjdGVkUm9vbS5faWQpLnRoZW4oZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5ib29raW5ncyA9IGIucmVzZXJ2YXRpb25zO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zZWxlY3RVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0VXNlckluZm8odXNlcikudGhlbihmdW5jdGlvbiAodSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlciA9IHU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VsZWN0ZWRVc2VyKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9Cb29raW5nID0gZnVuY3Rpb24gKHJvb20sIGRhdGVGcm9tLCBkYXRlVG8pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdib29raW5nJywgSlNPTi5zdHJpbmdpZnkoe3Jvb206IHJvb20sIGRhdGVGcm9tOiBkYXRlRnJvbSwgZGF0ZVRvOiBkYXRlVG99KSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Rlc3QnKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW5pdEJvb2tpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ib29raW5nID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2Jvb2tpbmcnKSk7XHJcbiAgICAgICAgICAgICRzY29wZS50ZXN0LmRhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLmJvb2tpbmcuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICAkc2NvcGUudGVzdC5kYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUuYm9va2luZy5kYXRlVG8pO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSgpO1xyXG4gICAgICAgICAgICBnZXRFeHRyYXMoKTtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0VXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VycykpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvL1RPRE8gZG9kYW5pZSBkb2RhdGvDs3cgaSBvYmxpY3plbmllIGNlbnlcclxuICAgICAgICAkc2NvcGUuc3VibWl0Qm9va0Zvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLnNlbGVjdE9yQWRkVXNlcil7XHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUudGVzdC5lbWFpbCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogXCJcIiskc2NvcGUudGVzdC5maXJzdE5hbWUrJHNjb3BlLnRlc3QubGFzdE5hbWUrJHNjb3BlLnRlc3QucGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLnRlc3QuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLnRlc3QubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiAkc2NvcGUudGVzdC5waG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogJHNjb3BlLnRlc3QuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLnRlc3QuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJHNjb3BlLnRlc3QubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiAkc2NvcGUudGVzdC5waG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5zaWdudXBBbmRCb29rKHVzZXIsICRzY29wZS5ib29raW5nLnJvb20uX2lkLCB7ZGF0ZUZyb206ICRzY29wZS50ZXN0LmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS50ZXN0LmRhdGVUb30sICRzY29wZS50b3RhbFByaWNlLCAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVzZXIgPSBKU09OLnBhcnNlKCRzY29wZS5zZWxlY3RlZFVzZXJCb29raW5nKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUm9vbUN0cmwsIGZ1bmtjamEgc3VibWl0Qm9va0Zvcm0sIGRhdGFPZDogXCIrJHNjb3BlLnRlc3QuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICAgICAgcm9vbVNlcnZpY2UuYWRtaW5Cb29rKCRzY29wZS5ib29raW5nLnJvb20uX2lkLCB1c2VyLmVtYWlsICx7ZGF0ZUZyb206ICRzY29wZS50ZXN0LmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS50ZXN0LmRhdGVUb30sICRzY29wZS50b3RhbFByaWNlLCAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVEaWZmT2ZEYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgTVNfUEVSX0RBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IG5ldyBEYXRlKCRzY29wZS50ZXN0LmRhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS50ZXN0LmRhdGVUbyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVVUQyA9IERhdGUuVVRDKGRhdGVGcm9tLmdldEZ1bGxZZWFyKCksIGRhdGVGcm9tLmdldE1vbnRoKCksIGRhdGVGcm9tLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG9VVEMgPSBEYXRlLlVUQyhkYXRlVG8uZ2V0RnVsbFllYXIoKSwgZGF0ZVRvLmdldE1vbnRoKCksIGRhdGVUby5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZGF0ZVRvVVRDIC0gZGF0ZUZyb21VVEMpIC8gTVNfUEVSX0RBWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCRyb290U2NvcGUuZGlzY291bnQgIT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUuZGlzY291bnQudHlwZSA9PSAnemwnKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlKSAtICRyb290U2NvcGUuZGlzY291bnQuYW1vdW50O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoJHJvb3RTY29wZS5kaXNjb3VudCAhPSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5kaXNjb3VudC50eXBlID09ICclJyl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IChjYWxjdWxhdGVEaWZmT2ZEYXlzKCkgKiAkc2NvcGUuYm9va2luZy5yb29tLnByaWNlKSArICRzY29wZS5leHRyYXNUb3RhbFByaWNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUudG90YWxQcmljZSAtICgkc2NvcGUudG90YWxQcmljZSAqICgkcm9vdFNjb3BlLmRpc2NvdW50LmFtb3VudCAvIDEwMCkpO1xyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wYWlkQ2xhc3MgPSBmdW5jdGlvbiAocGFpZCkge1xyXG4gICAgICAgICAgICBpZihwYWlkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdidG4tc3VjY2Vzcyc7XHJcbiAgICAgICAgICAgIHJldHVybiAnYnRuLXdhcm5pbmcnXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUucGF5ID0gZnVuY3Rpb24gKGJvb2tpbmcpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UucGF5KGJvb2tpbmcuX2lkLCAhYm9va2luZy5wYWlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBib29raW5nLnBhaWQgPSAhYm9va2luZy5wYWlkO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9EbyBzcHJhd2R6aWMgY3plbXUgd3l3YWxhIGJsYWQgd3N6ZWR6aWVcclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCgnZGlzY291bnQnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxMS4xMi4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbi5jb250cm9sbGVyKCd2b3VjaGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsIHZvdWNoZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgLy9JbGUsIGN6eSB3aWVsb2tyb3RuZWdvIHV6eXRrdSwgZGF0YSB3eWdhxZtuacSZY2lhXHJcbiAgICAkc2NvcGUuZ2VuZXJhdGVWb3VjaGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUudm91Y2hlcnMgPSB7XHJcbiAgICAgICAgICAgIGNvZGVzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHBvc3NpYmxlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xyXG4gICAgICAgIHZhciBleHBpcnlEYXRlID0gJHNjb3BlLnZvdWNoZXJFeHBpcnlEYXRlO1xyXG4gICAgICAgIGlmKGV4cGlyeURhdGUgPCBuZXcgRGF0ZSgpKXtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJFcnJvciA9ICdEYXRhIHd5Z2HFm25pxJljaWEgbmllIG1vxbxlIGJ5xIcgeiBwcnplc3rFgm/Fm2NpJzsvL1RPRE8gcG9wcmF3acSHIGtvbXVuaWthdFxyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnNHZW5lcmF0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmdlbmVyYXRlZFZvdWNoZXJzID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlckVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB3aGlsZSgkc2NvcGUudm91Y2hlcnMuY29kZXMubGVuZ3RoIDwgJHNjb3BlLm51bWJlck9mVm91Y2hlcnMpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHZvdWNoZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IDU7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm91Y2hlciArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaSAhPSAzICl2b3VjaGVyICs9ICctJztcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuY29kZXMucHVzaCh2b3VjaGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9UT0RPIGRhbHN6YSBwcmFjYSBuYWQgdm91Y2hlcmFtaSwgcG9tecWbbGXEhyBqYWsgdG8gcHJ6ZWNob3d5d2HEhyB3IGJhemllIGN6eSBqYWtvIHRla3N0IG5wLiAyMCUgY3p5IG9kZHppZWxuaWUgbnVtYmVyOiAyMCwgZGlzY291bnRUeXBlOiAnJVwiXHJcbiAgICAgICAgICAgIHZhciBsYXN0ID0gJHNjb3BlLmRpc2NvdW50LmNoYXJBdCgkc2NvcGUuZGlzY291bnQubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICBpZihsYXN0ID09PSAnJScpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZGlzY291bnRUeXBlID0gJyUnO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGxhc3QgPT09ICfFgicgJiYgJHNjb3BlLmRpc2NvdW50LmNoYXJBdCgkc2NvcGUuZGlzY291bnQubGVuZ3RoLTIpID09PSAneicpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZGlzY291bnRUeXBlID0gJ3psJztcclxuXHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVycy5kaXNjb3VudCA9IGNvbnZlcnRUb051bWJlcigkc2NvcGUuZGlzY291bnQpO1xyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZXhwaXJ5RGF0ZSA9IGV4cGlyeURhdGU7XHJcbiAgICAgICAgICAgICRzY29wZS5nZW5lcmF0ZWRWb3VjaGVycyA9ICRzY29wZS52b3VjaGVycy5jb2RlcztcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzR2VuZXJhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzU2F2ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuc2F2ZVZvdWNoZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52b3VjaGVycyk7XHJcbiAgICAgICAgdm91Y2hlclNlcnZpY2Uuc2F2ZVZvdWNoZXJzKCRzY29wZS52b3VjaGVycykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS52b3VjaGVyc1NhdmVkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy9UT0RPIG9kamVjaWUga3dvdHkgaSBzcHJhd2R6ZW5pZSB2YXpub3NjaSh3eXN3aWV0bGVuaWUgb2Rwb3dpZWRuaWVnbyBlcnJvcmEpLCBuYSBrb25pZWMgcHJ6eSByZXplcndhY2ppIHV3emdsZWRuaWMgdm91Y2hlclxyXG4gICAgJHNjb3BlLmNoZWNrVm91Y2hlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudm91Y2hlcik7XHJcbiAgICAgICAgICAgIHZvdWNoZXJTZXJ2aWNlLmNoZWNrVm91Y2hlcigkc2NvcGUudm91Y2hlci50b1N0cmluZygpKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlck5vdEZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9ICdLb2QgcG9wcmF3bnkgem5pxbxrYSAnK3Jlc3VsdC5kaXNjb3VudCtyZXN1bHQuZGlzY291bnRUeXBlO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHthbW91bnQ6IHJlc3VsdC5kaXNjb3VudCwgdHlwZTogcmVzdWx0LmRpc2NvdW50VHlwZX07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGlzY291bnQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZGlzY291bnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlck5vdEZvdW5kID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudm91Y2hlckZvdW5kID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5jb2RlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighJHNjb3BlLmJvb2tpbmdGcm0uJHZhbGlkKXtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5kaXNjb3VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGlzTnVtZXJpYyhuKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb252ZXJ0VG9OdW1iZXIobikge1xyXG4gICAgICAgIHZhciBkaXNjb3VudCA9ICcnO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoaXNOdW1lcmljKG4uY2hhckF0KGkpKSl7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudCArPSBuLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpc2NvdW50ID0gTnVtYmVyKGRpc2NvdW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaXNjb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkaXNjb3VudCA9IE51bWJlcihkaXNjb3VudCk7XHJcbiAgICAgICAgcmV0dXJuIGRpc2NvdW50O1xyXG4gICAgfVxyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDcuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigndW5pcXVlQ2F0ZWdvcmllcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJvb21zLCBwcm9wZXJ0eU5hbWUpIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KHJvb21zKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gcm9vbXNbaV1bcHJvcGVydHlOYW1lXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoa2V5c1t2YWxdKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNbdmFsXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJvb21zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjEwLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdBdXRoU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdmFyIExPQ0FMX1RPS0VOID0gJ3Rva2VuJztcclxuICAgICAgICB2YXIgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBVc2VyIGluZm8uLi4nKTsvL0RvIHVzdW5pxJljaWFcclxuICAgICAgICAgICAgaWYodG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVVzZXJJbmZvKCkge1xyXG4gICAgICAgICAgICBhdXRoVG9rZW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfVE9LRU4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RvcmVVc2VySW5mbyh0b2tlbikge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfVE9LRU4sIHRva2VuKTtcclxuICAgICAgICAgICAgdXNlckluZm8odG9rZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdG9rZW47XHJcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBhdXRoVG9rZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2lnbmluID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYXV0aGVudGljYXRlJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ocmVzdWx0LmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZywgcmVzdWx0LmRhdGEuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdmFyIHNpZ25vdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lVc2VySW5mbygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzaWdudXAgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zaWdudXAnLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2plc3RlbSB3IHJlc29sdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbG9hZFVzZXJJbmZvKCk7XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtmaXJzdE5hbWU6IHJlc3VsdC5kYXRhLmZpcnN0TmFtZSwgbGFzdE5hbWU6IHJlc3VsdC5kYXRhLmxhc3ROYW1lLCBlbWFpbDogcmVzdWx0LmRhdGEuZW1haWwsIHBob25lOiByZXN1bHQuZGF0YS5waG9uZSwgcm9sZTogcmVzdWx0LmRhdGEucm9sZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJCb29raW5ncyA9IGZ1bmN0aW9uICgpIHsvL1RPRE8gcG9wcmF3acSHIHJhemVtIHogYXBpIMW8ZWJ5IGRhd2HFgm8gc3VjY2Vzc1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldFVzZXJCb29raW5ncycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGNoYW5nZVVzZXJEZXRhaWxzID0gZnVuY3Rpb24gKG5ld0RldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvdGVzdCcsIG5ld0RldGFpbHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9nZXROZXdUb2tlbicsIHtlbWFpbDogbmV3RGV0YWlscy5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdDIuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0MiBzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVc2VySW5mbyhyZXN1bHQyLmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igbm93ZWdvIHRva2VuYScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtzdWNjZXNzOiB0cnVlLCBtc2c6IFwiUG9tecWbbG5pZSB6bWllbmlvbm8gZGFuZVwifSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe3N1Y2Nlc3M6IGZhbHNlLCBtc2c6IFwiY2/FmyBwb3N6xYJvIG5pZSB0YWtcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKG9sZFBhc3MsIG5ld1Bhc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hhbmdlLXBhc3N3b3JkJywge29sZFBhc3M6IG9sZFBhc3MsIG5ld1Bhc3M6IG5ld1Bhc3N9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHttc2c6ICdwb215xZtsbmllIHptaWVuaW9ubyBoYXNsbyd9KTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe21zZzogcmVzdWx0LmRhdGEuZXJyb3J9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJSb2xlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe3JvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgc2lnbmluOiBzaWduaW4sXHJcbiAgICAgICAgICAgIHNpZ25vdXQ6IHNpZ25vdXQsXHJcbiAgICAgICAgICAgIHNpZ251cDogc2lnbnVwLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIGdldFVzZXJCb29raW5nczogZ2V0VXNlckJvb2tpbmdzLFxyXG4gICAgICAgICAgICBjaGFuZ2VVc2VyRGV0YWlsczogY2hhbmdlVXNlckRldGFpbHMsXHJcbiAgICAgICAgICAgIGNoYW5nZVBhc3N3b3JkOiBjaGFuZ2VQYXNzd29yZCxcclxuICAgICAgICAgICAgZ2V0VXNlclJvbGU6IGdldFVzZXJSb2xlLFxyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZFxyXG4gICAgICAgIH1cclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDguMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ29mZmVyU3ZjJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIHZhciBjaG9zZW5Sb29tID0ge307XHJcbiAgICAgICAgdmFyIGV4dHJhcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgY2hvb3NlUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgIGNob29zZW5Sb29tID0gcm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNob29zZW5Sb29tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRFeHRyYXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0RXh0cmFzJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuZXh0cmFzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGNob29zZVJvb206IGNob29zZVJvb20sXHJcbiAgICAgICAgICAgIGdldFJvb206IGdldFJvb20sXHJcbiAgICAgICAgICAgIGdldEV4dHJhczogZ2V0RXh0cmFzLFxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMDYuMTEuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3Jvb21TZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWRSb29tID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb21zID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZmluZFJvb21zJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb2JyYW5vIHBva29qZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJvb21zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJvb2tSb29tID0gZnVuY3Rpb24gKGRhdGEpIHsvL1RPRE8gemphxIXEhyBzacSZXHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3Jlc2VydmUnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXRlbSBwcnplZCBwb3N0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jYW5jZWxCb29raW5nJyx7cm9vbV9pZDogcm9vbV9pZCwgYm9va2luZ19pZDogYm9va2luZ19pZH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzb2x2ZSBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWplY3QgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRBbGxSb29tcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRSb29tcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKHJvb21faWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0Um9vbUJvb2tpbmdzJywge3Jvb21faWQ6IHJvb21faWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGFbMF0ucmVzZXJ2YXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YVswXSlcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0VXNlckluZm8nLCB7ZW1haWw6IHVzZXJ9KS50aGVuKGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF1c2VySW5mby5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVzZXJJbmZvLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHVzZXJJbmZvLmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uICh1c2VySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh1c2VySW5mby5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNpZ251cEFuZEJvb2sgPSBmdW5jdGlvbiAodXNlciwgaWQsIGRhdGVzLCBwcmljZSwgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4dHJhcyk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3NpZ251cEFuZEJvb2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHVzZXIucGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGRhdGVzLmRhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBkYXRlcy5kYXRlVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhczogZXh0cmFzXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25pZSB1ZGHFgm8gc2nEmScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBhZG1pbkJvb2sgPSBmdW5jdGlvbiAoaWQsIGVtYWlsLCBkYXRlcywgcHJpY2UsIGV4dHJhcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNlcndpczogcm9vbVN2YywgZnVua2NqYTogYWRtaW5Cb29rIHwgaWQ6XCIraWQrXCIsIGVtYWlsOiBcIitlbWFpbCk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2FkbWluQm9vaycsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGRhdGVzLmRhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBkYXRlcy5kYXRlVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhczogZXh0cmFzXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdPSycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyByZXplcndhY2ppJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyByZXplcndhY2ppJyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRVc2VycycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgPSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnTmllIHpuYWxlemlvbm8gdcW8eXRrb3duaWvDs3cnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoJ05pZSB6bmFsZXppb25vIHXFvHl0a293bmlrw7N3JylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHBheSA9IGZ1bmN0aW9uIChyZXNlcnZhdGlvbl9pZCwgcGF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3BhaWQnLCB7aWQ6IHJlc2VydmF0aW9uX2lkLCBwYXk6IHBheX0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0Um9vbXM6IGdldFJvb21zLFxyXG4gICAgICAgICAgICBnZXRBbGxSb29tczogZ2V0QWxsUm9vbXMsXHJcbiAgICAgICAgICAgIGJvb2tSb29tOiBib29rUm9vbSxcclxuICAgICAgICAgICAgY2FuY2VsQm9va2luZzogY2FuY2VsQm9va2luZyxcclxuICAgICAgICAgICAgZ2V0Um9vbUJvb2tpbmdzOiBnZXRSb29tQm9va2luZ3MsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiBnZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgc2lnbnVwQW5kQm9vazogc2lnbnVwQW5kQm9vayxcclxuICAgICAgICAgICAgYWRtaW5Cb29rOiBhZG1pbkJvb2ssXHJcbiAgICAgICAgICAgIGdldFVzZXJzOiBnZXRVc2VycyxcclxuICAgICAgICAgICAgcGF5OiBwYXlcclxuICAgICAgICB9XHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTIuMTIuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLnNlcnZpY2UoJ3ZvdWNoZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzYXZlVm91Y2hlcnMgPSBmdW5jdGlvbiAodm91Y2hlcnMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codm91Y2hlcnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zYXZlVm91Y2hlcnMnLCB2b3VjaGVycykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGVja1ZvdWNoZXIgPSBmdW5jdGlvbiAodm91Y2hlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9jaGVja1ZvdWNoZXInLCB7dm91Y2hlckNvZGU6IHZvdWNoZXJ9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzICYmIChuZXcgRGF0ZShyZXN1bHQuZGF0YS52b3VjaGVyLmV4cGlyeURhdGUpIDwgbmV3IERhdGUoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1Rlcm1pbiBtaW7EhScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgcmVzdWx0LmRhdGEudm91Y2hlci51c2VkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdLb2Qgem9zdGHFgiBqdcW8IHd5a2/FvHlzdGFueScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3MgJiYgIXJlc3VsdC5kYXRhLnZvdWNoZXIudXNlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEudm91Y2hlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzYXZlVm91Y2hlcnM6IHNhdmVWb3VjaGVycyxcclxuICAgICAgICAgICAgY2hlY2tWb3VjaGVyOiBjaGVja1ZvdWNoZXJcclxuICAgICAgICB9XHJcbiAgICB9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
