var app=angular.module("app",["ngRoute","ui.router","ngCookies"]);angular.module("app").factory("authInterceptor",["$window",function(e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.token&&(o.headers.Authorization=e.localStorage.token),o}}}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/main",controller:"roomCtrl",templateUrl:"main"}).state("rooms",{url:"/rooms",templateUrl:"rooms"}).state("restaurant",{url:"/restaurant",templateUrl:"restaurant"}).state("contact",{url:"/contact",templateUrl:"contact"}).state("offer",{url:"/offer",controller:"offerCtrl",templateUrl:"offer"}).state("confirmation",{url:"/confirmation",templateUrl:"confirmation"}).state("successfulBooking",{url:"/successfulBooking",templateUrl:"successfulBooking"}).state("successfulSignup",{url:"/successfulSignup",templateUrl:"successfulSignup"}).state("account",{url:"/account",templateUrl:"account"}).state("signin",{url:"/signin",templateUrl:"signin"}).state("signup",{url:"/signup",templateUrl:"signup"}).state("account.bookings",{url:"/bookings",templateUrl:"bookings"}).state("account.details",{url:"/details",templateUrl:"details"}).state("account.changePassword",{url:"/changePassword",templateUrl:"changePassword"}).state("managment",{url:"/managment",templateUrl:"managment"}).state("managment.rooms",{url:"/managment-rooms",templateUrl:"managment-rooms"}).state("managment.users",{url:"/managment-users",templateUrl:"managment-users"}).state("managment.vouchers",{url:"/managment-vouchers",templateUrl:"managment-vouchers"}).state("managment-bookings",{url:"/managment-bookings",templateUrl:"/managment-bookings"}).state("test",{url:"/test",templateUrl:"test"}),o.otherwise("/main")}]).run(["$rootScope","$state","$stateParams",function(e,o,t){e.$state=o,e.$stateParams=t}]),angular.module("app").controller("accCtrl",["$scope","$state","AuthService","roomService",function(e,o,t,n){e.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",e.isActive=function(e){return e===$location.path()},e.changeUserDetails=function(e,n,a,r,s){if(e){var i={firstName:n,lastName:a,email:r,phoneNumber:s};t.changeUserDetails(i).then(function(e){o.reload()})}},e.cancelBooking=function(e,t){console.log("room id to:"+e+", booking_id to:"+t),n.cancelBooking(e,t).then(function(e){console.log("udało się anulować"),o.reload()})};var a=function(){t.getUserBookings().then(function(o){console.log(o),e.userBookings=o})},r=function(){t.getUserInfo().then(function(o){console.log(o),e.firstName=o.firstName,e.lastName=o.lastName,e.email=o.email,e.phone=o.phone})};e.changePassword=function(o,n,a){o&&t.changePassword(n,a).then(function(o){console.log(o.msg),e.successfulPasswordChange=!0},function(o){e.wrongPassword=!0})},e.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},r(),a()}]),angular.module("app").controller("authCtrl",["$q","$scope","$state","$window","$location","$route","$rootScope","AuthService",function(e,o,t,n,a,r,s,i){o.regex="(\\+[0-9]\\d{1})*(\\s)*([0-9]\\d{2})(\\s*)([0-9]\\d{2})(\\s*)([0-9]\\d{2})",o.submitError=!1,o.errorMessage="",s.isLoggedIn=function(){return i.isAuthenticated},s.isLoggedIn()&&i.getUserRole().then(function(e){s.role=e.role}),o.signin=function(){console.log("login"),i.signin(o.user).then(function(e,o){s.isLogedIn=!0,i.getUserRole().then(function(e){s.role=e.role}),n.location.reload(),console.log(e)})},o.signout=function(){i.signout(),s.isLogedIn=!1,t.go("home").then(function(){n.location.reload()}),console.log("logout")},o.getUserInfo=function(){i.getUserInfo().then(function(e){console.log(e),o.userinfo=e})},o.submitForm=function(e){e?i.signup(o.user).then(function(e){console.log("Pomyślnie zarejestrowano"),o.submitError=!1,i.signin(o.user).then(function(e,o){s.isLogedIn=!0,"http://localhost:3001/#/confirmation"==n.location.toString()?n.location.reload():t.go("successfulSignup").then(function(){n.location.reload()})})},function(e){switch(console.log(e),e.code){case 11e3:o.submitError=!0,o.errorMessage="Wybrany email jest już zarejestrowany. Proszę wybrać inny.";break;default:o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później."}}):(o.submitError=!0,o.errorMessage="Upss coś poszło nie tak. Proszę spróbować później.")},o.$watch("submitError",function(e){console.log(e)})}]),angular.module("app").controller("confirmationCtrl",["$q","$window","$location","$state","$cookies","$scope","$rootScope","AuthService","roomService",function(e,o,t,n,a,r,s,i,c){r.isSignedIn=!1,r.room=JSON.parse(a.get("room")),r.dateFrom=JSON.parse(a.get("dates")).dateFrom,r.dateTo=JSON.parse(a.get("dates")).dateTo,r.extras=JSON.parse(a.get("extras")).extras,r.numOfDays=JSON.parse(a.get("extras")).numOfDays;var u=function(){i.isAuthenticated?r.isSignedIn=!0:r.isSignedIn=!1};r.reserve=function(){1!=r.terms?alert("Przed potwierdzeniem rezerwacji należy zaakceptowaćregulamin."):c.bookRoom({id:r.room._id,from:r.dateFrom,to:r.dateTo,price:l(),extras:r.extras}).then(function(){n.go("successfulBooking")},function(e){})},r.toPrevious=function(){n.go("offer")};var l=function(){var e=0;return e=r.room.price*r.numOfDays,r.extras.forEach(function(o){e+=o.price*r.numOfDays}),e};u()}]),angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,n){n.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}).directive("userInfo",function(){return{template:"<p>sialala</p>"}}).directive("vouchercheck",["voucherService",function(e){return{require:"ngModel",link:function(e,o,t,n){function a(e){return 23==e.length&&"-"==e.charAt(5)&&e.charAt(11)&&e.charAt(17)?n.$setValidity("validVoucher",!0):n.$setValidity("validVoucher",!1),e}n.$parsers.push(a)}}}]),angular.module("app").controller("offerCtrl",["$scope","$cookies","$state","$location","$window","offerSvc",function(e,o,t,n,a,r){e.offer={},e.extras=[],e.selectedExtras=[];var s={};e.dateFrom="",e.dateTo="",e.roomName="";var i=function(){e.offer=JSON.parse(o.get("room")),e.extras=u(),s=JSON.parse(o.get("dates")),e.dateFrom=c(new Date(s.dateFrom)),e.dateTo=c(new Date(s.dateTo)),e.roomName=e.offer.type,e.roomPrice=e.offer.price*l(),e.extrasTotalPrice=0},c=function(e){var o=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear();return""+o+"-"+t+"-"+n};e.addOrRemoveExtra=function(o){var t=e.selectedExtras.indexOf(o);o.buttonText=o.buttonToggle?"Dodaj +":"Usuń -",o.buttonToggle=!o.buttonToggle,t==-1?(e.selectedExtras.push(o),e.extrasTotalPrice+=o.price*l()):(e.selectedExtras.splice(t,1),e.extrasTotalPrice-=o.price*l())},e.toConfirmation=function(){console.log("asdasd");var n={extras:e.selectedExtras,numOfDays:l()};o.put("extras",JSON.stringify(n)),t.go("confirmation")},e.toPrevious=function(){t.go("home")};var u=function(){r.getExtras().then(function(o){e.extras=o;for(var t=0;t<e.extras.length;t++)e.extras[t].buttonText="Dodaj +",e.extras[t].buttonToggle=!1})},l=function(){var e=864e5,o=new Date(s.dateFrom),t=new Date(s.dateTo),n=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/e)};i()}]),angular.module("app").controller("roomCtrl",["$q","$cookies","$scope","$window","$location","roomService","offerSvc","$filter","$state",function(e,o,t,n,a,r,s,i,c){t.dateFrom="",t.dateTo="",t.noRoomsError=!1,t.errorMsg="",t.rooms=[],t.numberOfBeds=1,t.successfulCancel=!1,t.totalPrice=0,t.extras=[],t.selectedExtras=[],t.extrasTotalPrice=0,t.selectOrAddUser=void 0,t.select=function(e){t.selectedRoom=e};var u=function(){var e=new Date;console.log(e),t.dateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.dateTo=o};t.init=function(){u(),t.findRooms()},t.findRooms=function(){if(t.dateTo.getMonth()<=t.dateFrom.getMonth()&&t.dateTo.getDate()<=t.dateFrom.getDate()){var e=t.dateFrom;e.setDate(e.getDate()+1),t.dateTo=e}r.getRooms({from:t.dateFrom.toISOString(),to:t.dateTo.toISOString(),beds:t.numberOfBeds}).then(function(e){e.length>0?(t.rooms=e,t.noRoomsError=!1):t.noRoomsError=!0},function(e){t.noRoomsError=!0,t.errorMsg="Coś poszło nie tak."})},t.addRoom=function(e){o.put("room",JSON.stringify(e)),o.put("dates",JSON.stringify({dateFrom:t.dateFrom,dateTo:t.dateTo})),s.chooseRoom(e),c.go("offer")},t.test=function(){console.log(t.rooms),t.findRooms()},t.getAllRooms=function(){r.getAllRooms().then(function(e){t.allRooms=e,console.log(e)},function(e){})},t.getAvailability=function(e){for(var o=(new Date,new Date(t.roomDateFrom)),n=new Date(t.roomDateTo),a=0;a<e.length;a++){var r=new Date(e[a].from),s=new Date(e[a].to);if(o<s&&n>r)return"notAvailable"}return"available"},t.managmentInit=function(){var e=new Date;t.roomDateFrom=e;var o=new Date;o.setDate(o.getDate()+1),t.roomDateTo=o,t.getAllRooms()},t.toBookings=function(e){o.put("selectedRoom",JSON.stringify(e)),$("#regulamin").modal("hide"),setTimeout(function(){c.go("managment-bookings")},500)},t.getSelectedRoom=function(){t.selectedRoom=JSON.parse(o.get("selectedRoom"))},t.checkDate=function(e){var o=new Date,t=new Date(e);return t>o},t.cancelBooking=function(e,o){console.log("room id to:"+e+", booking_id to:"+o),r.cancelBooking(e,o).then(function(e){console.log("udało się anulować"),c.reload()})},t.getRoomBookings=function(){t.getSelectedRoom(),r.getRoomBookings(t.selectedRoom._id).then(function(e){t.bookings=e.reservations})},t.selectUser=function(e){r.getUserInfo(e).then(function(e){t.selectedUser=e,console.log(t.selectedUser)})},t.toBooking=function(e,t,n){o.put("booking",JSON.stringify({room:e,dateFrom:t,dateTo:n})),$("#regulamin").modal("hide"),setTimeout(function(){c.go("test")},500)},t.initBooking=function(){t.booking=JSON.parse(o.get("booking")),t.test.dateFrom=new Date(t.booking.dateFrom),t.test.dateTo=new Date(t.booking.dateTo),t.calculateTotalPrice(),d(),r.getUsers().then(function(e){t.users=JSON.parse(JSON.stringify(e))})},t.submitBookForm=function(){var e=null;if(t.selectOrAddUser){if(void 0==t.test.email)var e={email:""+t.test.firstName+t.test.lastName+t.test.phone,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};else var e={email:t.test.email,firstName:t.test.firstName,lastName:t.test.lastName,phone:t.test.phone};r.signupAndBook(e,t.booking.room._id,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})}else e=JSON.parse(t.selectedUserBooking),console.log("RoomCtrl, funkcja submitBookForm, dataOd: "+t.test.dateFrom),r.adminBook(t.booking.room._id,e.email,{dateFrom:t.test.dateFrom,dateTo:t.test.dateTo},t.totalPrice,t.selectedExtras).then(function(e){console.log(e)})};var l=function(){var e=864e5,o=new Date(t.test.dateFrom),n=new Date(t.test.dateTo),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((r-a)/e)};t.calculateTotalPrice=function(){t.totalPrice=l()*t.booking.room.price+t.extrasTotalPrice};var d=function(){s.getExtras().then(function(e){t.extras=e;for(var o=0;o<t.extras.length;o++)t.extras[o].buttonText="Dodaj +",t.extras[o].buttonToggle=!1})};t.addOrRemoveExtra=function(e){var o=t.selectedExtras.indexOf(e);e.buttonText=e.buttonToggle?"Dodaj +":"Usuń -",e.buttonToggle=!e.buttonToggle,t.totalPrice=0,o==-1?(t.selectedExtras.push(e),t.extrasTotalPrice+=e.price*l()):(t.selectedExtras.splice(o,1),t.extrasTotalPrice-=e.price*l()),t.calculateTotalPrice()},t.paidClass=function(e){return e?"btn-success":"btn-warning"},t.pay=function(e){r.pay(e._id,!e.paid).then(function(o){console.log(o),e.paid=!e.paid})}}]),angular.module("app").controller("voucherCtrl",["$scope","voucherService",function(e,o){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){for(var o="",n=0;n<e.length;n++){if(!t(e.charAt(n)))return o=Number(o);o+=e.charAt(n)}return o=Number(o)}e.generateVouchers=function(){e.vouchers={codes:[]};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.voucherExpiryDate;if(t<new Date)e.voucherError="Data wygaśnięcia nie może być z przeszłości",e.vouchersGenerated=!1,e.generatedVouchers={};else{for(e.voucherError=void 0;e.vouchers.codes.length<e.numberOfVouchers;){for(var a="",r=0;r<4;r++){for(var s=0;s<5;s++)a+=o.charAt(Math.floor(Math.random()*o.length));3!=r&&(a+="-")}e.vouchers.codes.push(a)}var i=e.discount.charAt(e.discount.length-1);"%"===i?e.vouchers.discountType="%":"ł"===i&&"z"===e.discount.charAt(e.discount.length-2)&&(e.vouchers.discountType="zl"),e.vouchers.discount=n(e.discount),e.vouchers.type=e.voucherType,e.vouchers.expiryDate=t,e.generatedVouchers=e.vouchers.codes,e.vouchersGenerated=!0,e.vouchersSaved=!1}},e.saveVouchers=function(){console.log(e.vouchers),o.saveVouchers(e.vouchers).then(function(e){}),e.vouchersSaved=!0},e.checkVoucher=function(){console.log(e.voucher),o.checkVoucher(e.voucher.toString()).then(function(o){console.log(o),e.voucherNotFound=void 0,e.voucherFound="Kod poprawny zniżka "+o.discount+o.discountType,console.log(o.discount)},function(o){console.log(o),e.voucherNotFound=o,e.voucherFound=void 0})},e.codeChanged=function(){e.bookingFrm.$valid||(e.voucherFound=void 0,e.voucherNotFound=void 0)}}]),angular.module("app").filter("uniqueCategories",function(){return function(e,o){if(angular.isArray(e)){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a][o];angular.isUndefined(n[r])&&(n[r]=!0,t.push(e[a]))}return t}return e}}),angular.module("app").service("AuthService",["$http","$q",function(e,o,t){function n(){var e=window.localStorage.getItem(c);console.log("loading User info..."),e&&s(e)}function a(){i=void 0,u=!1,e.defaults.headers.common.Authorization=void 0,window.localStorage.removeItem(c)}function r(e){window.localStorage.setItem(c,e),s(e)}function s(o){u=!0,i=o,e.defaults.headers.common.Authorization=i}var i,c="token",u=!1,l=function(t){return o(function(o,n){e.post("/api/authenticate",t).then(function(e){e.data.success?(r(e.data.token),o(e.data.msg,e.data.success)):n(e.data.msg,e.data.success)})})},d=function(){a()},g=function(t){return o(function(o,n){e.post("/api/signup",t).then(function(e){e.data.success?(console.log("jestem w resolve"),o(e.data.msg)):n(e.data.msg)})})};n();var f=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phone:e.data.phone,role:e.data.role}):t(e.data.msg)})})},m=function(){return o(function(o,t){e.get("/api/getUserBookings").then(function(e){o(e.data)})})},p=function(t){return o(function(o,a){e.post("/api/test",t).then(function(s){s.data.success?(console.log("hello"),e.post("/api/getNewToken",{email:t.email}).then(function(e){e.data.success?(console.log("result2 success"),r(e.data.token),n()):console.log("error nowego tokena")}),o({success:!0,msg:"Pomyślnie zmieniono dane"})):a({success:!1,msg:"coś poszło nie tak"})})})},h=function(t,n){return o(function(o,a){e.post("/api/change-password",{oldPass:t,newPass:n}).then(function(e){e.data.success?o({msg:"pomyślnie zmieniono haslo"}):a({msg:e.data.error})})})},v=function(){return o(function(o,t){e.get("/api/userinfo").then(function(e){e.data.success?o({role:e.data.role}):t(e.data.msg)})})};return{signin:l,signout:d,signup:g,getUserInfo:f,getUserBookings:m,changeUserDetails:p,changePassword:h,getUserRole:v,isAuthenticated:u}}]),angular.module("app").service("offerSvc",["$q","$http",function(e,o){var t=function(e){choosenRoom=e},n=function(){return choosenRoom},a=function(){return e(function(e,t){o.get("/api/getExtras").then(function(o){o.data.success?e(o.data.extras):t(o.data.error)})})};return{chooseRoom:t,getRoom:n,getExtras:a}}]),angular.module("app").service("roomService",["$q","$http",function(e,o){var t=function(t){return e(function(e,n){o.post("/api/findRooms",t).then(function(o){o.data.success?(console.log("Pobrano pokoje"),e(o.data.rooms)):n(o.data.error)})})},n=function(t){return e(function(e,n){o.post("/api/reserve",t).then(function(o){o.data.success?e(o.data.success):n(o.data.error)})})},a=function(t,n){return e(function(e,a){console.log("jetem przed post cancel"),o.post("/api/cancelBooking",{room_id:t,booking_id:n}).then(function(o){o.data.success?(console.log("resolve cancel"),e(o.data.success)):(console.log("reject cancel"),a(o.data.error))})})},r=function(){return e(function(e,t){o.get("/api/getRooms").then(function(o){o.data.success?e(o.data.result):t(o.data.error)})})},s=function(t){return e(function(e,n){o.post("/api/getRoomBookings",{room_id:t}).then(function(o){console.log(o.data[0].reservations),e(o.data[0])},function(e){n(e.data)})})},i=function(t){return e(function(e,n){o.post("/api/getUserInfo",{email:t}).then(function(o){o.data.error?n(o.data):e(o.data)},function(e){n(e.data)})})},c=function(t,n,a,r,s){return console.log(s),e(function(e,i){o.post("/api/signupAndBook",{firstName:t.firstName,lastName:t.lastName,email:t.email,number:t.phone,id:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(e){console.log(e)},function(e){console.log("nie udało się")})})},u=function(t,n,a,r,s){return console.log("Serwis: roomSvc, funkcja: adminBook | id:"+t+", email: "+n),e(function(e,i){o.post("/api/adminBook",{id:t,email:n,from:a.dateFrom,to:a.dateTo,price:r,extras:s}).then(function(o){o.data.success?e("OK"):i("Wystąpił błąd podczas rezerwacji")},function(e){i("Wystąpił błąd podczas rezerwacji")})})},l=function(){return e(function(e,t){o.get("/api/getUsers").then(function(o){(o.data.success=!1)?t("Nie znaleziono użytkowników"):e(o.data)},function(e){t("Nie znaleziono użytkowników")})})},d=function(t,n){return e(function(e,a){o.post("/api/paid",{id:t,pay:n}).then(function(o){o.data.success?e(!0):a(!1)})})};return{getRooms:t,getAllRooms:r,bookRoom:n,cancelBooking:a,getRoomBookings:s,getUserInfo:i,signupAndBook:c,adminBook:u,getUsers:l,pay:d}}]),angular.module("app").service("voucherService",["$q","$http",function(e,o){var t=function(t){return console.log(t),e(function(e,n){o.post("/api/saveVouchers",t).then(function(o){o.data.success?e(o.data.msg):n(o.data.msg)},function(e){n(e.data.msg)})})},n=function(t){return e(function(e,n){o.post("/api/checkVoucher",{voucherCode:t}).then(function(o){o.data.success?e(o.data.voucher):n(o.data.error)})})};return{saveVouchers:t,checkVoucher:n}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvYXV0aG9yaXphdGlvbi5qcyIsImNvbnRyb2xsZXJzL2NvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9kaXJlY3RpdmVzLmpzIiwiY29udHJvbGxlcnMvb2ZmZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcm9vbUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy92b3VjaGVyQ29udHJvbGxlci5qcyIsImZpbGx0ZXJzL3Jvb21GaWx0ZXIuanMiLCJzZXJ2aWNlcy9hdXRob3JpemF0aW9uLnN2Yy5qcyIsInNlcnZpY2VzL29mZmVyLnN2Yy5qcyIsInNlcnZpY2VzL3Jvb20uc3ZjLmpzIiwic2VydmljZXMvdm91Y2hlci5zdmMuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImhlYWRlcnMiLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJHNjb3BlIiwiQXV0aFNlcnZpY2UiLCJyb29tU2VydmljZSIsInJlZ2V4IiwiaXNBY3RpdmUiLCJ2aWV3TG9jYXRpb24iLCIkbG9jYXRpb24iLCJwYXRoIiwiY2hhbmdlVXNlckRldGFpbHMiLCJpc1ZhbGlkIiwiZk5hbWUiLCJsTmFtZSIsIm5FbWFpbCIsIm5QaG9uZSIsIm5ld0RldGFpbHMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJ0aGVuIiwiYSIsInJlbG9hZCIsImNhbmNlbEJvb2tpbmciLCJyb29tX2lkIiwiYm9va2luZ19pZCIsImNvbnNvbGUiLCJsb2ciLCJnZXRVc2VyQm9va2luZ3MiLCJtc2ciLCJ1c2VyQm9va2luZ3MiLCJnZXRJbmZvIiwiZ2V0VXNlckluZm8iLCJ1c2VyIiwicGhvbmUiLCJjaGFuZ2VQYXNzd29yZCIsInZhbGlkIiwib2xkUCIsIm5ld1AiLCJyZXMiLCJzdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UiLCJyZWoiLCJ3cm9uZ1Bhc3N3b3JkIiwiY2hlY2tEYXRlIiwiZGF0ZSIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRhdGVGcm9tIiwiJHEiLCIkcm91dGUiLCJzdWJtaXRFcnJvciIsImVycm9yTWVzc2FnZSIsImlzTG9nZ2VkSW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJnZXRVc2VyUm9sZSIsInJlc3VsdCIsInJvbGUiLCJzaWduaW4iLCJzdWNjZXNzIiwiaXNMb2dlZEluIiwibG9jYXRpb24iLCJzaWdub3V0IiwiZ28iLCJ1c2VyaW5mbyIsInN1Ym1pdEZvcm0iLCJzaWdudXAiLCJkYXRhIiwidG9TdHJpbmciLCJjb2RlIiwiJHdhdGNoIiwiJGNvb2tpZXMiLCJpc1NpZ25lZEluIiwicm9vbSIsIkpTT04iLCJwYXJzZSIsImdldCIsImRhdGVUbyIsImV4dHJhcyIsIm51bU9mRGF5cyIsImluaXQiLCJyZXNlcnZlIiwidGVybXMiLCJhbGVydCIsImJvb2tSb29tIiwiaWQiLCJfaWQiLCJmcm9tIiwidG8iLCJwcmljZSIsImNhbGN1bGF0ZVRvdGFsUHJpY2UiLCJlcnJvciIsInRvUHJldmlvdXMiLCJ0b3RhbCIsImZvckVhY2giLCJlIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwib3RoZXJNb2RlbFZhbHVlIiwibGluayIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibmdNb2RlbCIsIiR2YWxpZGF0b3JzIiwiY29tcGFyZVRvIiwibW9kZWxWYWx1ZSIsIiR2YWxpZGF0ZSIsInRlbXBsYXRlIiwidm91Y2hlclNlcnZpY2UiLCJhdHRyIiwibUN0cmwiLCJ2YWxpZGF0aW9uIiwidm91Y2hlciIsImxlbmd0aCIsImNoYXJBdCIsIiRzZXRWYWxpZGl0eSIsIiRwYXJzZXJzIiwicHVzaCIsIm9mZmVyU3ZjIiwib2ZmZXIiLCJzZWxlY3RlZEV4dHJhcyIsImRhdGVzIiwicm9vbU5hbWUiLCJzaG93T2ZmZXIiLCJnZXRFeHRyYXMiLCJkYXRlUHJlZXRpZnkiLCJ0eXBlIiwicm9vbVByaWNlIiwiY2FsY3VsYXRlRGlmZk9mRGF5cyIsImV4dHJhc1RvdGFsUHJpY2UiLCJkYXkiLCJnZXRVVENEYXRlIiwibW9udGgiLCJnZXRVVENNb250aCIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsImFkZE9yUmVtb3ZlRXh0cmEiLCJleHRyYSIsImluZGV4IiwiaW5kZXhPZiIsImJ1dHRvblRleHQiLCJidXR0b25Ub2dnbGUiLCJzcGxpY2UiLCJ0b0NvbmZpcm1hdGlvbiIsInB1dCIsInN0cmluZ2lmeSIsImV4dHJhc0RhdGEiLCJpIiwiTVNfUEVSX0RBWSIsImRhdGVGcm9tVVRDIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkYXRlVG9VVEMiLCJNYXRoIiwiZmxvb3IiLCIkZmlsdGVyIiwibm9Sb29tc0Vycm9yIiwiZXJyb3JNc2ciLCJyb29tcyIsIm51bWJlck9mQmVkcyIsInN1Y2Nlc3NmdWxDYW5jZWwiLCJ0b3RhbFByaWNlIiwic2VsZWN0T3JBZGRVc2VyIiwidW5kZWZpbmVkIiwic2VsZWN0Iiwic2VsZWN0ZWRSb29tIiwic2V0RGF0ZSIsImRhdGVUZW1wIiwiZmluZFJvb21zIiwiZ2V0Um9vbXMiLCJ0b0lTT1N0cmluZyIsImJlZHMiLCJyb29tc0RhdGEiLCJhZGRSb29tIiwiY2hvb3NlUm9vbSIsInRlc3QiLCJnZXRBbGxSb29tcyIsImFsbFJvb21zIiwiZ2V0QXZhaWxhYmlsaXR5IiwicmVzZXJ2YXRpb25zIiwicm9vbURhdGVGcm9tIiwicm9vbURhdGVUbyIsIm1hbmFnbWVudEluaXQiLCJ0b0Jvb2tpbmdzIiwiJCIsIm1vZGFsIiwic2V0VGltZW91dCIsImdldFNlbGVjdGVkUm9vbSIsImdldFJvb21Cb29raW5ncyIsImIiLCJib29raW5ncyIsInNlbGVjdFVzZXIiLCJ1Iiwic2VsZWN0ZWRVc2VyIiwidG9Cb29raW5nIiwiaW5pdEJvb2tpbmciLCJib29raW5nIiwiZ2V0VXNlcnMiLCJ1c2VycyIsInN1Ym1pdEJvb2tGb3JtIiwic2lnbnVwQW5kQm9vayIsInNlbGVjdGVkVXNlckJvb2tpbmciLCJhZG1pbkJvb2siLCJwYWlkQ2xhc3MiLCJwYWlkIiwicGF5IiwiaXNOdW1lcmljIiwibiIsImlzTmFOIiwicGFyc2VGbG9hdCIsImlzRmluaXRlIiwiY29udmVydFRvTnVtYmVyIiwiZGlzY291bnQiLCJOdW1iZXIiLCJnZW5lcmF0ZVZvdWNoZXJzIiwidm91Y2hlcnMiLCJjb2RlcyIsInBvc3NpYmxlIiwiZXhwaXJ5RGF0ZSIsInZvdWNoZXJFeHBpcnlEYXRlIiwidm91Y2hlckVycm9yIiwidm91Y2hlcnNHZW5lcmF0ZWQiLCJnZW5lcmF0ZWRWb3VjaGVycyIsIm51bWJlck9mVm91Y2hlcnMiLCJqIiwicmFuZG9tIiwibGFzdCIsImRpc2NvdW50VHlwZSIsInZvdWNoZXJUeXBlIiwidm91Y2hlcnNTYXZlZCIsInNhdmVWb3VjaGVycyIsImNoZWNrVm91Y2hlciIsInZvdWNoZXJOb3RGb3VuZCIsInZvdWNoZXJGb3VuZCIsImNvZGVDaGFuZ2VkIiwiYm9va2luZ0ZybSIsIiR2YWxpZCIsImZpbHRlciIsInByb3BlcnR5TmFtZSIsImlzQXJyYXkiLCJrZXlzIiwidmFsIiwiaXNVbmRlZmluZWQiLCJzZXJ2aWNlIiwiJGh0dHAiLCJsb2FkVXNlckluZm8iLCJ3aW5kb3ciLCJnZXRJdGVtIiwiTE9DQUxfVE9LRU4iLCJ1c2VySW5mbyIsImRlc3Ryb3lVc2VySW5mbyIsImF1dGhUb2tlbiIsImRlZmF1bHRzIiwiY29tbW9uIiwicmVtb3ZlSXRlbSIsInN0b3JlVXNlckluZm8iLCJzZXRJdGVtIiwicmVzb2x2ZSIsInJlamVjdCIsInBvc3QiLCJyZXN1bHQyIiwib2xkUGFzcyIsIm5ld1Bhc3MiLCJjaG9vc2VuUm9vbSIsImdldFJvb20iLCJudW1iZXIiLCJyZXNlcnZhdGlvbl9pZCIsInZvdWNoZXJDb2RlIl0sIm1hcHBpbmdzIjoiQUFHQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQUEsVUFBQSxZQUFBLGFDQUFELFNBQUFDLE9BQUEsT0FDQUMsUUFBQSxtQkFBQSxVQUFBLFNBQUFDLEdBQ0EsT0FDQUMsUUFBQSxTQUFBQyxHQU1BLE1BTEFBLEdBQUFDLFFBQUFELEVBQUFDLFlBQ0FILEVBQUFJLGFBQUFDLFFBQ0FILEVBQUFDLFFBQUEsY0FBQUgsRUFBQUksYUFBQUMsT0FHQUgsT0FLQUEsUUFBQSxpQkFBQSxxQkFBQSxTQUFBSSxFQUFBQyxHQUNBRCxFQUNBRSxNQUFBLFFBQ0FDLElBQUEsUUFDQUMsV0FBQSxXQUNBQyxZQUFBLFNBRUFILE1BQUEsU0FDQUMsSUFBQSxTQUNBRSxZQUFBLFVBRUFILE1BQUEsY0FDQUMsSUFBQSxjQUNBRSxZQUFBLGVBRUFILE1BQUEsV0FDQUMsSUFBQSxXQUNBRSxZQUFBLFlBRUFILE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxXQUFBLFlBQ0FDLFlBQUEsVUFFQUgsTUFBQSxnQkFDQUMsSUFBQSxnQkFDQUUsWUFBQSxpQkFFQUgsTUFBQSxxQkFDQUMsSUFBQSxxQkFDQUUsWUFBQSxzQkFFQUgsTUFBQSxvQkFDQUMsSUFBQSxvQkFDQUUsWUFBQSxxQkFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FFLFlBQUEsWUFFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FFLFlBQUEsV0FFQUgsTUFBQSxVQUNBQyxJQUFBLFVBQ0FFLFlBQUEsV0FFQUgsTUFBQSxvQkFDQUMsSUFBQSxZQUNBRSxZQUFBLGFBRUFILE1BQUEsbUJBQ0FDLElBQUEsV0FDQUUsWUFBQSxZQUVBSCxNQUFBLDBCQUNBQyxJQUFBLGtCQUNBRSxZQUFBLG1CQUVBSCxNQUFBLGFBQ0FDLElBQUEsYUFDQUUsWUFBQSxjQUVBSCxNQUFBLG1CQUNBQyxJQUFBLG1C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b250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAyMi4wOS4yMDE2LlxyXG4gKi9cclxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnLCAndWkucm91dGVyJywgJ25nQ29va2llcyddKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxMS4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgZnVuY3Rpb24gKCR3aW5kb3cpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgICAgICAgICBpZigkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbil7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2hvbWUnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYWluJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyb29tQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21haW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncm9vbXMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9yb29tcycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Jvb21zJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Jlc3RhdXJhbnQnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9yZXN0YXVyYW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncmVzdGF1cmFudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250YWN0Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY29udGFjdCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRhY3QnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnb2ZmZXInLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9vZmZlcicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnb2ZmZXJDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnb2ZmZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29uZmlybWF0aW9uJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY29uZmlybWF0aW9uJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29uZmlybWF0aW9uJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N1Y2Nlc3NmdWxCb29raW5nJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VjY2Vzc2Z1bEJvb2tpbmcnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzdWNjZXNzZnVsU2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VjY2Vzc2Z1bFNpZ251cCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3NmdWxTaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FjY291bnQnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhY2NvdW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ25pbicse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NpZ25pbicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ25pbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdzaWdudXAnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5ib29raW5ncycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2Jvb2tpbmdzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYm9va2luZ3MnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5kZXRhaWxzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2RldGFpbHMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudC5jaGFuZ2VQYXNzd29yZCcse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NoYW5nZVBhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2hhbmdlUGFzc3dvcmQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50Jyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC5yb29tcycse1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL21hbmFnbWVudC1yb29tcycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21hbmFnbWVudC1yb29tcydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdtYW5hZ21lbnQudXNlcnMnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtdXNlcnMnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtYW5hZ21lbnQtdXNlcnMnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbWFuYWdtZW50LnZvdWNoZXJzJyx7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFuYWdtZW50LXZvdWNoZXJzJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWFuYWdtZW50LXZvdWNoZXJzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ21hbmFnbWVudC1ib29raW5ncycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9tYW5hZ21lbnQtYm9va2luZ3MnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvbWFuYWdtZW50LWJvb2tpbmdzJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Rlc3QnLHtcclxuICAgICAgICAgICAgICAgIHVybDogJy90ZXN0JyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVzdCdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9tYWluJylcclxuICAgIH0pXHJcbiAgICAucnVuKFsnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xyXG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlUGFyYW1zID0gJHN0YXRlUGFyYW1zO1xyXG5cclxuICAgIH1dKTtcclxuICAgIC8qXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC53aGVuKCcvJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvbWFpbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zaWdudXAnLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zaWdudXAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbmluJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zaWduaW4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvdXNlcmluZm8nLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy91c2VyaW5mbydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zdWNjZXNzZnVsU2lnbnVwJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdWNjZXNzZnVsU2lnbnVwJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL29mZmVyJyx7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9vZmZlcidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9jb25maXJtYXRpb24nLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oJy9zdWNjZXNzZnVsQm9va2luZycse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3VjY2Vzc2Z1bEJvb2tpbmcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vdGhlcndpc2UoJy8nKTtcclxuICAgIH0pO1xyXG4qL1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDE0LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdhY2NDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBBdXRoU2VydmljZSwgcm9vbVNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJyhcXFxcK1swLTldXFxcXGR7MX0pKihcXFxccykqKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSkoXFxcXHMqKShbMC05XVxcXFxkezJ9KSc7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAodmlld0xvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2aWV3TG9jYXRpb24gPT09ICRsb2NhdGlvbi5wYXRoKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuY2hhbmdlVXNlckRldGFpbHMgPSBmdW5jdGlvbihpc1ZhbGlkLCBmTmFtZSwgbE5hbWUsIG5FbWFpbCwgblBob25lKXtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3RGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogbkVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBuUGhvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jaGFuZ2VVc2VyRGV0YWlscyhuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vVE9ETyBwcnp5Y2lzayBhbnVsb3dhbmlhIHR5bGtvIGRsYSBwb2tvaSwga3TDs3J5Y2ggZGF0YSBuYSB0byBwb3p3YWxhXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbEJvb2tpbmcgPSBmdW5jdGlvbiAocm9vbV9pZCwgYm9va2luZ19pZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJvb20gaWQgdG86XCIrcm9vbV9pZCtcIiwgYm9va2luZ19pZCB0bzpcIitib29raW5nX2lkKTtcclxuXHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmNhbmNlbEJvb2tpbmcocm9vbV9pZCwgYm9va2luZ19pZCkudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VkYcWCbyBzacSZIGFudWxvd2HEhycpO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJCb29raW5ncygpLnRoZW4oZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VyQm9va2luZ3MgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0SW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maXJzdE5hbWUgPSB1c2VyLmZpcnN0TmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sYXN0TmFtZSA9IHVzZXIubGFzdE5hbWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBob25lID0gdXNlci5waG9uZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8gdXN0YXdpYyBwYXNzeSBuYSB6ZXJvIHBvIMW8xIVkYW5pdSBoaHRwXHJcbiAgICAgICAgJHNjb3BlLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKHZhbGlkLG9sZFAsIG5ld1ApIHtcclxuICAgICAgICAgICAgaWYodmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY2hhbmdlUGFzc3dvcmQob2xkUCwgbmV3UCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLm1zZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWNjZXNzZnVsUGFzc3dvcmRDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLndyb25nUGFzc3dvcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja0RhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVGcm9tID4gY3VycmVudERhdGU7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGdldEluZm8oKTtcclxuICAgICAgICBnZXRVc2VyQm9va2luZ3MoKTtcclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignYXV0aEN0cmwnLCBmdW5jdGlvbiAoJHEsICRzY29wZSwgJHN0YXRlLCAkd2luZG93LCAkbG9jYXRpb24sICRyb3V0ZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2UpIHtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5yZWdleCA9ICcoXFxcXCtbMC05XVxcXFxkezF9KSooXFxcXHMpKihbMC05XVxcXFxkezJ9KShcXFxccyopKFswLTldXFxcXGR7Mn0pKFxcXFxzKikoWzAtOV1cXFxcZHsyfSknO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJyc7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBpZigkcm9vdFNjb3BlLmlzTG9nZ2VkSW4oKSkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VyUm9sZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5yb2xlID0gcmVzdWx0LnJvbGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBcclxuICAgICAgICAkc2NvcGUuc2lnbmluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW4nKTtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2Uuc2lnbmluKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChtc2csIHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dlZEluID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5yb2xlID0gcmVzdWx0LnJvbGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmPScjLyc7XHJcbiAgICAgICAgICAgICAgICAvLyRzdGF0ZS5nbygnaG9tZScpO1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNpZ25vdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ25vdXQoKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2VkSW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAvL3N0YXRlLmdvKCdob21lJyk7XHJcbiAgICAgICAgICAgIC8vJHN0YXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9nb3V0Jyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VyaW5mbyA9IG1zZztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLy9UT0RPIHN0YXRlLnJlbG9hZFxyXG4gICAgICAgICRzY29wZS5zdWJtaXRGb3JtID0gZnVuY3Rpb24gKGlzVmFsaWQpIHtcclxuICAgICAgICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5zaWdudXAoJHNjb3BlLnVzZXIpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9tecWbbG5pZSB6YXJlamVzdHJvd2FubycpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLnNpZ25pbigkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAobXNnLCBzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dlZEluID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpID09ICdodHRwOi8vbG9jYWxob3N0OjMwMDEvIy9jb25maXJtYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdWNjZXNzZnVsU2lnbnVwJykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvc3VjY2Vzc2Z1bFNpZ251cCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZGF0YS5jb2RlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTAwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1d5YnJhbnkgZW1haWwgamVzdCBqdcW8IHphcmVqZXN0cm93YW55LiBQcm9zesSZIHd5YnJhxIcgaW5ueS4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdVcHNzIGNvxZsgcG9zesWCbyBuaWUgdGFrLiBQcm9zesSZIHNwcsOzYm93YcSHIHDDs8W6bmllai4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnVXBzcyBjb8WbIHBvc3rFgm8gbmllIHRhay4gUHJvc3rEmSBzcHLDs2Jvd2HEhyBww7PFum5pZWouJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ3N1Ym1pdEVycm9yJywgZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvck1lc3NhZ2UpXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxMS4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignY29uZmlybWF0aW9uQ3RybCcsIGZ1bmN0aW9uICgkcSwgJHdpbmRvdywgJGxvY2F0aW9uLCAkc3RhdGUsICRjb29raWVzLCAkc2NvcGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlLCByb29tU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUuaXNTaWduZWRJbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAkc2NvcGUucm9vbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdyb29tJykpO1xyXG4gICAgICAgICRzY29wZS5kYXRlRnJvbSA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdkYXRlcycpKS5kYXRlRnJvbTtcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2RhdGVzJykpLmRhdGVUbztcclxuICAgICAgICAkc2NvcGUuZXh0cmFzID0gSlNPTi5wYXJzZSgkY29va2llcy5nZXQoJ2V4dHJhcycpKS5leHRyYXM7XHJcbiAgICAgICAgJHNjb3BlLm51bU9mRGF5cyA9IEpTT04ucGFyc2UoJGNvb2tpZXMuZ2V0KCdleHRyYXMnKSkubnVtT2ZEYXlzO1xyXG5cclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkID8gJHNjb3BlLmlzU2lnbmVkSW4gPSB0cnVlIDogJHNjb3BlLmlzU2lnbmVkSW4gPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAkc2NvcGUucmVzZXJ2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLnRlcm1zICE9IHRydWUpXHJcbiAgICAgICAgICAgICAgICBhbGVydCgnUHJ6ZWQgcG90d2llcmR6ZW5pZW0gcmV6ZXJ3YWNqaSBuYWxlxbx5IHphYWtjZXB0b3dhxIdyZWd1bGFtaW4uJyk7XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5ib29rUm9vbSh7aWQ6ICRzY29wZS5yb29tLl9pZCwgZnJvbTogJHNjb3BlLmRhdGVGcm9tLCB0bzogJHNjb3BlLmRhdGVUbywgcHJpY2U6IGNhbGN1bGF0ZVRvdGFsUHJpY2UoKSwgZXh0cmFzOiAkc2NvcGUuZXh0cmFzfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy9zdWNjZXNzZnVsQm9va2luZydcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdWNjZXNzZnVsQm9va2luZycpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETyB3ecWbd2lldGxlbmllIGVycnJvcmFcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvb2ZmZXInXHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWxjdWxhdGVUb3RhbFByaWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICB0b3RhbCA9ICgkc2NvcGUucm9vbS5wcmljZSAqICRzY29wZS5udW1PZkRheXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXh0cmFzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGUucHJpY2UgKiAkc2NvcGUubnVtT2ZEYXlzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL1RPRE8genJvYmllbmllIHJlamVzdHJhY2ppKG1vxbxlIHByemVuaWVzaWVuaWUgbmEgc2lnbnVwIHZpZXc/IGRvIHJvendhxbxlbmlhKSBpIG9ic8WCdWdhIGLFgsSZZMOzdyhtb8W8ZSBqYWtvxZsgcG/FgsSFY3p5xIcgb2J5ZHdhIGxvZ293YW5pYSBpIHJlamVzdHJhY2plIHcgamVkbm8/KVxyXG4gICAgICAgIC8vVE9ETyBPYnNsdWdhIGJsZWRvdyByZXplcndhY2ppXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgY3plZ29zIGRvIHdpZG9rdSByZXplcndhamNpXHJcbiAgICAgICAgLy9UT0RPIHBvdXPDs3dhxIcgamFraWXFmyBpbml0eSh3eXN0YWN6eSB3eW/FgmHEhyBmdW5rY2rEmSB3IGtvbnRyb2xlcnplIGx1YiBzcnYpXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgY2HFgmVqIG9ic8WCdWdpIGtvbnRhKHptaWFuYSBoYXPFgmEsIG51bWVydSB0ZWxlZm9udVtkb2RhbmllIGx1YiB6bWlhbmFdLCBwb2RnbMSFZHUgcmV6ZXJ3YWNqaSwgaXRwKSBvcmF6IG9ic8WCdWdpIGhvdGVsdShDUlVEIGRvZGF0a8OzdywgcG9rb2ppIGl0cCkuXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgbW/FvGUgamFracWbIHd5a3Jlc8OzdyBuYSB0ZW1hdCBvYmNpxIXFvGVuaWEgcG9rb2ppIGx1YiBqYWtpxZsgcHJ6eWNob2TDs3cgY3p5IGNvxZsgYWxibyBqYWllxZsgY2/FmyBkbyBnZW5lcm93YW5pZSBwZGYgeiByYXBvcnRlbVxyXG4gICAgICAgIC8vVE9ETyBwb3ptaWVuaWHEhyBzxYJvd2EgcmVzZXJ2YXRpb24gaXRwIG5hIGJvb2tpbmdcclxuICAgICAgICAvL1RPRE8ga29keSByYWJhdG93ZVxyXG4gICAgICAgIC8vVE9ETyBwb3dpYWRvbWllbmllIG8gY2lhc3RlY3prYWNoXHJcbiAgICAgICAgLy9UT0RPIGRvZGFuaWUgcG9kZ2zEhWR1IG9ixYJvxbxlbmlhIGhvdGVsdSBqYWsgdyBraW5pKDMgc3Rhbnk6IHdvbG55LCB6YXJlemVyd293YW55LCB6YWpldHkpXHJcbiAgICAgICAgLy9UT0RPIHpiYWRhbmllIGN6eSAucnVuIHN0YXRlUHJvdmlkZXJhIHBvY3plYm5lXHJcbiAgICAgICAgLy9UT0RPIHBvem5hbmllIHN0YXRlUHJvdmlkZXJhIGkgZG9kYW5pZSBuZXN0ZWQgdmlld3NcclxuICAgICAgICAvL1RPRE8gbmEgZ8WCw7N3bmVqIHN0cm9uaWUgenJvYmnEh8W8ZWJ5IGRhdGEgYnnFgsSFIGNvbmFqbW5pZWogamVkZW4gZHppZW4gcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vVE9ETyB6bWlhbmEgcmVnZXggbmEgcm9vdFNjb3BlIGplc2xpIG1vemxpd2VcclxuICAgICAgICAvL1RPRG8gZGF0YSByZXplcndhY2ppIHR5bGtvIG9kIGRhdHkgZHppc2llanN6ZWogKGJleiByZXplcndhY2ppIHcgcHJ6ZXN6xYJvxZtjaSlcclxuICAgICAgICAvL1RPRE8ga29udG9cclxuICAgICAgICAvL3ptaWFuYSBkYW55Y2hcclxuICAgICAgICAvL3ptaWFuYSBoYXPFgmFcclxuICAgICAgICAvL3pvYmFjemVuaWUgcmV6ZXJ3YWNqaVxyXG4gICAgICAgIC8vYW51bG93YW5pZSByZXplcndhY2ppXHJcbiAgICAgICAgLy9cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdjb21wYXJlVG8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogXCJuZ01vZGVsXCIsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBvdGhlck1vZGVsVmFsdWU6IFwiPWNvbXBhcmVUb1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzLCBuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdG9ycy5jb21wYXJlVG8gPSBmdW5jdGlvbihtb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUgPT0gc2NvcGUub3RoZXJNb2RlbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goXCJvdGhlck1vZGVsVmFsdWVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKCd1c2VySW5mbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHA+c2lhbGFsYTwvcD4nXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIC8qXHJcbiAgICAuZGlyZWN0aXZlKCdteURpcmVjdGl2ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG1DdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBteVZhbGlkYXRpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihcImVcIikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ2NoYXJFJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCdjaGFyRScsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbUN0cmwuJHBhcnNlcnMucHVzaChteVZhbGlkYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgKi9cclxuICAgIC5kaXJlY3RpdmUoJ3ZvdWNoZXJjaGVjaycsIGZ1bmN0aW9uICh2b3VjaGVyU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBtQ3RybCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGlvbih2b3VjaGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodm91Y2hlci5sZW5ndGggPT0gMjMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2b3VjaGVyLmNoYXJBdCg1KSA9PSAnLScgJiYgdm91Y2hlci5jaGFyQXQoMTEpICYmIHZvdWNoZXIuY2hhckF0KDE3KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbUN0cmwuJHNldFZhbGlkaXR5KCd2YWxpZFZvdWNoZXInLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1DdHJsLiRzZXRWYWxpZGl0eSgndmFsaWRWb3VjaGVyJywgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtQ3RybC4kc2V0VmFsaWRpdHkoJ3ZhbGlkVm91Y2hlcicsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm91Y2hlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1DdHJsLiRwYXJzZXJzLnB1c2godmFsaWRhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAwOC4xMS4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignb2ZmZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJGNvb2tpZXMsICRzdGF0ZSwgJGxvY2F0aW9uLCAkd2luZG93LCBvZmZlclN2Yykge1xyXG4gICAgICAgICRzY29wZS5vZmZlciA9IHt9O1xyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMgPSBbXTtcclxuICAgICAgICB2YXIgZGF0ZXMgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZGF0ZUZyb20gPSAnJztcclxuICAgICAgICAkc2NvcGUuZGF0ZVRvID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnJvb21OYW1lID0gJyc7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2hvd09mZmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUub2ZmZXIgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgncm9vbScpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGdldEV4dHJhcygpO1xyXG5cclxuICAgICAgICAgICAgZGF0ZXMgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnZGF0ZXMnKSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRlRnJvbSA9IGRhdGVQcmVldGlmeShuZXcgRGF0ZShkYXRlcy5kYXRlRnJvbSkpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVByZWV0aWZ5KG5ldyBEYXRlKGRhdGVzLmRhdGVUbykpO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnJvb21OYW1lID0gJHNjb3BlLm9mZmVyLnR5cGU7XHJcbiAgICAgICAgICAgICRzY29wZS5yb29tUHJpY2UgPSAkc2NvcGUub2ZmZXIucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGVQcmVldGlmeSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMTtcclxuICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAnJytkYXkrJy0nK21vbnRoKyctJyt5ZWFyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcblxyXG4gICAgICAgICAgICBpZihpbmRleCA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMucHVzaChleHRyYSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSArPSAoZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNUb3RhbFByaWNlIC09IChleHRyYS5wcmljZSAqIGNhbGN1bGF0ZURpZmZPZkRheXMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9Db25maXJtYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhc2Rhc2QnKTtcclxuICAgICAgICAgICAgdmFyIGV4dHJhcyA9IHtleHRyYXM6ICRzY29wZS5zZWxlY3RlZEV4dHJhcywgbnVtT2ZEYXlzOiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCl9O1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2V4dHJhcycsIEpTT04uc3RyaW5naWZ5KGV4dHJhcykpO1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL2NvbmZpcm1hdGlvbidcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb25maXJtYXRpb24nKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b1ByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL21haW4nXHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FsY3VsYXRlRGlmZk9mRGF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIE1TX1BFUl9EQVkgPSAxMDAwICogNjAgKiA2MCAqIDI0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSBuZXcgRGF0ZShkYXRlcy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVG8gPSBuZXcgRGF0ZShkYXRlcy5kYXRlVG8pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21VVEMgPSBEYXRlLlVUQyhkYXRlRnJvbS5nZXRGdWxsWWVhcigpLCBkYXRlRnJvbS5nZXRNb250aCgpLCBkYXRlRnJvbS5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvVVRDID0gRGF0ZS5VVEMoZGF0ZVRvLmdldEZ1bGxZZWFyKCksIGRhdGVUby5nZXRNb250aCgpLCBkYXRlVG8uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGRhdGVUb1VUQyAtIGRhdGVGcm9tVVRDKSAvIE1TX1BFUl9EQVkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNob3dPZmZlcigpO1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA2LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdyb29tQ3RybCcsIGZ1bmN0aW9uICgkcSwgJGNvb2tpZXMsICRzY29wZSwgJHdpbmRvdywgJGxvY2F0aW9uLCByb29tU2VydmljZSwgb2ZmZXJTdmMsJGZpbHRlciwgJHN0YXRlKSB7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLmRhdGVUbyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5ub1Jvb21zRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPScnO1xyXG4gICAgICAgICRzY29wZS5yb29tcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5udW1iZXJPZkJlZHMgPSAxO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3VjY2Vzc2Z1bENhbmNlbCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5leHRyYXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuZXh0cmFzVG90YWxQcmljZSA9IDA7XHJcblxyXG4gICAgICAgICRzY29wZS5zZWxlY3RPckFkZFVzZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICRzY29wZS5zZWxlY3QgPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRSb29tID0gcm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2V0RGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGU7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0ZVRvID0gZGF0ZVRlbXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldERhdGUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmRSb29tcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5maW5kUm9vbXMgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIG9nYXJuYWMgc2llIHogdHltIGJlZHMsIHd5c3p1a2l3YWMgcG9rb2plIG8gcG9kYW5laiBpbG9zY2kgb3NvYiBpIG5hendhYyB0byBqYWtvcyB3IGJhemllIG9zdGF0ZWN6bmllXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kYXRlVG8uZ2V0TW9udGgoKSA8PSAkc2NvcGUuZGF0ZUZyb20uZ2V0TW9udGgoKSAmJiAkc2NvcGUuZGF0ZVRvLmdldERhdGUoKSA8PSAkc2NvcGUuZGF0ZUZyb20uZ2V0RGF0ZSgpKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlID0gJHNjb3BlLmRhdGVGcm9tO1xyXG4gICAgICAgICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGVUbyA9IGRhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UuZ2V0Um9vbXMoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogJHNjb3BlLmRhdGVGcm9tLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB0bzogJHNjb3BlLmRhdGVUby50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgYmVkczogJHNjb3BlLm51bWJlck9mQmVkc1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyb29tc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJvb21zRGF0YS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yb29tcyA9IHJvb21zRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9Sb29tc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vUm9vbXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSAnQ2/FmyBwb3N6xYJvIG5pZSB0YWsuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkUm9vbSA9IGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgncm9vbScsIEpTT04uc3RyaW5naWZ5KHJvb20pKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdkYXRlcycsIEpTT04uc3RyaW5naWZ5KHtkYXRlRnJvbTogJHNjb3BlLmRhdGVGcm9tLCBkYXRlVG86ICRzY29wZS5kYXRlVG99KSk7XHJcbiAgICAgICAgICAgIG9mZmVyU3ZjLmNob29zZVJvb20ocm9vbSk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnb2ZmZXInKTtcclxuICAgICAgICAgICAgLy8kd2luZG93LmxvY2F0aW9uLmhyZWY9JyMvb2ZmZXInO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50ZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucm9vbXMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluZFJvb21zKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldEFsbFJvb21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRBbGxSb29tcygpLnRoZW4oZnVuY3Rpb24gKHJvb21zKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUm9vbXMgPSByb29tcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE8gb2JzxYJ1Z2EgZXJyb3JhXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5nZXRBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAocmVzZXJ2YXRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciByb29tRGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVGcm9tKTtcclxuICAgICAgICAgICAgdmFyIHJvb21EYXRlVG8gPSBuZXcgRGF0ZSgkc2NvcGUucm9vbURhdGVUbyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZXNlcnZhdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUocmVzZXJ2YXRpb25zW2ldLmZyb20pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUbyA9IG5ldyBEYXRlKHJlc2VydmF0aW9uc1tpXS50byk7XHJcbiAgICAgICAgICAgICAgICBpZihyb29tRGF0ZUZyb20gPCBkYXRlVG8gJiYgcm9vbURhdGVUbyA+IGRhdGVGcm9tKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vdEF2YWlsYWJsZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJ2F2YWlsYWJsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubWFuYWdtZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbURhdGVGcm9tID0gZGF0ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUZW1wID0gbmV3IERhdGU7XHJcbiAgICAgICAgICAgIGRhdGVUZW1wLnNldERhdGUoZGF0ZVRlbXAuZ2V0RGF0ZSgpKzEpO1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbURhdGVUbyA9IGRhdGVUZW1wO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUm9vbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmdzID0gZnVuY3Rpb24gKHJvb20pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdzZWxlY3RlZFJvb20nLCBKU09OLnN0cmluZ2lmeShyb29tKSk7XHJcbiAgICAgICAgICAgICQoJyNyZWd1bGFtaW4nKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ21hbmFnbWVudC1ib29raW5ncycpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRTZWxlY3RlZFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFJvb20gPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnc2VsZWN0ZWRSb29tJykpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlRnJvbSA+IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxCb29raW5nID0gZnVuY3Rpb24gKHJvb21faWQsIGJvb2tpbmdfaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tIGlkIHRvOlwiK3Jvb21faWQrXCIsIGJvb2tpbmdfaWQgdG86XCIrYm9va2luZ19pZCk7XHJcblxyXG4gICAgICAgICAgICByb29tU2VydmljZS5jYW5jZWxCb29raW5nKHJvb21faWQsIGJvb2tpbmdfaWQpLnRoZW4oZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZGHFgm8gc2nEmSBhbnVsb3dhxIcnKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0Um9vbUJvb2tpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2VsZWN0ZWRSb29tKCk7XHJcbiAgICAgICAgICAgIHJvb21TZXJ2aWNlLmdldFJvb21Cb29raW5ncygkc2NvcGUuc2VsZWN0ZWRSb29tLl9pZCkudGhlbihmdW5jdGlvbiAoYikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmdzID0gYi5yZXNlcnZhdGlvbnM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2VySW5mbyh1c2VyKS50aGVuKGZ1bmN0aW9uICh1KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyID0gdTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5zZWxlY3RlZFVzZXIpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50b0Jvb2tpbmcgPSBmdW5jdGlvbiAocm9vbSwgZGF0ZUZyb20sIGRhdGVUbykge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2Jvb2tpbmcnLCBKU09OLnN0cmluZ2lmeSh7cm9vbTogcm9vbSwgZGF0ZUZyb206IGRhdGVGcm9tLCBkYXRlVG86IGRhdGVUb30pKTtcclxuICAgICAgICAgICAgJCgnI3JlZ3VsYW1pbicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndGVzdCcpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pbml0Qm9va2luZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmJvb2tpbmcgPSBKU09OLnBhcnNlKCRjb29raWVzLmdldCgnYm9va2luZycpKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRlc3QuZGF0ZUZyb20gPSBuZXcgRGF0ZSgkc2NvcGUuYm9va2luZy5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgICRzY29wZS50ZXN0LmRhdGVUbyA9IG5ldyBEYXRlKCRzY29wZS5ib29raW5nLmRhdGVUbyk7XHJcbiAgICAgICAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbFByaWNlKCk7XHJcbiAgICAgICAgICAgIGdldEV4dHJhcygpO1xyXG4gICAgICAgICAgICByb29tU2VydmljZS5nZXRVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJzKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8vVE9ETyBkb2RhbmllIGRvZGF0a8OzdyBpIG9ibGljemVuaWUgY2VueVxyXG4gICAgICAgICRzY29wZS5zdWJtaXRCb29rRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpZigkc2NvcGUuc2VsZWN0T3JBZGRVc2VyKXtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS50ZXN0LmVtYWlsID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBcIlwiKyRzY29wZS50ZXN0LmZpcnN0TmFtZSskc2NvcGUudGVzdC5sYXN0TmFtZSskc2NvcGUudGVzdC5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUudGVzdC5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUudGVzdC5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICRzY29wZS50ZXN0LnBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudGVzdC5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUudGVzdC5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAkc2NvcGUudGVzdC5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICRzY29wZS50ZXN0LnBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJvb21TZXJ2aWNlLnNpZ251cEFuZEJvb2sodXNlciwgJHNjb3BlLmJvb2tpbmcucm9vbS5faWQsIHtkYXRlRnJvbTogJHNjb3BlLnRlc3QuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLnRlc3QuZGF0ZVRvfSwgJHNjb3BlLnRvdGFsUHJpY2UsICRzY29wZS5zZWxlY3RlZEV4dHJhcylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXNlciA9IEpTT04ucGFyc2UoJHNjb3BlLnNlbGVjdGVkVXNlckJvb2tpbmcpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSb29tQ3RybCwgZnVua2NqYSBzdWJtaXRCb29rRm9ybSwgZGF0YU9kOiBcIiskc2NvcGUudGVzdC5kYXRlRnJvbSk7XHJcbiAgICAgICAgICAgICAgICByb29tU2VydmljZS5hZG1pbkJvb2soJHNjb3BlLmJvb2tpbmcucm9vbS5faWQsIHVzZXIuZW1haWwgLHtkYXRlRnJvbTogJHNjb3BlLnRlc3QuZGF0ZUZyb20sIGRhdGVUbzogJHNjb3BlLnRlc3QuZGF0ZVRvfSwgJHNjb3BlLnRvdGFsUHJpY2UsICRzY29wZS5zZWxlY3RlZEV4dHJhcylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNhbGN1bGF0ZURpZmZPZkRheXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBNU19QRVJfREFZID0gMTAwMCAqIDYwICogNjAgKiAyNDtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gbmV3IERhdGUoJHNjb3BlLnRlc3QuZGF0ZUZyb20pO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVRvID0gbmV3IERhdGUoJHNjb3BlLnRlc3QuZGF0ZVRvKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tVVRDID0gRGF0ZS5VVEMoZGF0ZUZyb20uZ2V0RnVsbFllYXIoKSwgZGF0ZUZyb20uZ2V0TW9udGgoKSwgZGF0ZUZyb20uZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIGRhdGVUb1VUQyA9IERhdGUuVVRDKGRhdGVUby5nZXRGdWxsWWVhcigpLCBkYXRlVG8uZ2V0TW9udGgoKSwgZGF0ZVRvLmdldERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlVG9VVEMgLSBkYXRlRnJvbVVUQykgLyBNU19QRVJfREFZKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FsY3VsYXRlVG90YWxQcmljZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gKGNhbGN1bGF0ZURpZmZPZkRheXMoKSAqICRzY29wZS5ib29raW5nLnJvb20ucHJpY2UpICsgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldEV4dHJhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb2ZmZXJTdmMuZ2V0RXh0cmFzKCkudGhlbihmdW5jdGlvbiAoZXh0cmFzRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhcyA9IGV4dHJhc0RhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwIDsgaSA8ICRzY29wZS5leHRyYXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leHRyYXNbaV0uYnV0dG9uVGV4dCA9ICdEb2RhaiArJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXh0cmFzW2ldLmJ1dHRvblRvZ2dsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5hZGRPclJlbW92ZUV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuaW5kZXhPZihleHRyYSk7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRleHQgPSBleHRyYS5idXR0b25Ub2dnbGUgPyAnRG9kYWogKycgOiAnVXN1xYQgLSc7XHJcbiAgICAgICAgICAgIGV4dHJhLmJ1dHRvblRvZ2dsZSA9ICFleHRyYS5idXR0b25Ub2dnbGU7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRXh0cmFzLnB1c2goZXh0cmEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgKz0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRFeHRyYXMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmV4dHJhc1RvdGFsUHJpY2UgLT0gZXh0cmEucHJpY2UgKiBjYWxjdWxhdGVEaWZmT2ZEYXlzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsUHJpY2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wYWlkQ2xhc3MgPSBmdW5jdGlvbiAocGFpZCkge1xyXG4gICAgICAgICAgICBpZihwYWlkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdidG4tc3VjY2Vzcyc7XHJcbiAgICAgICAgICAgIHJldHVybiAnYnRuLXdhcm5pbmcnXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUucGF5ID0gZnVuY3Rpb24gKGJvb2tpbmcpIHtcclxuICAgICAgICAgICAgcm9vbVNlcnZpY2UucGF5KGJvb2tpbmcuX2lkLCAhYm9va2luZy5wYWlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBib29raW5nLnBhaWQgPSAhYm9va2luZy5wYWlkO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBQaW90ciBVc3psZXIgb24gMTEuMTIuMjAxNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uY29udHJvbGxlcigndm91Y2hlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCB2b3VjaGVyU2VydmljZSkge1xyXG5cclxuICAgIC8vSWxlLCBjenkgd2llbG9rcm90bmVnbyB1enl0a3UsIGRhdGEgd3lnYcWbbmnEmWNpYVxyXG4gICAgJHNjb3BlLmdlbmVyYXRlVm91Y2hlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnZvdWNoZXJzID0ge1xyXG4gICAgICAgICAgICBjb2RlczogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBwb3NzaWJsZSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcclxuICAgICAgICB2YXIgZXhwaXJ5RGF0ZSA9ICRzY29wZS52b3VjaGVyRXhwaXJ5RGF0ZTtcclxuICAgICAgICBpZihleHBpcnlEYXRlIDwgbmV3IERhdGUoKSl7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRXJyb3IgPSAnRGF0YSB3eWdhxZtuacSZY2lhIG5pZSBtb8W8ZSBiecSHIHogcHJ6ZXN6xYJvxZtjaSc7Ly9UT0RPIHBvcHJhd2nEhyBrb211bmlrYXRcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzR2VuZXJhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5nZW5lcmF0ZWRWb3VjaGVycyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJFcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgd2hpbGUoJHNjb3BlLnZvdWNoZXJzLmNvZGVzLmxlbmd0aCA8ICRzY29wZS5udW1iZXJPZlZvdWNoZXJzKXtcclxuICAgICAgICAgICAgICAgIHZhciB2b3VjaGVyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCA1OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvdWNoZXIgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGkgIT0gMyApdm91Y2hlciArPSAnLSc7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmNvZGVzLnB1c2godm91Y2hlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vVE9ETyBkYWxzemEgcHJhY2EgbmFkIHZvdWNoZXJhbWksIHBvbXnFm2xlxIcgamFrIHRvIHByemVjaG93eXdhxIcgdyBiYXppZSBjenkgamFrbyB0ZWtzdCBucC4gMjAlIGN6eSBvZGR6aWVsbmllIG51bWJlcjogMjAsIGRpc2NvdW50VHlwZTogJyVcIlxyXG4gICAgICAgICAgICB2YXIgbGFzdCA9ICRzY29wZS5kaXNjb3VudC5jaGFyQXQoJHNjb3BlLmRpc2NvdW50Lmxlbmd0aC0xKTtcclxuICAgICAgICAgICAgaWYobGFzdCA9PT0gJyUnKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50VHlwZSA9ICclJztcclxuICAgICAgICAgICAgZWxzZSBpZihsYXN0ID09PSAnxYInICYmICRzY29wZS5kaXNjb3VudC5jaGFyQXQoJHNjb3BlLmRpc2NvdW50Lmxlbmd0aC0yKSA9PT0gJ3onKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmRpc2NvdW50VHlwZSA9ICd6bCc7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUudm91Y2hlcnMuZGlzY291bnQgPSBjb252ZXJ0VG9OdW1iZXIoJHNjb3BlLmRpc2NvdW50KTtcclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLnR5cGUgPSAkc2NvcGUudm91Y2hlclR5cGU7Ly8wIGplZG5va3Ryb25lZ28sIDEgd2llbG9cclxuICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJzLmV4cGlyeURhdGUgPSBleHBpcnlEYXRlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2VuZXJhdGVkVm91Y2hlcnMgPSAkc2NvcGUudm91Y2hlcnMuY29kZXM7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc0dlbmVyYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyc1NhdmVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLnNhdmVWb3VjaGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudm91Y2hlcnMpO1xyXG4gICAgICAgIHZvdWNoZXJTZXJ2aWNlLnNhdmVWb3VjaGVycygkc2NvcGUudm91Y2hlcnMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudm91Y2hlcnNTYXZlZCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vVE9ETyBvZGplY2llIGt3b3R5IGkgc3ByYXdkemVuaWUgdmF6bm9zY2kod3lzd2lldGxlbmllIG9kcG93aWVkbmllZ28gZXJyb3JhKSwgbmEga29uaWVjIHByenkgcmV6ZXJ3YWNqaSB1d3pnbGVkbmljIHZvdWNoZXJcclxuICAgICRzY29wZS5jaGVja1ZvdWNoZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnZvdWNoZXIpO1xyXG4gICAgICAgICAgICB2b3VjaGVyU2VydmljZS5jaGVja1ZvdWNoZXIoJHNjb3BlLnZvdWNoZXIudG9TdHJpbmcoKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSAnS29kIHBvcHJhd255IHpuacW8a2EgJytyZXN1bHQuZGlzY291bnQrcmVzdWx0LmRpc2NvdW50VHlwZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kaXNjb3VudCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJOb3RGb3VuZCA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZvdWNoZXJGb3VuZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuY29kZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoISRzY29wZS5ib29raW5nRnJtLiR2YWxpZCl7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyRm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICRzY29wZS52b3VjaGVyTm90Rm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpc051bWVyaWMobikge1xyXG4gICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydFRvTnVtYmVyKG4pIHtcclxuICAgICAgICB2YXIgZGlzY291bnQgPSAnJztcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKGlzTnVtZXJpYyhuLmNoYXJBdChpKSkpe1xyXG4gICAgICAgICAgICAgICAgZGlzY291bnQgKz0gbi5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudCA9IE51bWJlcihkaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlzY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzY291bnQgPSBOdW1iZXIoZGlzY291bnQpO1xyXG4gICAgICAgIHJldHVybiBkaXNjb3VudDtcclxuICAgIH1cclxufSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA3LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3VuaXF1ZUNhdGVnb3JpZXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb29tcywgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNBcnJheShyb29tcykpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb29tcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHJvb21zW2ldW3Byb3BlcnR5TmFtZV1cclxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGtleXNbdmFsXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzW3ZhbF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyb29tc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb29tcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFBpb3RyIFVzemxlciBvbiAxNC4xMC4yMDE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnQXV0aFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciBMT0NBTF9UT0tFTiA9ICd0b2tlbic7XHJcbiAgICAgICAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgVXNlciBpbmZvLi4uJyk7Ly9EbyB1c3VuacSZY2lhXHJcbiAgICAgICAgICAgIGlmKHRva2VuKXtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvKHRva2VuKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgYXV0aFRva2VuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1RPS0VOKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0b3JlVXNlckluZm8odG9rZW4pIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1RPS0VOLCB0b2tlbik7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvKHRva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVzZXJJbmZvKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGF1dGhUb2tlbiA9IHRva2VuO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYXV0aFRva2VuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNpZ25pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2F1dGhlbnRpY2F0ZScsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVVzZXJJbmZvKHJlc3VsdC5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5tc2csIHJlc3VsdC5kYXRhLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2csIHJlc3VsdC5kYXRhLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHZhciBzaWdub3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZXN0cm95VXNlckluZm8oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2lnbnVwID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2lnbnVwJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqZXN0ZW0gdyByZXNvbHZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxvYWRVc2VySW5mbygpO1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdXNlcmluZm8nKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7Zmlyc3ROYW1lOiByZXN1bHQuZGF0YS5maXJzdE5hbWUsIGxhc3ROYW1lOiByZXN1bHQuZGF0YS5sYXN0TmFtZSwgZW1haWw6IHJlc3VsdC5kYXRhLmVtYWlsLCBwaG9uZTogcmVzdWx0LmRhdGEucGhvbmUsIHJvbGU6IHJlc3VsdC5kYXRhLnJvbGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyQm9va2luZ3MgPSBmdW5jdGlvbiAoKSB7Ly9UT0RPIHBvcHJhd2nEhyByYXplbSB6IGFwaSDFvGVieSBkYXdhxYJvIHN1Y2Nlc3NcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9nZXRVc2VyQm9va2luZ3MnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBjaGFuZ2VVc2VyRGV0YWlscyA9IGZ1bmN0aW9uIChuZXdEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3Rlc3QnLCBuZXdEZXRhaWxzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlbGxvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvZ2V0TmV3VG9rZW4nLCB7ZW1haWw6IG5ld0RldGFpbHMuZW1haWx9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQyLmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdDIgc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ocmVzdWx0Mi5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkVXNlckluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIG5vd2VnbyB0b2tlbmEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7c3VjY2VzczogdHJ1ZSwgbXNnOiBcIlBvbXnFm2xuaWUgem1pZW5pb25vIGRhbmVcIn0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtzdWNjZXNzOiBmYWxzZSwgbXNnOiBcImNvxZsgcG9zesWCbyBuaWUgdGFrXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChvbGRQYXNzLCBuZXdQYXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2NoYW5nZS1wYXNzd29yZCcsIHtvbGRQYXNzOiBvbGRQYXNzLCBuZXdQYXNzOiBuZXdQYXNzfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7bXNnOiAncG9tecWbbG5pZSB6bWllbmlvbm8gaGFzbG8nfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHttc2c6IHJlc3VsdC5kYXRhLmVycm9yfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VyUm9sZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtyb2xlOiByZXN1bHQuZGF0YS5yb2xlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHNpZ25pbjogc2lnbmluLFxyXG4gICAgICAgICAgICBzaWdub3V0OiBzaWdub3V0LFxyXG4gICAgICAgICAgICBzaWdudXA6IHNpZ251cCxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IGdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBnZXRVc2VyQm9va2luZ3M6IGdldFVzZXJCb29raW5ncyxcclxuICAgICAgICAgICAgY2hhbmdlVXNlckRldGFpbHM6IGNoYW5nZVVzZXJEZXRhaWxzLFxyXG4gICAgICAgICAgICBjaGFuZ2VQYXNzd29yZDogY2hhbmdlUGFzc3dvcmQsXHJcbiAgICAgICAgICAgIGdldFVzZXJSb2xlOiBnZXRVc2VyUm9sZSxcclxuICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWRcclxuICAgICAgICB9XHJcbiAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA4LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdvZmZlclN2YycsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuICAgICAgICB2YXIgY2hvc2VuUm9vbSA9IHt9O1xyXG4gICAgICAgIHZhciBleHRyYXMgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIGNob29zZVJvb20gPSBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgICAgICAgICBjaG9vc2VuUm9vbSA9IHJvb207XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaG9vc2VuUm9vbTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RXh0cmFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2dldEV4dHJhcycpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLmV4dHJhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBjaG9vc2VSb29tOiBjaG9vc2VSb29tLFxyXG4gICAgICAgICAgICBnZXRSb29tOiBnZXRSb29tLFxyXG4gICAgICAgICAgICBnZXRFeHRyYXM6IGdldEV4dHJhcyxcclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDA2LjExLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdyb29tU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdGVkUm9vbSA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBnZXRSb29tcyA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2ZpbmRSb29tcycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9icmFubyBwb2tvamUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5yb29tcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBib29rUm9vbSA9IGZ1bmN0aW9uIChkYXRhKSB7Ly9UT0RPIHpqYcSFxIcgc2nEmVxyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9yZXNlcnZlJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2FuY2VsQm9va2luZyA9IGZ1bmN0aW9uIChyb29tX2lkLCBib29raW5nX2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnamV0ZW0gcHJ6ZWQgcG9zdCBjYW5jZWwnKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2FuY2VsQm9va2luZycse3Jvb21faWQ6IHJvb21faWQsIGJvb2tpbmdfaWQ6IGJvb2tpbmdfaWR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc29sdmUgY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVqZWN0IGNhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0QWxsUm9vbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0Um9vbXMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5kYXRhLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGdldFJvb21Cb29raW5ncyA9IGZ1bmN0aW9uIChyb29tX2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldFJvb21Cb29raW5ncycsIHtyb29tX2lkOiByb29tX2lkfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhWzBdLnJlc2VydmF0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGFbMF0pXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXRVc2VySW5mbyA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL2dldFVzZXJJbmZvJywge2VtYWlsOiB1c2VyfSkudGhlbihmdW5jdGlvbiAodXNlckluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdXNlckluZm8uZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1c2VySW5mby5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh1c2VySW5mby5kYXRhKVxyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAodXNlckluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QodXNlckluZm8uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzaWdudXBBbmRCb29rID0gZnVuY3Rpb24gKHVzZXIsIGlkLCBkYXRlcywgcHJpY2UsIGV4dHJhcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleHRyYXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9zaWdudXBBbmRCb29rJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiB1c2VyLnBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBkYXRlcy5kYXRlRnJvbSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogZGF0ZXMuZGF0ZVRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYXM6IGV4dHJhc1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCduaWUgdWRhxYJvIHNpxJknKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWRtaW5Cb29rID0gZnVuY3Rpb24gKGlkLCBlbWFpbCwgZGF0ZXMsIHByaWNlLCBleHRyYXMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ3aXM6IHJvb21TdmMsIGZ1bmtjamE6IGFkbWluQm9vayB8IGlkOlwiK2lkK1wiLCBlbWFpbDogXCIrZW1haWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9hZG1pbkJvb2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBkYXRlcy5kYXRlRnJvbSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogZGF0ZXMuZGF0ZVRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYXM6IGV4dHJhc1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgnT0snKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1d5c3TEhXBpxYIgYsWCxIVkIHBvZGN6YXMgcmV6ZXJ3YWNqaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1d5c3TEhXBpxYIgYsWCxIVkIHBvZGN6YXMgcmV6ZXJ3YWNqaScpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VXNlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZ2V0VXNlcnMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzID0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ05pZSB6bmFsZXppb25vIHXFvHl0a293bmlrw7N3JylcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdOaWUgem5hbGV6aW9ubyB1xbx5dGtvd25pa8OzdycpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwYXkgPSBmdW5jdGlvbiAocmVzZXJ2YXRpb25faWQsIHBheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS9wYWlkJywge2lkOiByZXNlcnZhdGlvbl9pZCwgcGF5OiBwYXl9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldFJvb21zOiBnZXRSb29tcyxcclxuICAgICAgICAgICAgZ2V0QWxsUm9vbXM6IGdldEFsbFJvb21zLFxyXG4gICAgICAgICAgICBib29rUm9vbTogYm9va1Jvb20sXHJcbiAgICAgICAgICAgIGNhbmNlbEJvb2tpbmc6IGNhbmNlbEJvb2tpbmcsXHJcbiAgICAgICAgICAgIGdldFJvb21Cb29raW5nczogZ2V0Um9vbUJvb2tpbmdzLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIHNpZ251cEFuZEJvb2s6IHNpZ251cEFuZEJvb2ssXHJcbiAgICAgICAgICAgIGFkbWluQm9vazogYWRtaW5Cb29rLFxyXG4gICAgICAgICAgICBnZXRVc2VyczogZ2V0VXNlcnMsXHJcbiAgICAgICAgICAgIHBheTogcGF5XHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUGlvdHIgVXN6bGVyIG9uIDEyLjEyLjIwMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCd2b3VjaGVyU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGh0dHApIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgc2F2ZVZvdWNoZXJzID0gZnVuY3Rpb24gKHZvdWNoZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZvdWNoZXJzKTtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvc2F2ZVZvdWNoZXJzJywgdm91Y2hlcnMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZGF0YS5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzdWx0LmRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hlY2tWb3VjaGVyID0gZnVuY3Rpb24gKHZvdWNoZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvY2hlY2tWb3VjaGVyJywge3ZvdWNoZXJDb2RlOiB2b3VjaGVyfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEuc3VjY2VzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGF0YS52b3VjaGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2F2ZVZvdWNoZXJzOiBzYXZlVm91Y2hlcnMsXHJcbiAgICAgICAgICAgIGNoZWNrVm91Y2hlcjogY2hlY2tWb3VjaGVyXHJcbiAgICAgICAgfVxyXG4gICAgfSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
